$.extend($.support,{placeholder:"placeholder"in document.createElement("input"),isMobile:/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}),$.support.transition||($.fn.transition=$.fn.animate);var shop=function(){function t(t){return!!e(t)}function e(t,e,i){var n=t.split(i||"."),o=n.length;t=e||window;for(var s=0;s<o&&void 0!==t;s++)t=t[n[s]];return t}function i(t,e,i,n){for(var o=t.split(n||"."),s=o.length-1,r=i||window,a=null,c=0;c<s;c++)void 0===(a=r[o[c]])&&(a={},r[o[c]]=a),r=a;return r[o[c]]=e,e}function n(t){return"object"==typeof t?[t]:(t?t.split(","):[]).map(function(t){return t.trim()})}function o(t,e,i){if(d)var n=performance.now();var o=t.element,s=t.name,r=t.params,a=t.instanceName,c=t.device;if(!shop.Module.isExists(s))return console.error("Module "+s+" hasnt been implemented yet");i&&$.isFunction(i.beforeInit)&&i.beforeInit(o,s,r,a,c);var l=shop.Module.init(s,r,o);a&&(shop.instance[a]=l),c&&shop.Module.deviceController(l,e.value),i&&$.isFunction(i.afterInit)&&i.afterInit(l,s,r,a,c),d&&function(t,e){var i=window.modulesInitLog||{total:0},n=i[t]||{count:0,time:0};n.count+=1,n.time+=e,i[t]=n,i.total+=e,window.modulesInitLog=i}(s,performance.now()-n)}function s(t){var e=Object.assign({},t),i=h[t.name]||{};return e.loadingType||(e.loadingType=i.loadingType||c),e.loadingTypeSupport||(e.loadingTypeSupport=i.loadingTypeSupport||l),e}function r(t,e,i){function n(t){o(t,e,i),t.additionalModulesData.forEach(function(t){o(t,e,i)})}function s(t){setTimeout(function(){n(t)},0)}var r=[],c=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var i=function(t){var e=r.findIndex(function(e){return e.element[0]===t});if(-1!==e){var i=r[e];return r.splice(e,1),i}}(t.target);void 0!==i&&(s(i),e.unobserve(t.target),0===r.length&&e.disconnect())}})},{rootMargin:"500px"});t.forEach(function(t){switch(t.loadingType){case a.ON_HOVER:!function(t){var e=!1;t.element.one("mouseenter focus",function(i){e||(n(t),e=!0,t.element.trigger("mouseenter",i))})}(t);break;case a.ON_SHOW:!function(t){r.push(t),c.observe(t.element[0])}(t);break;case a.IDLE:!function(t){shop.helpers.IdleQueue.pushTask(function(){n(t)})}(t);break;case a.ON_NEXT_TICK:s(t);break;case a.SYNC:o(t,e,i);break;default:console.error("Unsupported module loading type "+t.loadingType)}})}var a={SYNC:"sync",IDLE:"idle",ON_NEXT_TICK:"next_tick",ON_HOVER:"hover",ON_SHOW:"show"},c=a.ON_NEXT_TICK,l=function(t){var e=[];for(var i in t)e.push(t[i]);return e}(a),h={"change-wishlist-items":{loadingType:a.IDLE},comparisonManager:{loadingType:a.IDLE},minicartManager:{loadingType:a.IDLE},popup:{loadingType:a.ON_NEXT_TICK},addToBasket:{loadingType:a.ON_HOVER},"clear-field-value":{loadingType:a.ON_HOVER},"sg-validation-handler":{loadingType:a.ON_NEXT_TICK},heroCarousel:{loadingType:a.ON_SHOW},"gtm-banner-events":{loadingType:a.ON_SHOW},countDown:{loadingType:a.ON_SHOW},galleryCarousel:{loadingType:a.ON_SHOW},"swipe-fixed-width":{loadingType:a.ON_SHOW},"mobile-catalog":{loadingType:a.ON_SHOW},profile:{loadingType:a.ON_SHOW},geolocation:{loadingTypeSupport:[a.ON_NEXT_TICK]},"sg-tooltip":{loadingType:a.ON_HOVER},"lazy-gtm":{loadingType:a.SYNC}},d="true"===$.cookie("CALC_JS_MODULES_INIT_TIME"),u="false"!==$.cookie("IS_INIT_JS_MODULES_ASYNC");return{define:function(e,n){if(t(e))throw"Namespace collision : "+e+" already registered";return i(e,n=n||{})},extend:function(t){var e=arguments.length>0?$.makeArray(arguments):[];return $.extend.apply(null,e)},include:function(t){var e=arguments.length>0?$.makeArray(arguments):[];return t=e.shift(),e.unshift(t.prototype),$.extend.apply(null,e)},getItem:function(i){if(!t(i))throw"Initialization error : Module "+i+" doesn't exists!";return e(i)},isExists:t,initScripts:function(t,e){var i={value:!1};shop.Event.subscribe("device",function(){i.value=!0});var a=[];(function(t){t=t||$(document.body);var e=$("[data-init]",t);return $(t).data("init")&&(e=e.add($(t))),e})(t).each(function(t,e){a=a.concat(function(t,e){for(var i=$(e),o=i.data("instance"),r=i.data("init"),a=!!i.data("device"),c=n(i.data("init-param")),l=i.data("init-trigger"),h=function(t){return(t?t.split(","):[]).map(function(t){return t.trim()})}(i.data("init-additional")),d=s({element:i,name:r,params:c,loadingType:l,instanceName:o,device:a,additionalModulesData:[]}),u=[d],f=0;f<h.length;f++){var p=h[f],g=p.toLowerCase(),m=i.data("init-trigger-"+g),v=s({element:i,name:p,params:n(i.data("init-param-"+g)),loadingType:m,instanceName:i.data("instance-"+g),device:i.data("device-"+g),additionalModulesData:[]});-1!==v.loadingTypeSupport.indexOf(d.loadingType)?d.additionalModulesData.push(v):u.push(v)}return u}(0,e))}),0!==a.length&&(u?r(a,i,e):function(t,e,i){t.forEach(function(t){o(t,e,i),t.additionalModulesData.forEach(function(t){o(t,e,i)})})}(a,i,e))},initSeparateModule:function(t){o({name:t})},setObjectPath:i,getNestedName:e,removeDisabledJSClass:function(){$(".disabled-until-scripts-loaded").removeClass("disabled-until-scripts-loaded")}}}();shop.define("shop.Mixin"),shop.define("shop.Mixin.container"),shop.define("shop.Module"),shop.define("shop.Event"),shop.define("shop.instance"),shop.define("shop.template"),shop.extend(shop.Mixin.container,{_moduleName:function(t){return"shop.Mixin."+t},isExists:function(t){return t=this._moduleName(t),shop.isExists(t)},getItem:function(t){return t=this._moduleName(t),shop.getItem(t)},define:function(t,e){t=this._moduleName(t),shop.define(t,e)}}),shop.extend(shop.instance,shop.Mixin.container,{_moduleName:function(t){return"shop.instance."+t}}),shop.extend(shop.template,shop.Mixin.container,{_moduleName:function(t){return"shop.template."+t},define:function(t,e){t=this._moduleName(t),shop.define(t,shop.helpers.render(e))}}),shop.extend(shop.Mixin,shop.Mixin.container,{_moduleName:function(t){return"shop.Mixin."+t}}),shop.extend(shop.Module,shop.Mixin.container,{_moduleName:function(t){return"shop.Module._items."+t},deviceController:function(t,e){function i(e){return function(){if(!t[e+"Behavior"])return console.error("Method "+e+"Behavior has not been implemented yet");t.__currentState!==e&&setTimeout(function(){t[e+"Behavior"](e),t.__currentState=e},0)}}if(t&&($.each(["mobile","tablet","desktop"],function(t,e){shop.Event.subscribe(e,i(e))}),e)){var n=shop.device.manager.getType();i(n)(n)}},init:function(t,e,i){var n=this._moduleName(t);return shop.getItem(n).apply(i,e||[])}}),shop.device={manager:function(){function t(){var t=i||e.get(0).offsetWidth;return 2===t?"tablet":1===t?"mobile":"desktop"}var e=$("<div>",{class:"device-manager"}).appendTo("body"),i=e.get(0).offsetWidth;return{block:e,getType:t,changeState:function e(n){setTimeout(function(){i=void 0,e.__currentState||(e.__currentState=""),n=n||t(),e.__currentState!==n&&(e.__currentState=n,shop.Event.publish("device",n),shop.Event.publish(n))})},isRetinaDisplay:function(){return 2==window.devicePixelRatio},isItMobile:function(){return{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}[arguments[0]||"any"]()},minScreenSize:320,TYPES:{MOBILE:"mobile",DESKTOP:"desktop",TABLET:"tablet"}}}()},window.shop.cacheControl=function(){var t="true"===$.cookie("CACHE_INDICATOR");return t||$.cookie("CACHE_INDICATOR","true",{path:"/",domain:"."+window.document.domain}),{isPageFromCache:function(){return t}}}(),function(){var t=$(window),e=t.width();shop.observer=function(t){var e=$({});return $.each({on:"subscribe",one:"once",off:"unsubscribe",trigger:"publish"},function(i,n){t[n]=function(){return e[i].apply(e,arguments),t}}),t},shop.observer(shop.Event);var i=$.throttle(300,function(){shop.Event.publish("scroll")}),n=$.throttle(300,function(){t.width()!=e&&(e=t.width(),shop.Event.publish("resize"))});t.on("resize",function(){n()}).on("scroll",function(){i()}).on("orientationchange",function(){shop.Event.publish("orientationchange")}),$(function(){$.support.transition?shop.device.manager.block.on($.support.transition.end,function(){shop.device.manager.changeState()}):Modernizr.mediaqueries&&shop.Event.subscribe("resize",function(){shop.device.manager.changeState()})})}(),window.shop.Mixin.define("arrow",{getHTMLArrow:function(t,e,i){var n="next"===t?"right":"left";return i&&(n="next"===t?"bottom":"top"),'<button data-role="none" class="'+e+" "+e+"_"+t+" sel-hits-button-"+t+'" aria-label="'+("next"===t?"next":"previous")+'"><i class="font-icon icon-'+n+'-open"></button>'}}),shop.Mixin.define("domTraveler",{moveTo:function(t,e,i){return t=$(t),e=e||this.config.defaultMethod,i=i||this.$.holder,t[e](i),this},switchTo:function(t,e){var i,n,o,s=this.config;return n=(i="string"==typeof t&&t in s.routes?s.routes[t]:t).target,o=i.method||s.defaultMethod,this.moveTo(n,o),"function"==typeof e&&e(),this}}),shop.Mixin.define("dynamicElement",{config:{autoInit:!1,method:"append",tpl:"",tplData:[]},show:function(){return this.$.el.show(),this},hide:function(){return this.$.el.hide(),this},remove:function(){return this.$.el.remove(),this},detach:function(){return this.$.el.detach(),this},render:function(t,e){return t=t||this.config.tpl,e=e||this.config.tplData,$(shop.helpers.render(t,{data:e}))},insert:function(t){return this.$.el||(this.$.el=this.render()),t=t||this.config.method,this.$.holder[t](this.$.el),this}}),shop.Mixin.define("input",{input:{isChecked:function(t){return t.is(":checked")},check:function(t){return t.attr("checked","checked")},unCheck:function(t){return t.removeAttr("checked")},changeState:function(t){return this.isChecked()?this.unCheck():this.check()}}}),shop.Mixin.define("itemsContainer",{config:{activeClass:"active"},getActiveItem:function(t){var e="."+this.config.activeClass,i=this.$.items.filter(e);return t&&!i.length&&(i=this.$.items.first()),i},setActiveItem:function(t){return t=t||this.getActiveItem(),this.unsetActiveAll(t),t.addClass(this.config.activeClass)},unsetActiveItem:function(t){return t.removeClass(this.config.activeClass)},unsetActiveAll:function(t){return this.$.items.not(t).removeClass(this.config.activeClass)},isActiveItem:function(t){return t.hasClass(this.config.activeClass)}}),shop.Mixin.define("overlay",{overlay:{_create:function(t){var e=$('<div class="ajax-overlay-wrapper"><div class="ajax-overlay">').appendTo($("body"));return this._setPosition(t,e),this.add(t,e)},_createLocal:function(t,e){e.css("position","relative");var i=$("<div class='ajax-overlay'/>").appendTo(e);return this._setPositionLocal(t,i),this.add(t,i)},show:function(t,e,i){var n=null;return i?(i=$(i),n=this.get(t)||this._createLocal(t,i),e&&this._setPositionLocal(t,n,i)):(n=this.get(t)||this._create(t),e&&this._setPosition(t,n)),n.show()},hide:function(t){t.is("input")&&t.css("opacity","1"),this.get(t).hide()},get:function(t){return $.data(t[0],"overlay")},add:function(t,e){return $.data(t[0],"overlay",e)},_setPosition:function(t,e){var i=t.offset();return $.extend(i,{width:t.outerWidth(),height:t.outerHeight()}),t.is("input")&&(t.css("opacity","0.5"),e.css("background","transparent")),e.find(".ajax-overlay").css(i),e.css({height:i.height+i.top}),this},_setPositionLocal:function(t,e,i){var n=t.position();return i&&(n={top:0,left:0}),$.extend(n,{width:t.outerWidth(),height:t.outerHeight()}),e.css(n),this}}}),shop.Mixin.define("regExp",{escapeStr:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}),shop.Mixin.define("showHide",{config:{activeClass:"active"},show:function(){return this.$.holder.addClass(this.config.activeClass),this},hide:function(){return this.$.holder.removeClass(this.config.activeClass),this},isShown:function(){return this.$.holder.hasClass(this.config.activeClass)}}),shop.Mixin.define("state",{config:{affectParent:!1,states:["active","inactive"]},getState:function(){for(var t=this.$.holder,e="",i=this.config.states,n=i.length,o=0;o<n;o++){var s=i[o];if(t.hasClass(s)){e=s;break}}return e},isState:function(t){return this.$.holder.hasClass(t)},setState:function(t){var e=this.$.holder;return this.config.affectParent&&e.parent().removeClass($.map(this.config.states,function(t){return"parent-"+t}).join(" ")).addClass("parent-"+t),e.removeClass(this.config.states.join(" ")),e.addClass(t),this},switchState:function(){var t=this.config.states;return this.isState(t[0])?this.setState(t[1]):this.setState(t[0]),this}}),shop.Mixin.define("tab",{config:{autoInit:!1,method:"append",tpl:"",tplData:[]},getItemTarget:function(t){var e=t.find("a");return e.data("target")||e.attr("href").replace("#","")},getActiveTabId:function(){var t=this.getActiveItem();return this.getItemTarget(t)},getItemById:function(t){var e=this;return this.$.items.filter(function(){return e.getItemTarget($(this))===t})},setActiveById:function(t){return this.setActiveItem(this.getItemById(t)),this},unsetActiveById:function(t){return this.unsetActiveItem(this.getItemById(t)),this}}),shop.define("shop.Mixin.url",{getQueryParamsObject:function(t){var e={};if(0!==t.length)for(var i=t.split("&"),n=0,o=i.length;n<o;n++){var s=i[n].split("=");e[s[0]]=s[1]}return e}}),function(){function t(t){this.config={},$.extend(!0,this.config,t||{}),this.initialize.apply(this,arguments)}var e={extend:function(t,e){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},$.extend(!0,i,n,e);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&$.extend(!0,i.prototype,t),i.__super__=n.prototype,i},include:function(t){var e=arguments.length>0?$.makeArray(arguments):[];return e.unshift(this.prototype),$.extend.apply(null,e),this},define:function(t,e){t="shop.Class."+t,e=e||this,shop.define(t,e)}},i={initialize:function(){},loadObjects:function(t,e,i){e=e||this.config.selectors,i=i||this.$;var n=null;for(n in e)i[n]="string"==typeof t?$(t+" "+e[n]):$(e[n],t);return this}};$.extend(!0,t,e),t.include(i),t.define("Class",t)}(),function(){"use strict";function t(t,e,i,n){return n=n||0,i=i||"It took: ",function(){var o=new Date,s=t.apply(e,Array.prototype.slice.call(arguments)),r=new Date-o;return r>n&&console.log([i,": ",r,"ms"].join("")),s}}shop.define("shop.helpers.render",function(t,e){shop.helpers.render.cache||(shop.helpers.render.cache={});var i=shop.helpers.render.cache;if(void 0!==i[t])return e?i[t](e):i[t];var n=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("{{").join("\t").replace(/((^|}})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)}}/g,"',$1,'").split("\t").join("');").split("}}").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return shop.helpers.render.cache[t]=n,e?n(e):n}),shop.define("shop.helpers.profile",function(e,i,n){return t(e,i,n)}),shop.define("shop.helpers.profileObj",function(e,i,n){for(var o in e)"function"==typeof e[o]&&(e[o]=t(e[o],e,n||o,i));return e}),shop.define("shop.helpers.delay",function(t,e){return setTimeout(t,e||0)}),shop.define("shop.helpers.getUrlParam",function(t){var e,i=t||window.location.search,n={};return(e=i.split("?")).length>1&&(e=e[1].split("&"),$.each(e,function(t,e){var i=e.split("=");n[i[0]]=i[1]})),n}),shop.define("shop.helpers.setUrlParam",function(t,e){if(t)return e=$.extend(!0,window.shop.helpers.getUrlParam(t),e),t.split("?")[0]+"?"+$.param(e)}),shop.define("shop.helpers.inViewport",function(t,e){e=e||0;var i=(t=t instanceof jQuery?t[0]:t).getBoundingClientRect();return i.top+e<=shop.helpers.getWindowHeight()&&i.bottom-e>=0}),shop.define("shop.helpers.camelToLower",function(t,e){if("string"!=typeof t)throw"Expected a string";return t.replace(/([a-z\d])([A-Z])/g,"$1"+(e||"-")+"$2").toLowerCase()}),shop.define("shop.helpers.getWindowWidth",function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}),shop.define("shop.helpers.getWindowHeight",function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}),shop.define("shop.helpers.getLocalStorage",function(){return Modernizr.localstorage?localStorage:{setItem:function(t,e){$.cookie(t,e,{expires:365})},getItem:function(t){var e=$.cookie(t);return void 0===e?null:e},removeItem:function(t){$.cookie(t,null)}}}),shop.define("shop.helpers.paramParser",function(t,e){if("string"==typeof t){for(var i=(t=t.replace(/\s*=\s*/g,"=")).split(/\s+/),n={},o=0;o<i.length;o++){var s=i[o].split("=");s.length<2?shop.setObjectPath(s[0],!0,n):shop.setObjectPath(s[0],s[1],n)}return $.extend(!0,{},e,n)}if("object"==typeof t)return $.extend(!0,{},e,t)}),shop.define("shop.helpers.colorConverter",function(){return{convertRgbToHsl:function(t){var e,i,n=parseInt(t.substring(0,2),16)/255,o=parseInt(t.substring(2,4),16)/255,s=parseInt(t.substring(4,6),16)/255,r=Math.max(n,o,s),a=Math.min(n,o,s),c=(r+a)/2;if(r==a)e=i=0;else{var l=r-a;switch(i=c>.5?l/(2-r-a):l/(r+a),r){case n:e=(o-s)/l+(o<s?6:0);break;case o:e=(s-n)/l+2;break;case s:e=(n-o)/l+4}e/=6}return[e,i,c]},invertColor:function(t){var e=t.sourceColor.substr(1),i=this.convertRgbToHsl(e);return i[0]<.55&&i[2]>=.5||i[0]>=.55&&i[2]>=.75?t.darkColor:t.lightColor}}}),shop.define("shop.helpers.getFileInfo",function(t){function e(t){var e=t.lastIndexOf("."),i=t.lastIndexOf("\\");return-1!=e&&(t=t.substr(0,e)),-1!=i&&(t=t.substr(i+1)),t}function i(t){var e=t.lastIndexOf(".");return-1===e?"":t.substr(e+1)}var n={};if(t.files){var o=t.files[0],s=function(t){var e=+(t/1024).toFixed(1),i=+(e/1024).toFixed(1);return e<102.4?{value:t,valueTyped:e+"Кб"}:{value:t,valueTyped:i+"Мб"}}(o.size);n.size=s.valueTyped,n.type=i(o.name),n.name=e(o.name),n.byteSize=s.value}else n.size=null,n.type=i(t.value),n.name=e(t.value),n.byteSize=0;return n}),shop.define("shop.helpers.price",function(){return{spaceCorrectPrice:function(t){for(var e=t.toString(),i=/(\d+)(\d{3})/;i.test(e);)e=e.replace(i,"$1 $2");return e},getDefaultValue:function(t){return t.toString().replace(/\D/g,"")}}}),window.shop.define("shop.helpers.checkOrientationChange",function(){function t(){var n=e.width();i!=n?(window.shop.Event.publish("orientationchange-end"),i=n):setTimeout(t,50)}var e,i,n=!1;return{init:function(){!n&&(n=!0,e=$("body"),i=e.width(),window.shop.Event.subscribe("orientationchange",function(){t()}))}}}()),window.shop.define("shop.helpers.mutationObserver",function(){var t;return{start:function(e,i){var n=document.querySelector(e),o=$.extend({childList:!0,attributes:!1,characterData:!1,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1},i.config);null!==n?(t=new window.MutationObserver(function(t){t.forEach(function(t){!function(t,e){t.addedNodes.length>0&&e(t.addedNodes)}(t,i.addingCallback)})})).observe(n,o):window.console.warn("mutation holder is not defined in 'helpers.mutationObserver'")},stop:function(){t&&t.disconnect()},isAvailable:function(){return!!window.MutationObserver}}}()),window.shop.define("shop.helpers.form",function(){function t(t){var n,o,s=t.id;(o=(n=e.find("#"+s)).next("."+i.label+'[for="'+s+'"]')).length||(o=$('<label for="'+s+'" class="'+i.label+'"></label>'),n.after(o)),o.html(t.text),o.css("display","block"),n.addClass(i.input)}var e,i={label:"text-error",input:"text-error"};return{showErrors:function(n,o){if(e.length){o||(i={label:"u-error-text",input:"u-error"});for(var s=0;s<n.length;s++)t(n[s])}else console.warn('In "shop.helpers.form" $form is not defined')},setForm:function(t){e=t}}}()),window.shop.define("shop.helpers.inputs",function(){return{getData:function(t){var e=$(t).find("input, textarea"),i={};return $.each(e,function(t,e){var n=$(e);i[n.attr("name")]=n.val()}),i}}}()),window.shop.define("shop.helpers.timeParser",function(){function t(t){return t<10?"0"+t:t}return{parseTime:function(e,i){var n,o,s,r=e;return i.minutes&&(n=parseInt(r/60,10),r%=60),i.hours&&(o=parseInt(n/60,10),n%=60),i.days&&(s=parseInt(o/24,10),o%=24),{days:s,hours:t(o),minutes:t(n),seconds:t(r)}}}}()),window.shop.define("shop.helpers.prepareDataSend",function(){function t(t){var e=$(t.target),i=e.attr('[type="submit"]')?e:e.closest('[type="submit"]');if(0!=i.length&&i.attr("name")&&i.val())return i}function e(t,e){return t.filter(function(){var t=$(this);if(t.hasClass("c-pseudo-form_ignore"))return!1;var i=t.attr("type");return"hidden"===i||"file"===i||!e||t.data("dirty")})}var i='input:not([type="submit"]):not([type="radio"]), textarea';return{getData:function(n,o,s){var r=new FormData,a=e($(i,o),s),c=e($('input[type="radio"]:checked',o),s);if(a.each(function(){var t=$(this);if("file"!=t.attr("type"))r.append(t.attr("name"),t.val());else{var e=t[0].files[0];e&&r.append(t.attr("name"),e,e.name)}}),c.each(function(){var t=$(this);r.append(t.attr("name"),t.val())}),n){var l=t(n);l&&r.append(l.attr("name"),l.val())}return{formData:r}},getJsonData:function(t){var e={};return $(i,t).each(function(){var t=$(this);e[t.attr("name")]=t.val()}),JSON.stringify(e)},getSerializedData:function(i,n,o,s){var r,a=e($(n||"input",i),s).serializeArray();return o&&(r=t(o))&&a.push({name:r.attr("name"),value:r.val()}),a}}}()),window.shop.define("shop.helpers.isIE",function(){var t=!!~window.navigator.userAgent.indexOf("Trident/");return function(){return t}}()),window.shop.define("shop.helpers.throttle",function(t,e){var i=!1;return function(){i||(t.apply(this,arguments),i=!0,setTimeout(function(){i=!1},e))}}),window.shop.define("shop.helpers.getProductIds",function(){return{getAllProductIdsOnPage:function(t){var e,i=$(".fl-product-tile, .wishlist-item, .fl-pdp-price"),n=$(".accessories-product-list"),o=$(".comparelist-content").find(".mini-basket-product"),s=[];return i.each(function(t,i){e=$(i).data("product-id")||$(i).data("productid"),s.push(e)}),o.each(function(t,i){e=$(i).data("prodid"),s.push(e)}),t&&n.each(function(t,e){var i=$(e),n=i.data("init-param").ajaxContentLoad?i.data("init-param").ajaxContentLoad.dataIds:void 0;void 0!==n&&$.each(n,function(t,e){-1===s.indexOf(e)&&s.push(e)})}),$.uniqueSort(s)},getPdpProductId:function(){return $(".fl-pdp-price").data("product-id")}}}())}(),function(){"use strict";function t(){return+new Date}function e(t){this.initTime_=t,this.didTimeout=!1}var i="function"==typeof window.requestIdleCallback;e.prototype.timeRemaining=function(){return Math.max(0,50-(t()-this.initTime_))};var n=i?window.requestIdleCallback.bind(window):function(i){var n=new e(t());return setTimeout(function(){i(n)},0)},o=i?window.cancelIdleCallback.bind(window):function(t){clearTimeout(t)};shop.define("shop.helpers.idle",{rIC:n,cIC:o})}(),function(){"use strict";function t(){return 0!==n.length}function e(){o||(o=shop.helpers.idle.rIC(i))}function i(i){if(o&&(shop.helpers.idle.cIC(o),o=null),!s){for(s=!0;t()&&i.timeRemaining()>0;)n.shift()();s=!1,t()&&e()}}var n=[],o=null,s=!1;shop.define("shop.helpers.IdleQueue",{pushTask:function(t){n.push(t),e()}})}(),function(){"use strict";var t=void 0;shop.define("shop.helpers.memoize",function(e){return function(){return t||(t=e()),t}})}(),function(){"use strict";shop.define("shop.helpers.omitBy",function(t,e){Object.keys(t).forEach(function(i){e(t[i],i)&&delete t[i]})})}(),function(){"use strict";var t={},e="",i=[],n={};shop.define("shop.helpers.checkout",{getData:function(o,s,r){var a,c,l=$.Deferred();s&&t[s]&&t[s].abort(),$.isPlainObject(o.data)&&(o.data=JSON.stringify(o.data)),n[o.url]=!0,r||(e!=o.url&&(i=[],e=o.url),a=o.data,c=!1,i[a]&&(i[a].debug&&(console.info("==============================================================="),console.log("Cache: ",i[a])),c=i[a])),console.time("Request to "+o.url);var h=$.post({url:o.url,data:o.data,contentType:"application/json"});return h.fail(function(t){if(delete n[o.url],"abort"!=t.statusText){if(t.responseJSON&&t.responseJSON.stacktrace){var e="";for(var i in t.responseJSON)t.responseJSON[i]&&(e+="<h2 class='e-h2 u-mt-16'>"+i+":</h2>"+t.responseJSON[i]);t.responseJSON.redirectTo&&(e="<a href='"+t.responseJSON.redirectTo+"' class='c-btn c-btn_text'>Выполнить редирект</a>"+e),new shop.Class.Popup(!1,{classes:["full-screen"],contentAsHTML:!0,title:e}).show()}else if(t.responseJSON&&t.responseJSON.redirectTo)return void(location.href=t.responseJSON.redirectTo);shop.Event.publish("checkout.add-notification",{htmlContent:"Произошла ошибка на сервере: "+t.statusText}),l.reject(t)}}).then(function(t){if(delete n[o.url],t.debug&&(r||(i[a]?JSON.stringify(i[a])!=JSON.stringify(t)&&console.warn("Cache not equal server response"):console.info("===============================================================")),console.timeEnd("Request to "+o.url),console.log("Server response: ",t)),!r){if(i[a]&&JSON.stringify(i[a])==JSON.stringify(t))return void l.resolve(t,!0);i[a]=t}l.resolve(t,!1)}).always(function(){delete n[o.url],delete t[s]}),s&&(t[s]=h),r?l.promise():{promise:l.promise(),cache:c}},getGroups:function(){return n}})}(),function(t){"use strict";window.shop.define("shop.helpers.gtmMutationFunctions",{wizard:function(t){var e=$(t.form),i=$(":radio[name="+t.radioName+"]:checked + label",e)[0];return t.eventContext=$(i).text(),delete t.form,delete t.radioName,t},changeCheckbox:function(t){var e=$(t.holder),i=$(t.elem,e);return t=$.extend(!0,{},t),i.prop("checked")||(t.eventLabel="cancelDiscount"),delete t.holder,delete t.elem,t},changeStateCheckbox:function(t){var e=$(t.elem);return(t=$.extend(!0,{},t)).eventContent=e.prop("checked")?"check":"uncheck",delete t.elem,t},notification:function(t){var e=$(t.holder),i=$(t.element+t.type,e);return(t=$.extend(!0,{},t)).part?t[t.part]=i.text():t.eventContent=i.text(),t.ignore=0===i.length,delete t.holder,delete t.element,delete t.type,delete t.part,t},selectedRadioButton:function(t){var e=$(t.element+'[name="'+t.name+'"]:checked');return(t=$.extend(!0,{},t)).eventContent=e.data("ga_content"),delete t.element,delete t.name,t},hasSelectedRadioButton:function(t){var e=$(t.holder),i=$(t.element+'[name="'+t.name+'"]:checked',e);return(t=$.extend(!0,{},t)).eventContent=i.length>0?"yes":"no",delete t.holder,delete t.element,delete t.name,t},getCheckedRadioButton:function(t){var e=$(t.holder),i=$("input[type=radio]:checked",e);return t=$.extend(!0,{},t),$.each(t.itemsMap,function(e,n){e==i.val()&&(t.eventContent=n)}),delete t.holder,delete t.itemsMap,t},checkoutOrder:function(t){var e,i=$("#checkout_main"),n=$(t.discountHolder),o=$("input:checked",n),s=[],r=$(".o-delivery-email"),a=$(t.bonusRoublesHolder),c=r.length>0?r:$('input[name="'+t.deliveryRadio+'"]:checked'),l=$('input[name="'+t.paymentRadio+'"]:checked'),h=!1;return i.find("form").each(function(t,e){h=h||!$(e).valid()}),h?(t=$.extend(!0,{},t)).ignore=!0:(o.each(function(e,i){var n=$(i),o=n.data("ga_field");s.push(n.data("ga_content")),o&&(t.eventField=o)}),(t=$.extend(!0,{},t)).eventContent=s.join("/"),t.eventLocation=c.data("ga_content"),t.eventContext=l.data("ga_content"),a&&a.length&&(e=parseInt(a.text().match(/\d/g).join("")),t.eventContent+=(t.eventContent?",":"")+e),delete t.bonusRoublesHolder,delete t.discountHolder,delete t.deliveryRadio,delete t.paymentRadio),t},clickHeaderDetails:function(t){var e=$(t.holder),i=$(t.element,e);return t=$.extend(!0,{},t),i.hasClass("collapsed")||(t.eventLabel="collapseOrderDetails"),delete t.holder,delete t.element,t},checkoutPopupType:function(t){var e=$(t.form),i=$(t.holder,e),n=$("input:checked",i).val(),o=$(t.element,e);return(t=$.extend(!0,{},t)).eventContent=n,"checkbox"===o.attr("type")?o.prop("checked")?t.eventLocation="checked":t.eventLocation="unchecked":t.eventLocation=o.val(),delete t.holder,delete t.form,delete t.element,t},checkbox:function(t,e){var i=e.target.checked,n=t.checkboxCheckedValue||"checked",o=t.checkboxUncheckedValue||"unchecked";return(t=$.extend(!0,{},t)).eventContent=i?n:o,delete t.checkboxCheckedValue,delete t.checkboxUncheckedValue,t},dropdown:function(t){var e=$(t.select).siblings(".select-area");return t=$.extend(!0,{},t),e.hasClass("cs-opened")||(t.ignore=!0),delete t.select,t},dropdownSelectedDate:function(t){var e=$(t.select),i=window.moment(e.val(),"DD.MM.YYYY"),n=window.moment(),o=i.diff(n,"days")+1;return(t=$.extend(!0,{},t)).eventContent=o,delete t.select,t},dropdownSelected:function(t){var e=$(t.select).find("option:selected");return(t=$.extend(!0,{},t)).eventContent=e.text(),delete t.select,t},enterSeveral:function(t,e){var i=$(e.currentTarget),n=$(e.target),o=$('input[data-ga-action-part="true"]',i),s=0;return t=$.extend(!0,{},t),n.data("ga-changed",!0),o.each(function(t,e){$(e).data("ga-changed")&&s++}),s!==o.length&&(t.ignore=!0),t},getTileBundleInfo:function(t,e){var i=$(e.target).closest(t.element).data("ga-content");return t=$.extend(!0,{},t),i&&(t.eventValue=i.value,t.eventProductId=i.id,t.eventProductCategoryId=i.category),delete t.element,t},collapsedLink:function(t){return t.eventContext=$(t.link).hasClass("collapsed")?"open":"close",t},checkForm:function(t,e){return t.length&&!t.validate().checkForm()&&(e.ignore=!0),e},getValueFromForm:function(t){var e=$(t.form),i=e.find(t.element).val();return t=$.extend(!0,{},t),e.validate().checkForm()?(t.addToEventValue?(t.eventValue=i,t.eventContent=i,delete t.addToEventValue):t.eventContext=i,delete t.form,delete t.element,t):(t.ignore=!0,t)},getOrderStatus:function(t,e){var i=$(e.target).closest("form"),n=$(t.elementRadio+":checked",i).val(),o=i.find(t.elementOnline).val(),s=i.find(t.elementOffline).val();return t=$.extend(!0,{},t),i.validate().checkForm()?("offline"===n?(t.eventField="Other",t.eventContext=s+"_"+i.find(t.elementStore).val()):(t.eventField="OnStore",t.eventContext=o),delete t.elementOnline,delete t.elementOffline,delete t.elementStore,delete t.elementRadio,t):(t.ignore=!0,t)},getFieldNames:function(t,e){var i,n=$(e.currentTarget),o=$.extend(!0,{},t);return o.dirtyInputs?i=n.find("[data-dirty]").filter(function(){var t=$(this);return!0===t.data("dirty")||"password"===t.attr("type")}).map(function(){return $(this).data("ga-field")}).toArray():(i=n.serializeArray().filter(function(t){var e=n.find('[name="'+t.name+'"]'),i=e.val(),s=e.data("backwardsInputPrev");return o.fieldMapping[t.name]&&i!==s}).map(function(t){return o.fieldMapping[t.name]}),delete o.fieldMapping),o.eventContent=i.filter(function(t,e){return i.indexOf(t)===e}).join(","),delete o.dirtyInputs,o},getRecoveryErrors:function(t,e){var i=$(e.currentTarget),n=i.find(".u-error-text"),o=i.find("input").attr("type");return t.eventContent={tel:"phone",email:"email"}[o],t.eventContext=n.text(),t},getAccountErrors:function(t,e){var i=$(e.currentTarget),n=i.find(".u-error-text").text(),o=i.closest(".c-accordion__item").find(".c-accordion__header").text();return t.eventContext=n,t.eventLocation=o,t},getAuthError:function(t,e){var i=$(e.currentTarget),n=i.data("ga-field");return t.ignore=!1,"recaptcha"===n&&!1===i.prop("checked")?(t.eventContent="timeout",t.eventContext="Время истекло"):"recaptcha"!==n?(t.eventContent=n,t.eventContext=i.find(".u-error-text:visible").text()):t.ignore=!0,t},gtmTypInfo:function(t){var e=new window.shop.Class.GTMforTYP;return t.eventContext=e.findActiveOrder(),t.eventValue=e.getAmount(),t},cancelOrderAnswer:function(t){var e=$(t.form),i=$("input:checked",e);return t.eventContent=i.siblings("label").find("span[data-sel]").text().trim(),delete t.form,t},getRegisterSuccess:function(t,e){var i="formValid"===e.type;return t.eventContent=i?"success":"unsuccess",t},getReferrerAfterAuth:function(t){var e,i,n,o={facebook:"facebook",google:"google",vkontakte:"vk",odnoklassniki:"ok",mailru:"mailru",twitter:"twitter",yandex:"yandex"},s="("+Object.keys(o).join("|")+")",r=document.referrer.split("/");return(t=$.extend(!0,{cookieName:"mvid_d4gtm",bonusCard:"bc"},t)).eventFromBackContent&&(n=t.eventFromBackContent,delete t.eventFromBackContent),n||(1===(e=$.grep(r,function(t){return t.match("^(login|authentication)")})).length?$.cookie(t.cookieName)&&$.cookie(t.cookieName)===t.bonusCard?(n="bonusCard",$.removeCookie(t.cookieName)):n="signin":1===(e=$.grep(r,function(t){return t.match("^social_login")})).length&&(i=e[0].match(s))&&i.length>0&&(n=o[i[0]])),n||(n="other"),t.eventField="sms"===n?"new":"old",t.eventContent=n,delete t.cookieName,delete t.bonusCard,t},getOrderRating:function(t){var e=$(t.elem);if(e.valid()){var i=e.find('input[name="rating"]').val();t.eventContent=i,delete t.elem,delete t.ignore}else t.ignore=!0;return t},getValueInput:function(t){return t[t.nameValueUpdate||"eventContent"]=$(t.selectInput).val(),delete t.selectInput,delete t.nameValueUpdate,t},changeDeliveryDate:function(t){return(t=this.getLocationDeliveryDate(t)).eventAmount=this.getDiffDay(window.moment().format(),t.eventField),t.eventField=t.eventField=window.moment(t.eventField).format("YYYY-MM-DD")+" | "+t.timeslot,delete t.timeslot,t},getLocationDeliveryDate:function(t){var e;return t.elem&&(e=$(t.elem),t.eventLocation=e.data("ga-order-manager")&&e.data("ga-order-manager").eventLocation),t},changeDeliveryDateSubmit:function(t){var e=$(".js_change-date__startDate").val(),i=$(".js_change-date__endDate").val();return(t=this.getLocationDeliveryDate(t)).eventValue=$(".js_change-date__price").val(),t.eventContent=this.getDiffDay(t.eventField,e),t.eventField=e,t.eventAmount=this.getDiffDay(window.moment().format(),t.eventField),t.eventField=window.moment(t.eventField).format("YYYY-MM-DD")+" | "+window.moment.parseZone(e).format("HH:mm")+"-"+window.moment.parseZone(i).format("HH:mm"),t},getTradeInState:function(t,e){var i=$(e.currentTarget),n=i.find('[data-id="trade-in"]').prop("checked"),o=$.extend(!0,{},t),s=i.find(".fl-pdp-price__current:visible").text().match(/\d+/g).join("");return"show"===o.eventAction?o.eventLabel="TradeInAvailable":o.eventLabel=n?"activateDiscount":"deactivateDiscount",o.eventValue=s,o},getDiffDay:function(t,e){var i={hour:0,minute:0,second:0,millisecond:0},n=window.moment(t).utcOffset(e).set(i);return window.moment(e).utcOffset(e).set(i).diff(n,"days")},mergeAttrs:function(t){var e;return t.elem&&(e=$(t.elem),t=$.extend(!0,t,e.data("ga-attr")||{})),t},getPromocode:function(t){var e,i=$(t.selecInput),n=i.parent().find('[data-id="'+i.val()+'"]');return n.length?(t.eventContent=n.data("promo-id"),t.eventLocation=n.index()+1):(e=$(t.checkboxInput),t.eventContent=e.length?e.data("ga_field"):""),delete t.mutable,delete t.mutationFunction,delete t.selecInput,delete t.checkboxInput,t},promocodeNotification:function(e){return e=t.helpers.gtmMutationFunctions.notification(e),t.helpers.gtmMutationFunctions.getPromocode(e)},getContent:function(t,e){var i=$(e.currentTarget),n=t.field||"eventContent";return(t=$.extend(!0,{},t))[n]=i.data("ga-content"),delete t.elem,delete t.field,t},promocodeRecalculate:function(e){if((e=t.helpers.gtmMutationFunctions.getLocationDeliveryDate(e)).selected){var i=$(e.selected);e.eventField=i.length&&i.val()?"FromList":"Manually"}return delete e.selected,e},getCountFileLoader:function(e,i){var n;e=$.extend(!0,{},e);try{n=e.form?$(e.form):$(i.currentTarget).closest("form"),e=t.helpers.gtmMutationFunctions.checkForm(n,e)}catch(t){window.console.warn("form - undefined or ev undefined"),e.ignore=!0}if(e.ignore)return e;if(e.paramMutationFunction){var o=$(e.paramMutationFunction.selectModuleFile,n);o.length&&(e.eventField=o.data(e.paramMutationFunction.nameInstace)&&o.data(e.paramMutationFunction.nameInstace).getCountFiles().toString())}return delete e.paramMutationFunction,e},setCounterInputData:function(t,e){var i=$(e.currentTarget);return t.eventContent=i.data("ga-content"),t.eventAmount=i.parent().find(".c-counter-input__input").val(),t},getCarouselId:function(t,e){return t.eventContent=$(e.currentTarget).data("block-id"),t},getCarouselDirection:function(t,e){var i="prev"===e.namespace?"left":"right";return t.eventContext=i+"Scroll",t.eventContent=$(e.currentTarget).parents(".gallery-content.accessories-new").data("block-id"),t},getCarouselPage:function(t,e){var i=$(t.mutationCarouselSelector||e.target).triggerHandler("currentPage");return"number"==typeof i&&(i=String(++i)),(t=$.extend(!0,{},t))[t.mutationProperty]=i,delete t.mutationCarouselSelector,delete t.mutationProperty,t},getOnlinePaymentStatus:function(t,e,i){var n=$(e.currentTarget),o=t.field||"eventContext";return(t=$.extend(!0,{},t))[o]=n.data("ga-content"),t.eventError=i,delete t.elem,delete t.field,t},wishlistCheckCommentAction:function(t,e,i){return t.eventLabel=i.clickType,t},setPurchaseId:function(t,e){var i=$(e.currentTarget),n=i.parents(".c-history-item").hasClass("chevron_opened");return t.ignore=!n,t.eventContent=i.data("ga-content"),t}})}(window.shop),shop.template.define("popup",'\t\t<div class="c-popup"> \t\t\t<div class="c-popup__block"> \t\t\t\t{{ if(affix === true){ }}\t\t\t\t\t<div data-init="affix" data-init-param="{&quot;targetSelector&quot;: &quot;{{=selector}}&quot;, &quot;topAffixOffset&quot;: &quot;-0.05&quot;}" class="c-popup__close"> \t\t\t\t{{ } else { }}\t\t\t\t\t<div data-init="sticky" data-init-param="{&quot;targetSelector&quot;: &quot;{{=selector}}&quot;, &quot;topAffixOffset&quot;: 0, &quot;fnTop&quot;: true,  &quot;selectorAffix&quot;: &quot;.c-btn_close&quot; }" class="c-popup__close u-sticky"> \t\t\t\t{{ } }}\t\t\t\t\t<span class="c-btn_close font-icon icon-delete"  data-close="true"></span>\t\t\t\t</div>\t\t\t\t<div class="c-popup__content"> \t\t\t\t</div> \t\t\t</div>\t\t</div>'),function(){"use strict";var t=shop.Class.Class.extend({constructor:function t(e,i){if(t.instance)return t.instance;t.instance=this,this.tplPath="common/jade/tpls/select/",this.config=$.extend(!0,{disableCustomClass:".disable-customize",tplSelect:this.tplPath+"select-area.tpl",tplOptions:this.tplPath+"options.tpl",tplDropBox:this.tplPath+"drop-box.tpl",tplDropBoxItems:this.tplPath+"drop-box-items.tpl",notFoundText:"Ничего не найдено.",selectDisabled:".disable-overlay",ajaxOverlay:"box-overlay",selectText:".center",selectBtn:".select-button",dropBox:".drop-box",maxDropHeight:275,maxDropElement:7,dropWidth:!1,mobileDevice:window.shop.device.manager.isItMobile()||!1},i||{}),this.$={},this.$.elements=this.add(e),this.initialize()},initialize:function(){var t=!!this.$.elements.length;return t&&($("body").addClass("custom-dropdown-inited"),this.initSelects(this.$.elements)),t},reinit:function(t){var e=this;return this.removeDropdown(),t.each(function(){e.initSelect(e.destroySelect(this))}),this.active=null,this},removeDropdown:function(){$(this.config.dropBox).not(".drop-sg").each(function(){var t=$(this),e=t.attr("dropdown-id");$(".select-"+e).length||t.remove()})},destroy:function(t){var e=this;return t?t.each(function(){e.destroySelect(this)}):this.removeDropdown(),this},destroySelect:function(t){var e=$(t),i=e.attr("select-id");return e.removeClass("outta-here").removeClass("select-outta-here").removeClass("select-"+i).removeAttr("select-id"),e.parent().find(".custom-select-"+i).remove(),$(".drop-"+i).remove(),t},add:function(t){return $(t).filter("select").not(".outta-here").not(this.config.disableCustomClass)},initSelects:function(t){var e=this;return t.each(function(){e.initSelect(this)})},getDropHtml:function(t){var e={search:t.data("search")};return t.data("tplDropBox")&&(this.config.tplDropBox=this.tplPath+t.data("tplDropBox")+".tpl"),JST&&JST[this.config.tplDropBox]?JST[this.config.tplDropBox](e):""},initSelect:function(t){var e=$(t),i=Math.random().toString(10).substr(2,5),n=e.data("additional-classes"),o=e.data("btn-selector"),s=$.extend({htmlItem:e.data("html-item")},n),r=o?$(o):$(JST&&JST[this.config.tplSelect]?JST[this.config.tplSelect](s):""),a=r.find(this.config.selectBtn),c=r.find(this.config.selectText),l=r.find(this.config.selectDisabled),h=$(this.getDropHtml(e)),d=e.data("ga-btn-attr")||{},u=e.data("select-btn-attrs")||{};o||r.addClass(e.attr("class")),r.addClass("custom-select-"+i).data("$sText",c).data("$opener",a),a.attr(Object.assign(d,u)),l.hide(),h.addClass("drop-"+e.attr("class")).addClass("drop-"+i).attr("dropdown-id",i).data("$optList",h.find(".csbody")).data("$search",h.find(".cs-search")),e.attr("disabled")&&(r.hasClass("c-dropdown")?r.addClass("u-disabled"):r.addClass("disabled"),l.show()),e.data("$btn",r).data("$drop",h),this.bindEvents(t),e.addClass("outta-here").addClass("select-"+i).attr("select-id",i),o||e.after(r),this.renderLabel(e)},bindEvents:function(t){var e=this,i=$(t),n=i.data("$btn"),o=i.data("$drop"),s=o.data("$search"),r=n.data("$opener"),a=$(document),c=$("label[for="+i.attr("id")+"]"),l=$(".header-nav-list");c.off("click"),n.hover(n.addClass.bind(n,"cs-hover"),n.removeClass.bind(n,"cs-hover")),r.add(c).on("click",function(){return!i.attr("disabled")&&(n.hasClass("cs-opened")?e.hideDrop():(i.data("ajaxUrl")&&!i.data("loaded")?e.loadOptions(i.data("ajaxUrl"),"POST",null,i.parent(".select")).done(function(n){var o;n&&(o=JST&&JST[e.config.tplOptions]?JST[e.config.tplOptions](n):"",i.html(o),e.buildDrop(i)),e.showDrop(t),i.data("loaded",!0)}):e.showDrop(t),$.support.isMobile||i.focus()),!1)}),i.on("focus.select",function(){e.focused=this,n.addClass("cf-focus")}).on("change.select",function(t,i){t.originalEvent?(t.stopImmediatePropagation(),e.selectItem(this,$(this).data("selectedIndex"))):"renderLabel"===i&&e.renderLabel($(this))}).on("refresh.select",function(){e.buildDrop(this).selectItem(this,$(this).data("selectedIndex"))}).on("blur.select",function(){e.focused=null,n.removeClass("cf-focus"),a.off("keydown.select")}).off("keydown.select").on("keydown.select",this.keyboardControl.bind(this)),a.on("click.hide-drop",function(t){e.active&&!$(t.target).closest(".c-custom-scroll__track").length&&e.hideDrop()}).scroll(function(){if(e.active){if(e.config.mobileDevice&&document.activeElement.classList.contains("c-text-field__input"))return;e.hideDrop()}}),l.mouseenter(function(){e.active&&e.hideDrop()}),s&&s.on("click",function(t){t.stopPropagation()}).on("focus","input",function(){$(this).closest(".cs-search-body").addClass("focus")}).on("blur","input",function(){$(this).closest(".cs-search-body").removeClass("focus")}).on("submit",function(t){var n=$(t.currentTarget);return e.loadOptions(n.attr("action"),n.attr("method"),n.serialize(),s.find(".cs-search-body")).done(function(t){var n,o;t&&((n=i.find(":selected")).addClass("cs-ignore"),o=JST&&JST[e.config.tplOptions]?JST[e.config.tplOptions](t):"",i.html(o),i.append(n),e.buildDrop(i))}),!1}),shop.Event.subscribe("resize",this.hideDrop.bind(this)),shop.Event.subscribe("hide-drop",function(){e.active&&e.hideDrop()}),o.on("click","li",function(){var n=$(this),o=n.hasClass("selected");if(n.hasClass("disabled")||n.hasClass("cs-info")||o||(i.prop("multiple")?e.selectItem(t,n.data("index"),!1,!0):(e.selectItem(t,n.data("index")),e.hideDrop()),i.trigger("change")),n.hasClass("selected")&&e.hideDrop(),!i.data("redirectable")||n.hasClass("disabled")||o)return!1})},loadOptions:function(t,e,i,n){var o=n instanceof jQuery?n:$(n);return $.ajax({url:t,type:e||"POST",dataType:"json",data:i||"",beforeSend:function(){o.addClass(this.config.ajaxOverlay)}.bind(this),complete:function(){o.removeClass(this.config.ajaxOverlay)}.bind(this)})},buildDrop:function(t){var e,i=$(t),n=i.find('option:not(".cs-ignore")'),o=$.extend({htmlItem:i.data("html-item"),items:n.map(function(){var t=$(this);return{class:t.attr("class"),icon:t.data("icon"),innerHtml:t.data("innerHtml"),href:t.data("href"),text:t.text(),isSelected:!!t.prop("selected"),isDisabled:!!t.prop("disabled")}}),notFoundText:i.data("notFoundText")||this.config.notFoundText},i.data("additional-classes"));return e=JST&&JST[this.config.tplDropBoxItems]?JST[this.config.tplDropBoxItems](o):"",i.data("$drop").find(".csbody").html(e),this},selectItem:function(t,e,i,n){var o,s=$(t),r=s.find("option"),a=s.data("$drop").find("li"),c=this.skipDisabled(a,e,i);return s.data("selectedIndex",c),n||r.prop("selected",!1),(o=r.eq(c)).prop("selected",!o.prop("selected")),this.renderLabel(s)},skipDisabled:function(t,e,i){var n=t.eq(e);return+(n.hasClass("disabled")?i?n.prev("li").not(".disabled").last().data("index")||t.not(".disabled").last().data("index"):n.next("li").not(".disabled").first().data("index")||t.not(".disabled").first().data("index"):e)},initCustomScroll:function(t,e){t.closest(".c-custom-scroll").length>0&&(this.customScroll=new shop.Class.ScrollCrossBrowser({holder:e,settings:{scroller:".csbody"}}))},showDrop:function(t){var e,i,n,o,s,r,a,c=$(t),l=$(c.data("cs-container")||"body"),h=c.data("$btn"),d=c.data("$drop"),u=c.data("cs-not-set-top"),f=c.data("with-top-offset"),p=c.data("position"),g=c.data("min-width")||"",m=c.data("width")||this.config.dropWidth||h.outerWidth();if(i=(e=h.offset())&&e.top||0,n=e&&e.left||0,o=(e=l.offset())&&e.top||0,s=e&&e.left||0,"right"===p&&(n+=h.innerWidth()-m),this.renderLabel(c),this.hideDrop(),this.active=t,h.addClass("cs-opened"),u&&(u=(u=u.split(",")).indexOf(shop.device.manager.getType())>-1),r={top:!u&&i+h.innerHeight()-o+(f?8:0),left:n-s,width:m,zIndex:c.parents(".c-popup").length?10000003:"","min-width":g},l.find(d).length?d.css(r):(this.buildDrop(t),d.css(r).hide().find(".csbody").css({overflow:"hidden"}),l.append(d),this.initCustomScroll(c,d)),"center"===p&&(n=(e=h.offset())&&e.left||0,n+=h.innerWidth()/2-d.width()/2,d.css({left:n})),d.css({overflow:"",visibility:"hidden"}).show(),a=c.data("max-height")||c.hasClass("c-dropdown")&&this.config.maxDropElement*d.find("li").height()||this.config.maxDropHeight,d.defHeight||(d.defHeight=d.find(".csbody").height()),(d.defHeight>a||"auto"==a)&&d.find(".csbody").css({maxHeight:a,overflow:"auto"}),d.css({visibility:"visible"}),this.scrollUpdateTop(d.find(".csbody")),this.customScroll&&(this.customScroll.checkScroll(),this.customScroll.disablePageScroll()),c.data("sel")){var v=d.find("li > a");v.each(function(t){v.eq(t).attr("data-sel",c.data("sel")+"-"+t)})}},hideDrop:function(){var t;this.active&&((t=$(this.active)).data("$drop").hide(),t.data("$btn").removeClass("cs-opened"),this.active=null)},keyboardControl:function(t){t||(t=window.event);var e,i,n=this.active||this.focused,o=$(n),s=t.keyCode;switch(s){case 9:case 27:case 16:this.hideDrop();break;case 13:t.preventDefault(),this.active?(this.selectItem(n,o.data("selectedIndex")),o.attr("multiple")||this.hideDrop(),o.trigger("change")):this.showDrop(n);break;case 40:case 38:t.preventDefault(),i=(e=o.find("option")).index(e.filter(":checked").first()),40==s?(i===e.length-1?i=0:i++,this.selectItem(n,i,!1)):(0===i?i=e.length-1:i--,this.selectItem(n,i,!0)),this.updateDrop(o),this.scrollUpdateTop(o.data("$drop").find(".csbody"));break;default:this.showDrop(n)}},scrollUpdateTop:function(t){var e=t.height(),i=t.find(".selected"),n=i.length?i[0].offsetTop:0;t.scrollTop(n+44-e)},updateDrop:function(t){var e=t.data("$btn"),i=t.data("$drop"),n=t.data("width")||this.config.dropWidth||e.outerWidth();i.css("width",n),this.customScroll&&this.customScroll.resize()},renderLabel:function(t){var e,i,n,o=t.data("$btn").data("$sText"),s=t.data("$drop").find("li"),r=t.find("option"),a=r.filter(":checked");return s.removeClass("selected"),a.each(function(){s.eq(r.index(this)).addClass("selected")}),t.attr("multiple")?(e=t.data("label")||"",a.length&&(e+=" ("+a.length+")")):a.length?(i=a.data("icon")||"",n=a.data("innerHtml")||"",i&&(i='<i class="'+i+'"></i>'),e=i+a.text()+n):e=t.data("label")||"",o.html(e),this}});t.define("CustomSelect",t)}(),function(){"use strict";shop.Class.Class.extend({constructor:function t(){if(t.instance)return t.instance;t.instance=this,shop.observer(this),this.config={threshold:-30,attr:"data-original",placeholder:"/assets/img/fancybox/blank.gif",wrapper:'<div class="lazy-load-image-holder"/>',altMessageTpl:'<span class="lazy-image-alt"><span class="lazy-image-alt-text">{{=alt}}<span><span>',selectors:{images:".lazy:not(.lazy-manual)"},srcsetAttr:"srcset"},this.$={},this.$.holder=$(window),this.loadObjects(),this.initialize(),this.renderAltMessage=shop.helpers.render(this.config.altMessageTpl),this.bindEvents()},add:function(t){t=$(t);var e=this.$.images;return this.loadObjects(t),this.$.images=this.$.images.add(e),this},initialize:function(){var t=this.config.placeholder,e=this.config.wrapper;return this.$.images.each(function(i,n){var o=(n=$(n)).attr("src");o&&o!==t||(n.parent(".lazy-load-image-holder").length||n.wrap(e),n.attr("src",t))}),this},handleSrc:function(t){t=$(t);var e=this,i=t.attr(this.config.attr),n=t.parent(".lazy-load-image-holder").removeClass("lazy-loaded"),o=t.data(this.config.srcsetAttr);if(""===t.attr("data-original")){var s=e.renderAltMessage({alt:t.attr("alt")});n.addClass("lazy-load-error").append(s)}if(o)return t.attr(this.config.srcsetAttr,o),this.loadImage(t,i,n),this;if(i){var r=new Image;$(r).one("load",function(){e.loadImage(t,i,n)}).one("error",function(){var i=e.renderAltMessage({alt:t.attr("alt")});n.addClass("lazy-load-error").append(i),t.trigger("error")}),r.src=i}return this},loadImage:function(t,e,i){t.attr("src",e),i.addClass("lazy-loaded"),t.trigger("loaded")},update:function(){var t=this,e=this.$.images.filter(":visible").filter(function(){var e=shop.helpers.inViewport(this,t.config.threshold);return e&&t.handleSrc(this),e});return t.$.images=t.$.images.not(e),this},bindEvents:function(){shop.Event.subscribe("scroll device updateImages",this.update.bind(this))}}).define("LazyLoad")}(),function(){"use strict";shop.Class.Class.extend({constructor:function t(e){if(t.instance)return t.instance;t.instance=this,this.config={selectors:{blocks:".lazy-content"},cookie:{value:"deviceType",expires:365,path:"/"}},$.extend(!0,this.config,e||{}),this.$={},this.loadObjects(),this.initialize()},initialize:function(){this.bindEvents()},add:function(t){var e,i=this.$.blocks;return this.loadObjects(t),e=this.$.blocks.length,this.$.blocks=this.$.blocks.add(i),e},loadContent:function(t,e){e.url?$.ajax({type:e.method||"GET",url:e.url,dataType:"html",xhrFields:{withCredentials:!0},data:e.data||null,success:function(i){"string"==typeof i&&i.trim().length?(t.append(i),shop.Class.ReinitContent.reinit(t),t.trigger("LazyLoadContent",{status:"success"})):(console.log("LazyLoadContent ERROR: received data is empty",e.url),t.hide(),t.trigger("LazyLoadContent",{status:"error"}))}.bind(this),error:function(){console.log("LazyLoadContent ERROR: data load error"),t.trigger("LazyLoadContent",{status:"error"})}}):console.log("LazyLoadContent ERROR: require url")},updateBlocks:function(){this.$.blocks=this.$.blocks.filter(function(t,e){var i,n=$(e);return!(n.is(":empty:visible")&&(i=n.data("loadParams"),"load"===i.event||"show"===i.event&&shop.helpers.inViewport(n))&&(i.sentCookies&&i.sentCookies.length&&(i.data=this.getCookies(i.sentCookies)),this.loadContent(n,i),1))}.bind(this))},updateCookieValue:function(t){$.cookie(this.config.cookie.value,t,{expires:this.config.cookie.expires,path:this.config.cookie.path})},bindEvents:function(){shop.Event.subscribe("device",function(t,e){this.updateCookieValue(e),this.updateBlocks()}.bind(this)),shop.Event.subscribe("scroll",this.updateBlocks.bind(this))},getCookies:function(t){var e={};return t.forEach(function(t){e[t]=$.cookie(t)}),e}}).define("LazyLoadContent")}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(){this.config={locked:!1,disabled:!1},this.modules=[],this._callbacks=$.Callbacks()},add:function(t){if(this.locked())return this;var e=function(t){return{module:t,handler:function(){var e=arguments.length>0?Array.prototype.slice.call(arguments):[],i=e.shift();if(i&&t[i])return t[i].apply(t,e)}}}(t);return this._callbacks.add(e.handler),this.modules.push(e),this},remove:function(t){if(this.locked())return this;var e=this.modules,i=this._callbacks;return $.each(this.modules,function(n,o){o.module==t&&(e.splice(n,1),i.remove(o.handler))}),this},has:function(t){var e=!1;return $.each(this.modules,function(i,n){n.module==t&&(e=!0)}),e},run:function(){return this.disabled()?this:(this._callbacks.fire.apply(null,arguments),this)},callWith:function(t){return this.disabled()?this:(this._callbacks.fireWith.apply(t,arguments),this)},enable:function(){return this.config.disabled=!1,this},disable:function(){return this.config.disabled=!0,this},disabled:function(){return!!this.config.disabled},empty:function(){return this.locked()?this:(this._callbacks.empty(),this.modules=[],this)},lock:function(){return this.config.lock=!0,this},unlock:function(){return this.config.lock=!1,this},locked:function(){return!!this.config.locked}});t.define("ModulesCollection",t)}(),function(t){"use strict";var e=t.Class.Class.extend({constructor:function(t,e){this.config=$.extend(!0,{notificationParams:{closed:!1,smallText:!1},tpl:"common/jade/tpls/notifications.tpl",successParams:{iconStyle:"ok",iconColor:"green",textColor:"green"},errorParams:{iconStyle:"error",iconColor:"red",textColor:"red"},infoParams:{iconStyle:"info"},initClearHolder:!1},e||{}),this.$={},this.$.holder=t instanceof jQuery?t:$(t),this.config.initClearHolder&&this.$.holder.html("")},_create:function(t){var e,i=this.config[t.type+"Params"];if(!(t.text&&t.type&&i))return window.console.warn("Notification: check type and text"),null;e=$.extend(!0,this.config.notificationParams,{notificationMessages:[{title:t.text}]},i,t.newParams),this.$.el=$(JST[this.config.tpl]({params:e}))},generate:function(t){if(null!==this._create(t))return this.$.el[0].outerHTML},add:function(e){null!==this._create(e)&&(this.$.holder.append(this.$.el),t.Class.ReinitContent.reinit(this.$.holder))},close:function(){this.$.el&&this.$.el.remove(),this.$.holder.trigger("notification-toggled")},replace:function(e){null!==this._create(e)&&(this.$.holder.html(this.$.el),t.Class.ReinitContent.reinit(this.$.holder),this.$.holder.trigger("notification-toggled"))}});e.define("Notification",e)}(window.shop),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={selectors:{opener:".opener",closer:".closer",opencloseBlock:".open-close-block"},onOpen:null,onClose:null,doCloserNeed:!1,isAnimated:!0,changeText:"",classCollapsed:"closed",classExpanded:"active",preventDefault:!0},this.$={},this.$.holder=$(t),$.extend(!0,this.config,e||{}),this.loadObjects(t)},initialize:function(){this.lazyLoad=new shop.Class.LazyLoad,this.isState(this.config.classExpanded)||this.addCollapsedClass(),this.bindEvents()},destroy:function(){this.removeCollapsedClass(),this.unbindEvents()},addCollapsedClass:function(){this.$.holder.addClass(this.config.classCollapsed)},removeCollapsedClass:function(){this.$.holder.removeClass(this.config.classCollapsed)},changeTxt:function(){if(0!==this.config.changeText.length){var t=this.$.opener.eq(0).html(),e=this;e.$.opener.each(function(){$(this).html(e.config.changeText)}),e.config.changeText=t}},openBlock:function(){this.changeTxt(),this.config.isAnimated&&this.animation("slideDown",this.$.holder),this.removeCollapsedClass(),$.isFunction(this.config.onOpen)&&this.config.onOpen()},closeBlock:function(){this.changeTxt(),this.config.isAnimated&&this.animation("slideUp",this.$.holder),this.addCollapsedClass(),$.isFunction(this.config.onClose)&&this.config.onClose()},animation:function(t,e){this.$.opencloseBlock[t](function(){shop.Event.publish("openClose."+t,e)})},bindEvents:function(){this.unbindEvents();var t=this,e=t.config;this.$.holder.on("click",this.config.selectors.opener+", "+this.config.selectors.closer,function(i){t.config.preventDefault&&i.preventDefault(),t.isState(e.classCollapsed)?(t.openBlock(),t.lazyLoad.update(),e.doCloserNeed&&(t.$.holder.find(e.selectors.opener).hide(),t.$.holder.find(e.selectors.closer).show())):(t.closeBlock(),e.doCloserNeed&&(t.$.holder.find(e.selectors.opener).show(),t.$.holder.find(e.selectors.closer).hide()))})},unbindEvents:function(){this.$.holder.off("click",this.config.selectors.opener+", "+this.config.selectors.closer),this.$.opencloseBlock.removeAttr("style")}});t.include(shop.Mixin.state),t.define("OpenClose",t)}(),function(){"use strict";var t=shop.Class.OpenClose.extend({initialize:function(){this.lazyLoad=new shop.Class.LazyLoadContent,this.lazyLoad.update=this.lazyLoad.updateBlocks,this.isState(this.config.classExpanded)||this.addCollapsedClass(),this.bindEvents()}});t.define("OpenCloseContent",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e,i){var n={};"object"!=typeof t||t instanceof jQuery||t instanceof HTMLElement||(t=(n=t).holder||this),this.config=$.extend(!0,{holder:t,holderOpacity:e||!1,overlayClasses:i||"",hideText:!1,target:"[data-overlay-target]"},n),this.$={},this.$.holder=$(this.config.holder)},_create:function(t,e){var i=$(t),n=e?i:$("body"),o=i.find(".ajax-overlay"),s=o.length;return s||(o=$('<div class="ajax-overlay '+this.config.overlayClasses+'">')),this.config.holderOpacity&&o.css("background","none"),s||o.appendTo(n),this.add(t,o)},show:function(t,e,i){t=t||this.$.holder;var n=this.getOrCreate(t,e);return this._setPosition(t,n,e),n.show(),this.config.holderOpacity&&t.css("opacity",.5),i&&n.addClass("ajax-overlay_show ajax-overlay_without-animate"),this.config.hideText?t.find(this.config.target).addClass("u-color-transparent"):setTimeout(function(){n.addClass("ajax-overlay_show")}),n},hide:function(t){t=t||this.$.holder;var e=this.get(t);this.config.holderOpacity&&t.css("opacity",1),e&&(t.is("input")&&t.css("opacity","1"),this.config.hideText&&t.find(this.config.target).removeClass("u-color-transparent"),e.removeClass("ajax-overlay_show").hide())},getOrCreate:function(t,e){var i=this.get(t);return i&&i.parent().length||(i=this._create(t,e)),i},get:function(t){return $.data(t[0],"overlay")},add:function(t,e){return $.data(t[0],"overlay",e)},_setPosition:function(t,e,i){var n;return i?(t.css("position","relative"),n={top:0,left:0,right:0,bottom:0}):(n=t.offset(),$.extend(n,{width:t.outerWidth(),height:t.outerHeight()})),t.is("input")&&(t.css("opacity","0.5"),e.css("background","transparent")),e.css(n),this}});t.define("Overlay",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={},shop.observer(this),this.$={},this.$.holder=$(t),this.$.pageSlider=$("html,body"),this.initialize(),this.bindEvents()},initialize:function(){this.lazyLoad=new shop.Class.LazyLoad,this.lazyLoadContent=new shop.Class.LazyLoadContent,this.sidebar=new shop.Class.BarHandler(this.$.holder,{param:"left",selectors:{bar:".sidebar"}}),this.topbar=new shop.Class.BarHandler(this.$.holder,{param:"padding-top",selectors:{bar:".header-top-info"}});var t=new shop.Class.BarItem(".header-slideup");this.message=new shop.Class.BarMessage(t),this.topbar.controller.register(t),this.sidebar.controller.register(t),this.validationForms={}},goTo:function(t,e){if(t=t||0,$(window).scrollTop()===t&&window.pageYOffset===t)return this;this.$.pageSlider.animate({scrollTop:t},e)},goToBlock:function(t,e,i){if(e=void 0!==e?e:0,!(t=t instanceof jQuery?t:$(t)).length)return this;var n=t.offset().top,o=shop.instance.stickyHeader,s=o?o.item.getHeight():0;return this.goTo(n+e-s,i)},bindEvents:function(){var t=this;t.message.subscribe("remove",function(e,i){t.sidebar.hide(i.bar),t.topbar.hide(i.bar)})}});t.define("Page",t)}(),function(t){"use strict";var e=t.Class.Class.extend({constructor:function(e,i){this.config={activeClass:"c-popup_active",template:t.template.popup({affix:!1,selector:".c-popup"}),rootClasses:[],contentClass:"c-popup__content",closeBtnClass:"c-popup__close",additionalCloseButton:"",bodyNoScrollClass:"u-no-scroll",removeTimeout:300,contentAsHTML:!1,color:!1,title:"",functionFormat:!1,ajaxUrl:!1,ajaxForForm:!1,classes:[],backgroundColor:"",fontColor:"",namespace:"c-popup",seleniumAttribute:"",seleniumAttributeClose:"",needShow:!1,useDefaultContent:!1,selectContent:null,trigger:"click",functionClose:!1,hideParent:!1,clearContentBeforeHide:!1},this.$={},e&&(this.$.holder=e instanceof jQuery?e:$(e),this.config.title=this.$.holder.attr("title")||this.$.holder.data("title"),this.$.holder.attr("title",null)),$.extend(!0,this.config,i||{}),this.$.template=$(this.config.template),this.hasContent=this.config.title||this.config.functionFormat||this.config.ajaxUrl||this.config.ajaxForForm||this.config.useDefaultContent,(this.config.ajaxUrl||this.config.ajaxForForm)&&(this.config.clearContentBeforeHide=!0),this.colorConverter=t.helpers.colorConverter(),this.wasMouseDown=!1,this.popupManager=new t.Class.PopupManager,this.initialize()},initialize:function(){if(this.hasContent){if(this.overlay=new t.Class.Overlay(this.$.template.find("."+this.config.contentClass),!1,"ajax-overlay_on-popup"),this.$.holder){var e=this;this.config.trigger&&this.$.holder.on(this.config.trigger+".popup",function(){return e.show(),!1})}if(this.config.color&&this.$.template.addClass("c-popup_"+this.config.color),this.config.rootClasses)for(var i in this.config.rootClasses)this.$.template.addClass(this.config.rootClasses[i]);if(this.config.classes)for(var i in this.config.classes)this.$.template.addClass("c-popup_"+this.config.classes[i]);this.config.title&&this._setContent(this.config.title),this.config.seleniumAttribute&&this.$.template.find("."+this.config.contentClass).attr("data-sel",this.config.seleniumAttribute),this.config.seleniumAttributeClose&&this.$.template.find("."+this.config.closeBtnClass).attr("data-sel",this.config.seleniumAttributeClose),this._setBackground(),this._setFontColor(),this.$.holder&&this.$.holder.data("popupGa")&&this.setGA(this.$.holder.data("popupGa")),this.config.needShow&&this.show()}},_setContent:function(e,i){var n="."+this.config.contentClass;this.config.contentAsHTML?(this.$.template.find(n).html(e),i&&t.Class.ReinitContent.reinit(this.$.template)):this.$.template.find(n).text(e)},_setBackground:function(){this.config.backgroundColor&&this.$.template.find(".c-popup__block").css("background-color",this.config.backgroundColor)},getContentCurrentPopup:function(){return this.$.template},_setFontColor:function(){if(this.config.fontColor){var t=this.colorConverter.invertColor({sourceColor:this.config.backgroundColor,lightColor:"c-btn_close-invert",darkColor:"c-btn_close"});this.$.template.find(".c-popup__content").css("color",this.config.fontColor).find("a").css("color",this.config.fontColor).addClass("c-link_hover-red"),this.$.template.find(".c-btn_close").addClass(t)}},_show:function(e){this.popupParent=this.popupManager.showPopup(this),this.$.template.appendTo("body"),this.$.template.data("popup-instance",this);var i=this;this.bindEvents(),setTimeout(function(){i.$.template.addClass(i.config.activeClass),i.$.template.find('[data-action="popup-show"]').trigger("popup-show")}),e&&i.config.contentAsHTML&&t.Class.ReinitContent.reinit(i.$.template)},bindEvents:function(){var e=this;this.$.template.on("mousedown",function(t){e.wasMouseDown=t.target==e.$.template[0]}),this.$.template.on("click",function(t){t.target==e.$.template[0]&&e.wasMouseDown&&e.hide(t),e.wasMouseDown=!1}),this.$.template.find('[data-close="true"]').on("click",function(t){e.$.holder&&e.$.holder.trigger("closeButtonClick."+e.config.namespace),t.preventDefault(),e.hide(t)}),this.config.additionalCloseButton&&this.$.template.on("click.additional-close-popup",this.config.additionalCloseButton,function(){e.$.holder&&e.$.holder.trigger("additionalCloseButtonClick."+e.config.namespace),e.hide()}),this.$.template.on("scroll",function(){t.Class.LazyLoad().update()})},findSelectContent:function(){var t=this.config.selectContent?document.querySelector(this.config.selectContent):this.$.holder&&this.$.holder[0]&&this.$.holder[0].querySelector(".c-popup-content");if(this.contentCache=!this.config.clearContentBeforeHide,null===t)return window.console.warn("element "+this.config.selectContent+" not found"),this.hide(),void(this.hasContent=!1);this._setContent(t.innerHTML)},show:function(){if(this.hasContent){var e=this;if(this.config.useDefaultContent&&!this.contentCache&&this.findSelectContent(),this.config.functionFormat&&this._setContent(this.config.functionFormat(this.config.title,this)),this.config.ajaxUrl)e._setContent(this.config.title||""),e._show(),this.overlay.show(),$.get(this.config.ajaxUrl).then(function(t){setTimeout(function(){e.isShown()&&e.overlay.hide(),e._setContent(t,!0)})});else if(this.config.ajaxForForm){var i=this.$.holder.parents("form");e._setContent(this.config.title||""),e._show(),this.overlay.show(),$.ajax({type:i.attr("method")||"post",url:i.attr("action"),dataType:"html",data:i.serialize(),success:function(i){setTimeout(function(){e.isShown()&&e.overlay.hide();var n=null;try{n=JSON.parse(i)}catch(t){}e._setContent(n&&n.htmlContent?n.htmlContent:i,!0),t.Event.publish(e.config.namespace+".ajaxForForm")})},error:function(){setTimeout(function(){e.isShown()&&e.overlay.hide(),e._setContent("Произошла ошибка, повторите запрос позже"),t.Event.publish(e.config.namespace+".ajaxForForm.error"),e.$.holder.trigger(e.config.namespace+".ajaxForForm.error")})}})}else this._show(!0);return this.config.functionReady&&this.config.functionReady(this.config.title),this}},hide:function(e){if(this.hasContent){this.popupManager.hidePopup(this.popupParent),this.$.template.removeClass(this.config.activeClass);var i=this;return this.config.removeTimeout>-1&&setTimeout(function(){i.config.clearContentBeforeHide&&(i.$.template.find("."+i.config.contentClass).empty(),i.overlay.hide(),i.config.title&&i._setContent(i.config.title)),i.$.template.remove()},i.config.removeTimeout),this.$.template.find('[data-action="popup-hide"]').trigger("popup-hide"),t.Event.publish("close."+i.config.namespace),this.unbindEvents(),this.config.functionClose&&this.config.functionClose(e),this.config.hideParent&&null!==this.popupParent&&this.popupParent.hide(),this}},unbindEvents:function(){this.$.template.off("click.additional-close-popup")},isShown:function(){return this.$.template.hasClass(this.config.activeClass)},goTo:function(t,e){var i=t||"."+this.config.contentClass,n=$(i).offset().top,o=e||0;$("."+this.config.namespace).animate({scrollTop:n+o})},setGA:function(t){"object"==typeof t?t.btnClose&&this.$.template.find(".c-btn_close").attr(t.btnClose):window.console.log("Html element popup data-popup-Ga must have object")},destroy:function(){this.$.holder&&this.$.holder.off(this.config.trigger+".popup"),this.isShown()&&this.hide()},overlayShow:function(t){t&&this.overlay.show()||this.overlay.hide()}});e.define("Popup",e)}(window.shop),function(t){"use strict";t.Class.Class.extend({constructor:function(){var e=this;e.initialize(),t.Class.PopupManager=function(){return e},e.constructor=t.Class.PopupManager},initialize:function(){this.$={},this.$.body=$("body"),this.noScrollClass="u-no-scroll",this.countOfOpenPopups=0,this.isIOS=window.shop.device.manager.isItMobile("iOS"),this.topPopup=null},showPopup:function(t,e){var i=this.topPopup;return this.topPopup=t,0===this.countOfOpenPopups&&(e=e||this.noScrollClass,this.isIOS&&this._setStyleForIOS(e),this.$.body.addClass(e),this.bindEvents()),this.countOfOpenPopups+=1,i},_setStyleForIOS:function(t){this.prevPageYOffset=window.pageYOffset,this.prevPagePosition=this.$.body.css("position")||"",this.$.body.css({position:"fixed",marginTop:-this.prevPageYOffset,height:"calc(100% + "+this.prevPageYOffset+"px)",bottom:0,left:0,right:0}),this.$.sidebar=this.$.body.find(".navigation"),this.$.sidebar.addClass(t)},hidePopup:function(t,e){this.topPopup=t,this.countOfOpenPopups-=1,this.countOfOpenPopups<=0&&(this.countOfOpenPopups=0,e=e||this.noScrollClass,this.$.body.removeClass(e),this.isIOS&&this._resetStyleForIOS(e),this.unbindEvents())},_resetStyleForIOS:function(t){this.$.sidebar&&this.$.sidebar.removeClass(t),this.$.body.css({position:this.prevPagePosition,marginTop:"",height:"",bottom:"",left:"",right:""}),$(document).scrollTop(this.prevPageYOffset)},bindEvents:function(){var t=this;$(window).on("keydown.popup-manager",function(e){27===e.keyCode&&t.topPopup.hide()})},unbindEvents:function(){$(window).off("keydown.popup-manager")}}).define("PopupManager")}(window.shop),function(){"use strict";shop.Class.Class.extend({},{reinit:function(t){return t=t instanceof jQuery?t:$(t),$.each(t,function(){var t=$(this);shop.Class.ReinitContent.customSelect(t),shop.Class.ReinitContent.lazyLoad(t),shop.Class.ReinitContent.lazyLoadContent(t),shop.Class.ReinitContent.scripts(t)}),t.find(".disabled-until-scripts-loaded").addBack().removeClass("disabled-until-scripts-loaded"),t},customSelect:function(t){var e=new shop.Class.CustomSelect;e.destroy(t.find("select")),e.initSelects(t.find("select"))},lazyLoad:function(t){var e=new shop.Class.LazyLoad;e.add(t),e.update()},lazyLoadContent:function(t){var e=new shop.Class.LazyLoadContent;e.add(t)&&e.updateBlocks()},scripts:function(t){shop.initScripts(t,{afterInit:function(t,e,i,n,o){if(!o||t){if(o){var s=shop.device.manager.getType();t[s+"Behavior"]&&t[s+"Behavior"](s)}}else window.console.warn("module = undefined in ReinitContent")}})}}).define("ReinitContent")}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={holder:this,scrollbarTopPad:4,templateScrollBar:'<div class="c-custom-scroll__track"><div class="c-custom-scroll__control c-custom-scroll__up">▲</div><div class="c-custom-scroll__free"><div class="c-custom-scroll__bar"></div></div><div class="c-custom-scroll__control c-custom-scroll__down">▼</div></div>',settings:{scroller:".c-custom-scroll__scroller",bar:".c-custom-scroll__bar",track:".c-custom-scroll__track"}},$.extend(!0,this.config,t||{}),this.$={},this.$.holder=$(this.config.holder),this.$.scrollBar=$(this.config.templateScrollBar),this.$.holder.append(this.$.scrollBar),this.$.scroller=this.$.holder.find(this.config.settings.scroller),this.$.scrollerAPI=this.$.holder.baron(this.config.settings),this.$.holder.on("scroll-destroy",this.destroy.bind(this))},checkScroll:function(){this.$.scrollBar.css({top:this.$.scroller.length?this.$.scroller.position().top+this.config.scrollbarTopPad:0})},disablePageScroll:function(){var t=this.$.holder,e=this.$.holder.find(this.config.settings.bar),i=this.$.holder.find(this.config.settings.track);t.bind("mousewheel",function(t){var n=t.deltaY||t.originalEvent.wheelDelta||t.originalEvent.detail,o=e.innerHeight()+e.position().top;return!(0===e.innerHeight()||n>0&&0===e.position().top||n<0&&i.height()-o<=0)})},resize:function(){this.$.scroller.trigger("resize")},destroy:function(){this.$.scrollerAPI.dispose(),this.$.scrollBar.remove(),this.$.holder.off("scroll-destroy")}});t.define("ScrollCrossBrowser",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={visible:!1,param:"left",selectors:{bar:".sidebar"},overlayClass:"sidebar-page-overlay",noScrollClass:"u-no-scroll_sidebar"},shop.observer(this),$.extend(!0,this.config,e),this.$={},this.$.holder=$(t),this.loadObjects(this.$.holder),this.$.body=$("body"),this.$.wrapper=$("body").children(".wrapper").first(),this.initialize()},initialize:function(){this.controller=new shop.Class.InfoAreaController(this.config.selectors.bar),this.initOverlay(),this.bindEvents()},initOverlay:function(){var t;this.$.overlay=this.$.holder.find("."+this.config.overlayClass),0===this.$.overlay.length&&(t='<div class="'+this.config.overlayClass+'"></div>',this.$.overlay=$(t),this.$.holder.append(this.$.overlay))},bindEvents:function(){this.$.bar.swipe({swipeLeft:function(t){shop.Event.publish("sidebar-close",t)},excludedElements:$.fn.swipe.defaults.excludedElements+", .ui-slider"}),this.$.overlay.swipe({swipeLeft:function(t){shop.Event.publish("sidebar-close",t)}}),this.$.overlay.off("click").on("click",function(t){shop.Event.publish("sidebar-close",t)}),window.shop.device.manager.isItMobile("iOS")&&this.$.overlay.off("touchmove").on("touchmove",function(t){t.preventDefault()})},getWidth:function(t){return t?this.$.bar.width()/this.$.bar.parent().width()*100:this.$.bar.width()},getHeight:function(t){return t?this.$.bar.height()/this.$.bar.parent().height()*100:this.$.bar.height()},updateWidth:function(t){return t?(this.$.bar.width(t).css({left:-t}),this.jump(this.isVisible()?t:0),this):this},updateHeight:function(t){return t?(this.$.bar.height(t).css({top:-t}),this.jump(this.isVisible()?t:0),this):this},show:function(t){var e=this["left"===this.config.param?"getWidth":"getHeight"](!1);return this.controller.show(t),this.showOverlay(),this._animate(e)},hide:function(t){var e=this;return t.isVisible()?(shop.Event.publish("hide-drop"),this._animate(0).done(function(){e.hideOverlay(),e.controller.hide(t)})):jQuery.Deferred().resolve()},hideOverlay:function(){this.$.overlay.hide(),this.$.body.removeClass(this.config.noScrollClass),this.$.wrapper.removeClass(this.config.noScrollClass)},showOverlay:function(){this.$.overlay.show(),this.$.body.addClass(this.config.noScrollClass),this.$.wrapper.first().addClass(this.config.noScrollClass)},isVisible:function(){return this.config.visible},jump:function(t){return this._go(t,"css")},_go:function(t,e,i){i=i||this.config.param,t=t||0;var n=this,o={};return o[i]=t,this.$.holder[e](o).promise().done(function(){n.config.visible=parseFloat(t)>0})},_animate:function(t,e){return this._go(t,"transition",e)}});t.define("BarHandler",t)}(),function(){"use strict";var t=shop.Class.ModulesCollection.extend({constructor:function(t,e){this.config={clone:!1},$.extend(!0,this.config,e||{}),this.$={},t=$(t),this.$.holder=this.config.clone?t.clone():t},isVisible:function(){return this.$.holder.is(":visible")},show:function(){return this.$.holder.show(),this},hide:function(){return this.$.holder.hide(),this}});t.define("BarItem",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={hidden:!1,defaultMethod:"prepend",routes:{desktop:{target:".header-top-info"},tablet:{target:".sidebar"},mobile:{target:".sidebar"}}},shop.observer(this),$.extend(!0,this.config,e||{}),this.$={},this.bar=t,this.$.holder=t.$.holder,this.bindEvents()},isAvailable:function(){return!this.config.hidden&&this.$.holder.length},remove:function(){return this.config.hidden=!0,this.publish("remove",this),this},bindEvents:function(){var t=this;t.$.holder.one("click",".btn-close-message",function(e){e.preventDefault(),t.remove()})}});t.include(shop.Mixin.domTraveler),t.define("BarMessage",t)}(),function(){"use strict";var t=shop.Class.ModulesCollection,e=t.prototype,i=t.extend({constructor:function(e,i){this.config={initScripts:!1},$.extend(!0,this.config,i||{}),shop.observer(this),t.apply(this,arguments),this.$={},this.$.holder=$(e)},_insert:function(t,e){e=e||"append",this.$.holder[e](t.$.holder)},register:function(t,i){return i=i||this.config.initScripts,e.add.call(this,t),shop.removeDisabledJSClass(),i&&shop.initScripts(t.$.holder),this},unregister:function(t){return e.remove.call(this,t),t.$.remove(),this},isVisible:function(t){return t.isVisible()},show:function(t){return this.hideAll(),t.$.holder.appendTo(this.$.holder),t.show(),this},hide:function(t){return t.hide(),this},hideAll:function(){return this.run("hide"),this}});i.define("InfoAreaController",i)}(),function(){"use strict";shop.Class.Class.extend({constructor:function t(e){if(t.instance)return t.instance;t.instance=this,this.config={desktopOffset:e&&e.desktopOffset||-200,tabletOffset:e&&e.tabletOffset||-110,mobileOffset:e&&e.mobileOffset||-65}},getOffset:function(){var t,e=shop.instance.stickyHeader,i=e?e.item.getHeight():0;switch(shop.device.manager.getType()){case"desktop":t=this.config.desktopOffset;break;case"tablet":t=this.config.tabletOffset;break;case"mobile":t=this.config.mobileOffset}return t+i},scrollToBlock:function(t){shop.instance.page.page.goToBlock(t,this.getOffset())},focusIn:function(t){t.focus()},focusBlock:function(t,e){var i=$(t),n="input:first"===e?i.find("input:first"):$(e);i&&i.length&&i.is(":visible")&&this.scrollToBlock(i),n&&n.length&&n.is(":visible")&&this.focusIn(n)}}).define("SmartFocus")}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={activeClass:"active",states:["state-active","state-inactive"]},this.$={},this.$.holder=$(t),$.extend(!0,this.config,e||{}),this.initialize()},initialize:function(){}});t.include(shop.Mixin.showHide,shop.Mixin.state),t.define("StateContainer",t)}(),function(t){"use strict";$.tooltipster._env.hasTouchCapability=!1;var e=t.Class.Class.extend({constructor:function(t,e){this.config={trigger:"hover",side:"top",contentAsHTML:!1,large:!1,small:!1,faceliftBehavior:!1,tooltipWidthNormall:360,tooltipWidthSmall:260,color:!1,title:"",functionFormat:!1,functionReady:!1,classes:[],triggerOpen:!1,triggerClose:!1,withoutMobilePopup:!1,isPersonalPriceTooltip:!1,backgroundColor:"",backgroundImage:"",fontColor:"",parent:".page-content",closable:!0,withMobileTooltip:!1,zIndex:1e3,arrow:!0,topOffset:-2,align:"center",arrowOffset:{right:26},popupConfig:{classes:["tooltip"]},useDefaultContent:null,hardReposition:!1,touchstartClose:!0,clearContentBeforeHide:!1,isSocialSharing:!1},$.extend(!0,this.config,e||{}),this.$={},this.$.holder=t instanceof jQuery?t:$(t),this.config.useDefaultContent?this.config.title=$(".c-content-tooltip",this.$.holder).html():this.$.holder.data("title")?this.config.title=this.$.holder.data("title"):this.$.holder.attr("title")&&(this.config.title=this.$.holder.attr("title"),this.$.holder.attr("data-title",this.config.title)),this.onDevice=this._changeDevice.bind(this),this.initialize(),this.bindEvents()},initialize:function(){if(this.isFaceLift=$("body").hasClass("facelift")||this.$.holder.parents(".facelift").length,this.isFaceLift&&(this.config.arrow=!1),this.config.title||this.config.functionFormat){this.colorConverter=t.helpers.colorConverter();var e=this;if(this.device=t.device.manager.getType(),this.config.withoutMobilePopup||this.device!==t.device.manager.TYPES.MOBILE){var i=[];if(this.config.classes)for(var n in this.config.classes)i.push("tooltipster-sidetip-"+this.config.classes[n]);this.config.color&&i.push("tooltipster-sidetip-"+this.config.color),this.config.large&&i.push("tooltipster-sidetip-large"),this.isFaceLift&&i.push("facelift");var o=$(this.config.parent);if(o.length&&this.$.holder.parents(o).length||(o=$("body"),this.config.parent="body"),this.config.prepend){var s=$("<div></div>");o.prepend(s),o=s}new t.Class.TooltipHandler(o),this.tooltip=this.$.holder.tooltipster({debug:!1,trackOrigin:!0,parent:o,content:this.config.title,contentAsHTML:this.config.contentAsHTML,interactive:!0,side:this.config.side||"top",trigger:this.config.trigger||"hover",triggerOpen:this.config.triggerOpen,triggerClose:this.config.triggerClose,distance:0,delay:this.device===t.device.manager.TYPES.DESKTOP?300:100,theme:i,zIndex:this.config.zIndex,arrow:this.config.arrow,maxWidth:this.config.faceliftBehavior?this._getTooltipWidth():void 0,functionBefore:function(){$.each($.tooltipster.instances(),function(t,e){e.close()})},functionPosition:function(t,i,n){var o=e.config.topOffset,s=$(e.config.parent),r=e.$.holder.outerWidth(),a=n.target-e.$.holder.outerWidth()/2,c=e._getTooltipWidth();return s.length&&(o-=s.offset().top),e.config.hardReposition&&n.coord.top<s.offset().top&&"bottom"!==n.side?(n.coord.top+=e.config.topOffset+n.size.height+e.$.holder.outerHeight()-s.offset().top,n.side="bottom"):n.coord.top+=o,"right"===e.config.align&&(n.coord.left-=n.size.width/2-e.config.arrowOffset[e.config.align]),e.isFaceLift&&("top"==n.side?(t._$tooltip.find(".tooltipster-box").addClass("tooltipster-box_top"),n.coord.top-=12):n.coord.top+=12,!e.config.faceliftBehavior||"top"!=n.side&&"bottom"!=n.side||(n.size.width=c,n.size.height="auto",s.outerWidth()-c>a?(n.coord.left=a,t._$tooltip.addClass("tooltipster_ltr")):(n.coord.left=a+r-c,t._$tooltip.addClass("tooltipster_rtl"))),e.config.isPersonalPriceTooltip&&(n.coord.left=n.target-c+r)),e.config.isSocialSharing&&t._$tooltip.addClass("tooltipster_social-sharing"),e.config.functionPosition&&e.config.functionPosition(t,i,n),n},functionAfter:this.config.functionAfter,functionFormat:function(t,i){var n=e.config.sel&&e.config.sel.closeBtn?'data-sel="'+e.config.sel.closeBtn+'"':"",o=e.config.sel&&e.config.sel.box?e.config.sel.box:"",s=$('<span class="tooltipster-close c-btn_close с-btn_white font-icon '+(e.isFaceLift?"i-icon-fl-close":"icon-delete")+'" data-close="true" '+n+"></span>");return e.config.closable?t._$tooltip.addClass("tooltipster_closable"):s.addClass("hidden"),o&&t._$tooltip.find(".tooltipster-box").attr("data-sel",o),t._$tooltip.find(".tooltipster-box").prepend(s),e.config.backgroundImage&&t._$tooltip.find(".tooltipster-box").prepend($('<img class="tooltipster-bg-img" src="'+e.config.backgroundImage+'"></div>')),e.config.backgroundColor&&t._$tooltip.find(".tooltipster-box").css("background-color",e.config.backgroundColor),e.config.functionFormat?e.config.functionFormat(e.config.title):t.__Content},functionReady:function(i){if(e.config.backgroundColor&&i._$tooltip.find(".tooltipster-arrow-background, .tooltipster-arrow-border").css("border-"+i.__lastPosition.side+"-color",e.config.backgroundColor),e.config.fontColor){var n=e.colorConverter.invertColor({sourceColor:e.config.backgroundColor,lightColor:"c-btn_close-invert",darkColor:"c-btn_close"});i._$tooltip.find(".tooltipster-content").css("color",e.config.fontColor).find("a").css("color",e.config.fontColor).addClass("c-link_hover-red"),i._$tooltip.find(".tooltipster-close").addClass(n)}return i._$tooltip.find('[data-close="true"]').on("click",function(t){t.preventDefault(),i._close()}),i._$tooltip.off("tooltip-reposition").on("tooltip-reposition",function(){e.reposition()}),t.Class.ReinitContent.reinit(i._$tooltip.find(".tooltipster-content")),e.config.functionReady?e.config.functionReady(e.config.title):i.__Content}}),t.Event.subscribe("resize."+this.tooltip.__namespace,function(){e.tooltip&&e.$.holder.data("tooltipster-ns")&&!e.$.holder.is(":visible")&&"closed"!=e.tooltip.tooltipster("status").state&&e.tooltip.tooltipster("close")})}else{var r=this.$.holder;"custom"!=this.config.trigger||this.config.triggerOpen||(r=!1),this.config.popupConfig.classes=this.config.classes.concat(this.config.popupConfig.classes,this.config.popupClasses),this.config.popupConfig=$.extend(!0,{contentAsHTML:this.config.contentAsHTML,title:this.config.title,functionFormat:this.config.functionFormat,functionReady:this.config.functionReady,backgroundColor:this.config.backgroundColor,fontColor:this.config.fontColor,seleniumAttribute:this.config.sel&&this.config.sel.box?this.config.sel.box:"",seleniumAttributeClose:this.config.sel&&this.config.sel.closeBtn?this.config.sel.closeBtn:"",functionClose:this.config.functionAfter,clearContentBeforeHide:this.config.clearContentBeforeHide},this.config.popupConfig),this.popup=new t.Class.Popup(r,this.config.popupConfig)}}},_getTooltipWidth:function(){return this.config.small?this.config.tooltipWidthSmall:this.config.tooltipWidthNormall},bindEvents:function(){var e=this;t.Event.subscribe("device",this.onDevice),this.$.holder.on("tooltip-destroy",function(){return e.destroy(),!1})},_changeDevice:function(e,i){this.device==i||this.device!==t.device.manager.TYPES.MOBILE&&i!==t.device.manager.TYPES.MOBILE||this.config.withMobileTooltip||(this.destroy(),this.initialize(),this.bindEvents())},show:function(){this.popup&&this.popup.show(),this.tooltip&&this.tooltip.tooltipster("open")},hide:function(){this.popup&&this.popup.isShown()&&this.popup.hide(),this.tooltip&&this.tooltip.tooltipster("close")},isShown:function(){return this.popup?this.$.template.hasClass(this.config.activeClass):this.tooltip?this.tooltip.tooltipster("status").open:void 0},destroy:function(){if(this.$.holder.off("click.tooltip"),this.$.holder.off("tooltip-destroy"),t.Event.unsubscribe("device",this.onDevice),this.popup&&(this.popup.destroy(),this.popup=!1),this.tooltip){if(t.Event.unsubscribe("resize."+this.tooltip.__namespace),this.$.holder.parents("body").length)try{this.tooltip.tooltipster("destroy")}catch(t){}this.tooltip=!1}},reposition:function(){this.tooltip&&this.tooltip.tooltipster("reposition")}});e.define("Tooltip",e)}(window.shop),function(){"use strict";window.shop.Class.Class.extend({constructor:function t(e){if(t.instance)return t.instance;t.instance=this,this.initialize(e)},initialize:function(t){var e=this;window.shop.device.manager.isItMobile("iOS")&&t.on("touchstart",function(t){e.closePopup(t)})},closePopup:function(t){var e=$(".tooltipster-show");e.length>0&&0===e.has(t.target).length&&($(".tooltipstered").data("tooltip-custom-close")||$(".tooltipstered").tooltipster("close"))}}).define("TooltipHandler")}(),function(t){t.Class.Class.extend({constructor:function(t,e,i){this.functionClose=this.eventPopupClose.bind(this),this.config=$.extend(!0,{eventBus:"update-confirmation",eventDone:"done",eventError:"error",eventCancel:"cancel",popupConfig:{contentAsHTML:!0,title:"...",functionClose:this.functionClose,trigger:"popup-uo",classes:["full-mobile","with-title"]}},e),this.holder=t instanceof jQuery?t:$(t),this.bus=i,this.popup=null;var n=this;this.holder.on(this.config.eventDone,function(t,e){e.savePopup||n.popup.hide(),n.eventPush({status:"success"===e.status?n.config.eventDone:n.config.eventError,notification:e.notification&&e.notification,isSmsConfirmation:e.isSmsConfirmation,state:e.state,fullData:e})})},begin:function(t){this.showPopup('<div data-init="controller-confirmation-additional"><div class="wrapper-form">'+t+"</div></div>")},showPopup:function(e,i){this.popup||(this.popup=new t.Class.Popup(this.holder,this.config.popupConfig)),this.popup._setContent(e,i),!this.popup.isShown()&&this.popup.show()},eventPush:function(t){this.bus(this.config.eventBus,t)},eventPopupClose:function(){this.eventPush({status:this.config.eventCancel})}}).define("ClassConfirmation")}(window.shop),function(){"use strict";shop.Class.Class.extend({constructor:function(t){this.config={format:"json",selectors:{}},this.$={},this.process=$.Deferred().resolve(),$.extend(!0,this.config,t||{}),this.loadObjects()},_cachedRequest:function t(e,i,n,o){var s,r=JSON.stringify(Array.prototype.slice.call(arguments,0,3));return t.cache||(t.cache={}),r in t.cache?t.cache[r]:((s=this._request(e,i,n,o)).done(function(){t.cache[r]=s}),s)},state:function(){return this.process?this.process.state():null},get:function(t,e,i,n){var o,s,r=this._getAdditionalParams();return $.extend(!0,e,r),s=(o=this[n?"_request":"_cachedRequest"]("get",t,e)).abort,(o=o.then(i)).abort=s,o},_request:function(t,e,i,n){var o=$.ajax({url:e,type:t,dataType:this.config.format,data:i}),s=o.abort.bind(o);return n&&((o=o.then(n)).abort=s),this.process=o,o},_highlightText:function(t,e){return e=shop.Mixin.regExp.escapeStr(e),t.replace(new RegExp("("+e+")","ig"),"<strong>$1</strong>")},_getAdditionalParams:function(){var t={};for(var e in this.$)t[e]=this.$[e].val();return t}}).define("AbstractAjaxController")}(),function(){"use strict";shop.Class.AbstractAjaxController.extend({constructor:function t(e){if(t.instance)return t.instance;t.instance=this,this.constructor.__super__.constructor.call(this,{})},getData:function(t){var e;(t=$.extend(!0,{data:"",url:"",beforeSend:"",fail:"",done:"",always:"",noCacheData:""},t)).beforeSend&&t.beforeSend(),e=function(e){e?t.done&&t.done(e):t.fail&&t.fail(),t.always&&t.always()},this.get(t.url,t.data,e)},clearCache:function(t,e){var i=JSON.stringify(["get",t,e]);delete this._cachedRequest.cache[i]}}).define("LoadCacheController")}(),function(){"use strict";shop.Class.AbstractAjaxController.extend({constructor:function(t){this.config={url:"/sitebuilder/blocks/search/search.json.jsp",productUrl:"/products/seo-<subject.repositoryId>/",defaultImgSrc:"/assets/img/no_image_auto_suggest.gif",dictionary:{brand:"Бренды",category:"Категории","product.category":"Категории продуктов","product.display":"Продукты"}},$.extend(!0,this.config,t||{}),this.constructor.__super__.constructor.call(this,this.config)},getData:function(t){var e=this,i=this.config.url,n={N:0,Ntk:"All",Ntt:t+"*",Nty:1,includePath:"/services/dimensionsearch"};return this.get(i,n,function(i){return!i||i.dimensionSearchResults["@error"]?[]:(i=i.dimensionSearchResults.dimensionSearchGroups,i=$.map(i,function(i){if("product.display"===i.displayName||"category"==i.displayName||"brand"==i.displayName)return{subtitle:e._translate(i.displayName),type:i.displayName.replace(".","-"),items:e._composeItemsList(i.dimensionSearchValues,t,i.displayName)}}))})},_translate:function(t){var e=this.config.dictionary;return t in e?e[t]:t},_buildUrl:function(t){var e=t.properties;return e&&e.repositoryId?this.config.productUrl.replace("<subject.repositoryId>",e.repositoryId):e.itemUrl},_buildImgSrc:function(t){var e=t.properties;return e&&e.img_url_thumbnail?e.img_url_thumbnail:this.config.defaultImgSrc},_buildPrice:function(t){return t.properties&&t.properties.salePrice?+t.properties.salePrice:null},_composeItemsList:function(t,e,i){var n=this;return $.map(t,function(t){var o=n._buildPrice(t),s="product.display"===i;if(!s||null!==o)return{img:s?n._buildImgSrc(t):null,inputValue:t.label,text:n._highlightText(t.label,e),url:n._buildUrl(t),price:s?o:null}})}}).define("SearchAjaxController")}(),function(){"use strict";shop.Class.AbstractAjaxController.extend({constructor:function(t){this.config={url:"/myaccount/gadgets/street.json.jsp"},$.extend(!0,this.config,t),this.constructor.__super__.constructor.call(this,this.config)},getData:function(t){var e=this,i=this.config.url,n={nameStartsWith:t};return this.get(i,n,function(i){return[{subtitle:"Выберите улицу",items:e._composeItemsList(i&&i.streets||[],t)}]})},checkData:function(t){t=t.split(",")[0];var e=this.config.url,i={nameStartsWith:t};return this.get(e,i,function(e){var i=e&&e.streets||[];return!(!i||!i.length)&&$.grep(i,function(e){return e.name.toLowerCase()===t.toLowerCase()}).length>0})},getItemId:function(t){var e=this.config.url,i={nameStartsWith:t};return this.get(e,i,function(t){return t&&t.streets&&t.streets[0]?t.streets[0].id:null})},_composeItemsList:function(t,e){var i=this;return $.map(t,function(t){return{text:i._highlightText(t.name,e),url:t.url}})}}).define("StreetAjaxController")}(),function(){"use strict";var t=!1,e=shop.Class.Class.extend({constructor:function(t){this.config=$.extend(!0,{handlers:{operation:shop.Class.CheckoutOperations}},t),this.$={holder:t.holder instanceof jQuery?t.holder:$(t.holder)},this.initialize()},initialize:function(){var t=this;this.operation=new this.config.handlers.operation,this.lastLoaders=!1,this.overlayTimeoutId=!1,this.overlay=new shop.Class.Overlay,this.OVERLAY_TIMEOUT_MS=200,this.operation.subscribe("bindEvents",function(e,i){var n=t.$.holder.find('[data-id="'+i+'"]');n.length&&t.bindEvent(n)}),this.bindEvent(this.$.holder)},autofocusesInput:function(t){var e=this.$.holder.find(t);if(e.length){e.focus();var i=e.val().length;e[0].setSelectionRange(i,i)}},isNotValidInput:function(t){var e,i,n=t.data("with");if(n){n=n.split(","),i=t.closest("form");for(var o=0;o<n.length;o++)if((e=$(n[o],i)).hasClass("u-error")||!e.val()&&"true"===e.attr("data-rule-required"))return!0}return t.hasClass("u-error")||!t.val()&&"true"===t.attr("data-rule-required")},bindEvent:function(e){var i=this,n=e.find("[data-handler][data-url]");n.filter(":input").not(":button").change(this.inputChangeHandler.bind(this)),n.not(":input").add(n.filter(":button")).click(this.inputChangeHandler.bind(this)),(n=e.find("[data-popup-handler][data-popup-url]")).on("popup-success-close",this.inputChangeHandler.bind(this));var o=$("#address-not-valid");this.$.holder.find(".o-checkout__submit-button").parents("form").on("submit",function(){var e=this,n=!1,s=$("#newAddressBook").is(":checked");if(i.$.holder.find("form").each(function(t,i){var r=$(i),a=r.find("[data-required-apply=true]:visible"),c=r.validate(),l={};i!==e&&(n=n||!r.valid(),s&&o.length&&(n=!0),o.length&&(n=!0),n||(a.each(function(t,e){var i=$(e),o=i.attr("name"),s=$.trim(i.val()),r=!0===i.data("applied"),a=i.data("required-apply-message"),c=i.data("gtm-event-label");s&&!r&&(l[o]=a,n=!0,window.dataLayer.push({event:"OWOX",eventCategory:"Non-Interactions",eventAction:"show",eventLabel:c,eventContent:a,eventContext:"discountsBlock"}))}),Object.keys(l).length&&c.showErrors(l)))}),n){var r=i.$.holder.find(".u-error:visible");if(o.length){var a=i.$.holder.find("#delivery-address");$("label[for=delivery-address]").attr("style","display: block"),r.push(a[0])}r.length&&((new shop.Class.SmartFocus).focusBlock(r.eq(0),r.eq(0)),o.length&&i.autofocusesInput("#delivery-address"))}else Object.keys(i.getWaitingRequests()).length>0?t=!0:(i.overlay.show(i.$.holder),t=!1);return!n&&!t})},inputChangeHandler:function(e){var i=this,n=$(e.currentTarget);"shippingmethod-pickup-radio"===n.attr("id")&&this.$.holder.find("#shippingmethod-delivery-radio").prop("checked",!1),setTimeout(function(){if(!e.isPropagationStopped()&&!i.isNotValidInput(n)){var o=i.sendData(n,!0);if(o){var s=i.overlay.show(i.$.holder.find(".o-checkout__submit-button"));o.then(function(t){i.receiveData(t)}).always(function(){s&&s.hide(),i.overlay.hide(i.$.holder.find(".o-checkout__submit-button")),t&&i.$.holder.find(".o-checkout__submit-button").trigger("click")})}}}),n.is("a")&&e.preventDefault()},receiveData:function(t,e){if(e||this.hideOverlays(),this.runOperations(t.operations,t.debug),t.notifications&&t.notifications.length)for(var i=0;i<t.notifications.length;i++)shop.Event.publish("checkout.add-notification",t.notifications[i]);e&&this.showLastOverlays()},getFormData:function(t){var e=t.serializeArray(),i={};return $.map(e,function(t,e){i[t.name]=t.value}),i},runOperations:function(t,e){if(t)for(var i=0,n=t.length;i<n;i++)this.operation.refreshBlock(t[i],e)},sendData:function(t,e){var i=t.parents("form"),n=i.data("url"),o=t.data("url")||t.data("popup-url"),s=t.data("handler")||t.data("popup-handler"),r=this.getFormData(i);return i.length?n?o?(s&&(r.handler=s),t.is("[data-without-loader]")||this.showOverlays(t),shop.helpers.checkout.getData({url:n+o,data:r},"checkout-input-change",e)):(console.warn("У инпута должен быть указан атрибут data-[popup-]url(вторая часть url-а).",t[0]),!1):(console.warn("У формы должен быть указан атрибут data-url(первая часть url-а).",i[0]),!1):(console.warn("Изменяемый инпут должен лежать внутри формы.",t[0]),!1)},getWaitingRequests:function(){return shop.helpers.checkout.getGroups()},showOverlays:function(t){var e=$("[data-loader]"),i=t.is("[data-self-loader]"),n=this,o=e.index(t.closest("[data-loader]"))-(i?1:0);this.lastLoaders=-1==o?e:e.filter(":gt("+o+")"),this.overlayTimeoutId=setTimeout(function(){n.lastLoaders.each(function(t,e){var i=$(e);n.overlay.show(i,!0),n.setReadOnlyInput(i)})},i?0:this.OVERLAY_TIMEOUT_MS)},setReadOnlyInput:function(t){t.find("input:not([readonly])").addClass("wait-readonly").attr("readonly",!0)},deleteReadOnlyInput:function(t){t.find(".wait-readonly").removeClass("wait-readonly").attr("readonly",!1)},showLastOverlays:function(){var t=this;this.lastLoaders.each(function(e,i){t.overlay.show($(i),!0,!0)})},hideOverlays:function(){var t=this;this.lastLoaders&&(this.lastLoaders.each(function(e,i){var n=$(i);t.overlay.hide(n),t.deleteReadOnlyInput(n)}),clearTimeout(this.overlayTimeoutId))}});e.define("CheckoutController",e)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.$={affixBlock:t instanceof jQuery?t:$(t),simulateBlock:$("<div></div>")},this.$.affixBlockWrapper=this.$.affixBlock.find(".o-checkout__notifications-wrapper"),this.initialize()},initialize:function(){var t=this;this.topOffset=0,this.nowAffix=!1,this.calcOffset(),t.$.affixBlock.on("affix.bs.affix",function(){t.setSimulateBlockHeight(),t.$.affixBlock.addClass("o-container__section"),t.$.affixBlock.after(t.$.simulateBlock),t.nowAffix=!0}),t.$.affixBlock.on("affix-top.bs.affix",function(){t.$.affixBlock.removeClass("o-container__section"),t.$.simulateBlock.remove(),t.nowAffix=!1}),t.$.affixBlock.affix({offset:{top:function(){return t.topOffset}}}),shop.Event.subscribe("resize",this.calcOffset.bind(this)),shop.Event.subscribe("checkout.add-notification",function(e,i){i.type&&t.checkNotification(i.type)||t.insertNotification(i)}),this.bindNotificationsRemoveEvent()},checkNotification:function(t){return this.$.affixBlockWrapper.find('[data-type="'+t+'"]').length},insertNotification:function(t){var e=$('<div class="o-checkout__notifications-element">'+JST["common/jade/tpls/notifications.tpl"]({params:{closed:"true",background:"gray96",iconStyle:"info",notificationMessages:[{title:t.htmlContent}],notificationAttrs:{"data-type":t.type},shouldEventPrevent:!0}})+"</div>"),i=$("body"),n=i.scrollTop(),o=this;shop.Class.ReinitContent.reinit(e),o.$.affixBlockWrapper.prepend(e),o.bindNotificationsRemoveEvent(),o.setSimulateBlockHeight(e.outerHeight(!0)),o.nowAffix&&i.scrollTop(n+e.outerHeight(!0));var s=e.height();e.css({height:0,opacity:.3,position:"relative",top:-.25*s}),e.animate({height:s,opacity:1,top:0},{duration:250,easing:"easeOutCubic",start:function(){e.css({overflow:"visible"})},done:function(){e.css({height:"auto"}),e.trigger("show.notification")}})},setSimulateBlockHeight:function(t){t?this.$.simulateBlock.height(this.$.simulateBlock.height()+t):this.$.simulateBlock.height(this.$.affixBlockWrapper.height()+12)},calcOffset:function(){this.topOffset=(this.nowAffix?this.$.simulateBlock:this.$.affixBlock).offset().top-12},bindNotificationsRemoveEvent:function(){var t=this;this.$.affixBlockWrapper.find("[data-init=notifications]").off("notifications-remove.checkout").on("notifications-remove.checkout",function(){var e=$("body"),i=$(this).parent(),n=e.scrollTop(),o=i.outerHeight(!this.nowAffix),s=i.height(),r=i.parent();i.css({height:s,opacity:1}),i.animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0},200),setTimeout(function(){i.remove(),r.trigger("notification-removed"),t.setSimulateBlockHeight(-o),e.scrollTop(n-o),t.calcOffset()},200)})}});t.define("CheckoutNotifications",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(){shop.observer(this)},destroyBlock:function(t){var e;(e=t.find("select"))&&e.length&&(new shop.Class.CustomSelect).destroy(e),t.off().empty()},refreshBlock:function(t,e){var i=$('[data-id="'+t.blockId+'"]');i.length&&(this.publish("unbindEvents",t.blockId),this.destroyBlock(i),i.html(t.htmlContent||""),shop.Class.ReinitContent.reinit(i),this.publish("bindEvents",t.blockId),e&&(console.log('refreshBlock for "'+t.blockId+'": ',i[0]),i.removeClass("u-debug-highlight"),setTimeout(function(){i.addClass("u-debug-highlight")})))}});t.define("CheckoutOperations",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config=$.extend(!0,{holder:t,selectBtnRequest:"",selectTimer:"",selectWrapperTimer:"",elementCode:"",timerSeconds:60,handlers:{timer:shop.Class.Timer},restApi:{repeatSmsCode:""},limitError:"",errorClass:"u-error",timerTemplate:"#m#:#s#"},e),this.$={},this.$.holder=t instanceof jQuery?t:$(t),this.initialize()},initialize:function(){this.$.timer=new this.config.handlers.timer({selectors:{timer:this.config.selectTimer},seconds:this.config.timerSeconds,template:this.config.timerTemplate}),this.$.selectBtnRequest=$(this.config.selectBtnRequest,this.$.holder),this.$.selectWrapperTimer=$(this.config.selectWrapperTimer,this.$.holder),this.$.elementCode=$(this.config.elementCode,this.$.holder),this.$.labelErr=this.$.elementCode.siblings(".u-error-text"),this.oldCode=this.$.elementCode.val()},open:function(){var t=this;this.isLimitExceeded=this.$.elementCode.data("limit-exceeded"),this.isInputDisabled=this.$.elementCode.attr("disabled"),this.isLimitExceeded||this.$.elementCode.select(),this.startTimer(),this.isLimitExceeded?this.$.elementCode.attr("readonly",!0).data("msg-required",this.config.limitError||this.$.labelErr.text()):this.$.elementCode.one("blur",function(){t.oldCode&&t.oldCode===t.$.elementCode.val()&&(t.$.elementCode.addClass(t.config.errorClass),t.$.labelErr.show())}).one("input",this.firstInputHandler.bind(this))},firstInputHandler:function(){this.oldCode||this.$.elementCode.val()?(this.$.elementCode.removeClass(this.config.errorClass),this.$.labelErr.hide()):this.$.elementCode.one("input",this.firstInputHandler.bind(this))},startTimer:function(){if(0==this.config.timerSeconds)return this.callbackTimer();this.$.timer.start(this.callbackTimer.bind(this)),this.$.selectBtnRequest.hide(),this.$.selectWrapperTimer.show()},callbackTimer:function(){this.$.selectBtnRequest.show(),this.$.selectWrapperTimer.hide()},toggleComponentsDisable:function(t){this.$.elementCode.attr("readonly",t||!!this.isLimitExceeded||!!this.isInputDisabled).attr("disabled",t||!!this.isLimitExceeded||!!this.isInputDisabled),t?this.$.selectBtnRequest.addClass("u-disabled"):this.$.selectBtnRequest.removeClass("u-disabled")}});t.define("CheckoutSmsConfirm",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={eventNamespace:".Checkout.TimeSlot",elementDate:"",timeSlot:"",handlers:{parser:shop.Class.ParserLeadTime,customSelect:shop.Class.CustomSelect},mDate:{}},this.$={},$.extend(!0,this.config,t||{}),this.initialize()},initialize:function(){this.parser=new this.config.handlers.parser,this.customSelectInstance=new this.config.handlers.customSelect,this.$.elementDate=$(this.config.elementDate),this.$.elementDate.on("change",this.changeDay.bind(this))},setDate:function(t){this.mDate=this.parser.getTimes(t),this.initDate(),this.loaded()},initDate:function(){this.renderSelect(),this.changeDay()},renderSelect:function(){this.$.elementDate.html(this.renderDay());var t=this;setTimeout(function(){t.customSelectInstance.reinit(t.$.elementDate)})},renderDay:function(){var t=[],e=this;return Object.keys(this.mDate).forEach(function(i){t.push("<option "+e.getOptionAttr(e.mDate[i].attr)+' value="'+i+'">'+e.renderDayTitle(i,e.mDate[i].start)+"</option>")}),t.join("")},getOptionAttr:function(t){if(void 0!==t){var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join(" ")}return""},renderDayTitle:function(t,e){var i,n=window.moment.parseZone(e),o={hour:0,minute:0,second:0,millisecond:0},s=window.moment().utcOffset(e).set(o);switch(window.moment(e).utcOffset(e).set(o).diff(s,"days")){case 0:i=lang.get("today");break;case 1:i=lang.get("tomorrow");break;default:i=n.format("dddd")}return i+", "+n.format("D MMMM")},changeDay:function(){var t=this.$.elementDate.val();shop.Event.publish("update"+this.config.eventNamespace,{mTimeSlot:this.mDate[t].timeSlot||{}})},loading:function(){this.$.elementDate.prop("disabled",!0).addClass("u-load")},loaded:function(){this.$.elementDate.prop("disabled",!1).removeClass("u-load")}});t.define("CheckoutDeliveryDate",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={elementTime:"",handlers:{customSelect:shop.Class.CustomSelect},showPrice:!0},this.mTimeSlot={},this.$={},$.extend(!0,this.config,t||{}),this.initialize()},initialize:function(){this.customSelectInstance=new this.config.handlers.customSelect,this.$.elementTime=$(this.config.elementTime),this.firstShown=!1},setTimeSlot:function(t){this.mTimeSlot=t.mTimeSlot,this.renderSelect(),this.loaded()},setDefaultTimeSlot:function(t){this.$.elementTime.find('[value="'+t+'"]').prop("selected",!0)},renderSelect:function(){this.$.elementTime.html(this.renderTimeSlot());var t=this;setTimeout(function(){t.customSelectInstance.reinit(t.$.elementTime)})},renderTimeSlot:function(){var t=[],e=this;return this.mTimeSlot.forEach(function(i){var n;n=i.formattedDescription?i.formattedDescription:e.renderTitle(i),t.push("<option "+e.defaultSelected(e.firstShown?i.defaultSelected:i.selected)+"  "+e.getOptionAttr(i.attr)+' value="'+i.priceGroup.id+'">'+n+"</option>")}),this.firstShown=!0,t.join("")},defaultSelected:function(t){return t?' selected="selected" ':""},getOptionAttr:function(t){if(void 0!==t){var e=[];for(var i in t)e.push(i+'="'+t[i]+'"');return e.join(" ")}return""},renderTitle:function(t){return this.renderTime(t.start)+"-"+this.renderTime(t.end)+" "+this.renderCost(t.price)},renderTime:function(t){return window.moment.parseZone(t).format("HH:mm")},renderCost:function(t){return this.config.showPrice?!t&&lang.get("free")||"за "+t+"¤":""},loading:function(){this.$.elementTime.prop("disabled",!0).addClass("u-load")},loaded:function(){this.$.elementTime.prop("disabled",!1).removeClass("u-load")}});t.define("CheckoutDeliveryTimeSlot",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={eventNamespace:".Checkout.LeadTime",getTimes:""},$.extend(!0,this.config,t||{}),this.currentIdCity="",this.currentAddress=""},changeAddress:function(t,e){var i={};this.currentAddress==t&&this.currentIdCity==e||(this.currentIdCity=e,this.currentAddress=t,this.currentIdCity&&(i.cityId=e,i.address=t,this.getLeadTime(i)))},getLeadTime:function(t){var e=this,i=shop.helpers.checkout.getData({url:this.config.restApi.getTimes,data:t},"checkout-lead-time");this.publishEvent("loading"),i.promise.then(function(t,i){i||e.publishEvent("update",t)}),i.cache&&this.publishEvent("update",i.cache)},publishEvent:function(t,e){shop.Event.publish(t+this.config.eventNamespace,{timeSlot:e})}});t.define("CheckoutLeadTime",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(){},getTimes:function(t){var e={};return t instanceof Array==0&&(t=JSON.parse(t)),t.forEach(function(t){var i=window.moment.parseZone(t.start).format("DD.MM.YYYY");e[i]||(e[i]={start:t.start,timeSlot:[]}),t.attr||(t.attr={}),t.attr["data-price"]=t.price,t.attr["data-startdate"]=t.start,t.attr["data-enddate"]=t.end,t.selected&&(e[i].attr||(e[i].attr={}),e[i].attr.selected=t.selected),e[i].timeSlot.push(t)}),e}});t.define("ParserLeadTime",t)}(),function(){"use strict";shop.Class.Class.extend({constructor:function(t,e){this.config={selectors:{timerHolder:".c-code-check__resend-status",timer:".c-code-check__resend-timer",input:".c-code-check__input",resendLink:".c-code-check__resend-link",checkCodeTrigger:".c-code-check__input",error:".u-error-text"},recaptcha:{checkbox:"#recaptcha-sms-checkbox",holder:".c-phone-verification__recaptcha",recaptchaInside:!1},holder:".c-phone-verification__sms-check",hiddenClass:"u-hidden",timeInSeconds:59,checkCodeEvent:"input",codeFailedMsg:"Неверно указан код",sendCodeUrl:"",checkCodeUrl:"",needOverlay:!0,bootImmediatelyConfig:null,disabledClass:"disabled",errMsg:"Сервис временно не доступен"},$.extend(!0,this.config,e||{}),shop.observer(this),this.$={},this.$.holder=$(this.config.holder,t),this.loadObjects(this.$.holder),this.config.recaptcha.recaptchaInside?(this.$.recaptchaHolder=$(this.config.recaptcha.holder,t),this.$.recaptchaCheckbox=$('[data-recaptcha-checkbox="true"]',this.$.recaptchaHolder)):(this.$.recaptchaCheckbox=$(this.config.recaptcha.checkbox),this.$.recaptchaHolder=this.$.recaptchaCheckbox.parents(this.config.recaptcha.holder)),this.initialize()},initialize:function(){this.timer=new shop.Class.Timer({selectors:{timer:this.config.selectors.timer},template:"#s#",seconds:this.config.timeInSeconds}),this.config.needOverlay&&(this.overlay=new shop.Class.Overlay(this.$.holder,!0)),this.validator=this.$.input.validate(),this.bindEvents()},bindEvents:function(){var t=this;this.$.resendLink.on("click",function(e){e.preventDefault(),t.sendCodeToUser()}),this.$.checkCodeTrigger.on(this.config.checkCodeEvent,function(e){e.preventDefault(),t.checkUserCode()}),this.$.recaptchaCheckbox.on("change",function(){t.$.recaptchaCheckbox.prop("checked")?(t.$.resendLink.removeClass("u-disabled"),"limit-exceeded"!==t.state&&(t.enableInput(),t.clearError())):(t.$.resendLink.addClass("u-disabled"),t.disableInput())})},initState:function(){this.config.bootImmediatelyConfig&&this.setEntryCodeState(this.config.bootImmediatelyConfig)},sendCodeToUser:function(){var t=this,e=this.getRequestData();return!!t.checkValid()&&($.ajax({url:this.config.sendCodeUrl,type:"post",data:e,dataType:"json",success:t.setEntryCodeState.bind(t),beforeSend:function(){t.showOverlay(),t.clearError(),t.publish("confirmation-code-send-before")},complete:function(){t.hideOverlay()},error:t.serviceError.bind(t)}),!0)},serviceError:function(){this.publish("update-state",{states:"show-notification",notification:{type:"error",text:this.config.errMsg}})},showOverlay:function(){this.config.needOverlay&&this.overlay.show()},hideOverlay:function(){this.config.needOverlay&&this.overlay.hide()},checkUserCode:function(){var t=this,e=$.extend(!0,this.getRequestData(),{code:this.$.input.val()});t.checkValid(!0)&&$.ajax({url:this.config.checkCodeUrl,type:"post",data:e,dataType:"json",beforeSend:function(){t.beforeCheckCode(),t.publish("confirmation-code-check-before")},success:function(e){"update-state"!==e.state?(t.state=e.state,e.success?t.publish("confirmation-code-check-success",e):(t.onCodeCheckFailed(e),t.publish("confirmation-code-check-error",e)),t.toggleRecaptchaBlock(e),t.publish("confirmation-code-check-complete",!t.hasRecaptcha)):t.publish("update-state",e)},error:function(e){t.serviceError(),t.onCodeCheckFailed(e),t.publish("confirmation-code-check-request-error",e)},complete:function(){t.hideOverlay()}})},beforeCheckCode:function(){this.showOverlay(),this.disableInput(),this.validator.resetField(this.$.input)},onCodeCheckFailed:function(t){this.clearCodeInput(),"code-blocked"===t.state?this.disableInput():"limit-exceeded"===t.state||t.showRecaptcha?this.setError(t.error):(this.enableInput(),this.setError(t.error)),this.$.input.parent().removeClass("success").addClass("error"),0!==t.delay&&(this.$.resendLink.addClass(this.config.hiddenClass),this.$.timerHolder.removeClass(this.config.hiddenClass),this.startTimer(t.delay))},clearCodeInput:function(){this.$.input.val("")},startTimer:function(t){var e=this;this.timer.reset(t),0!==t?this.timer.start(function(){e.setEntryCodeAgainState()}):e.setEntryCodeAgainState()},enableInput:function(){this.$.input.removeClass(this.config.disabledClass).attr("readonly",!1).attr("disabled",!1).focus()},disableInput:function(){this.$.input.attr("readonly",!0).attr("disabled",!0).addClass(this.config.disabledClass)},clearError:function(){this.$.error.css({display:"none"}).text("")},setError:function(t){this.$.error.css({display:"block"}).text(t||this.config.codeFailedMsg)},setEntryCodeState:function(t){if("update-state"===t.state)return this.publish("update-state",t),void this.toggleRecaptchaBlock(t);this.state=t.state,this.publish("confirmation-code-received",t),t.success?(this.$.input.val(""),0!==t.delay&&(this.$.resendLink.addClass(this.config.hiddenClass),this.$.timerHolder.removeClass(this.config.hiddenClass)),this.startTimer(t.delay),this.enableInput()):(this.disableInput(),this.onCodeCheckFailed(t)),this.toggleRecaptchaBlock(t),0===t.delay&&this.setEntryCodeAgainState(),this.publish("confirmation-code-send-complete",!this.hasRecaptcha)},toogleTimer:function(t){if(t)return this.$.resendLink.removeClass(this.config.hiddenClass),void this.$.timerHolder.addClass(this.config.hiddenClass);this.$.resendLink.addClass(this.config.hiddenClass),this.$.timerHolder.removeClass(this.config.hiddenClass)},setEntryCodeAgainState:function(){this.toogleTimer(!0),this.publish("confirmation-timer-expired")},checkValid:function(t){var e=!0;return t&&(e=this.$.input.valid()),this.$.recaptchaCheckbox.is(":visible")&&(e=this.$.recaptchaCheckbox.valid()&&e),e},toggleRecaptchaBlock:function(t){this.hasRecaptcha=t.showRecaptcha,t.showRecaptcha?(this.$.recaptchaCheckbox.trigger("reinit-recaptcha"),this.$.recaptchaHolder.removeClass(this.config.hiddenClass),this.$.resendLink.addClass("u-disabled"),this.disableInput()):"code-blocked"===t.state?(this.$.recaptchaHolder.addClass(this.config.hiddenClass),this.$.resendLink.removeClass(this.config.hiddenClass).addClass("u-disabled"),this.$.timerHolder.addClass(this.config.hiddenClass)):"limit-exceeded"!==t.state&&(this.$.recaptchaHolder.addClass(this.config.hiddenClass),this.$.resendLink.removeClass("u-disabled"),"success"!==t.status&&this.enableInput())},getRequestData:function(){var t=window.shop.helpers.inputs.getData(this.$.recaptchaHolder),e=this.config.getRequestData();return $.extend(!0,e,t)},cancelConfirmation:function(){this.$.recaptchaHolder.addClass(this.config.hiddenClass)}}).define("CodeConfirmation")}(),shop.Class.Class.extend({constructor:function(t,e){this.config={hasScrollClass:"has-scroll",selectors:{scrolledArea:".js-scrolled-area"},onDestroy:null},this.$={},$.extend(!0,this.config,e||{}),this.$.holder=$(t),this.loadObjects(this.$.holder,this.config.selectors),this.initCustomScroll()},initCustomScroll:function(){Modernizr.cssscrollbar?(this.recalcHasScroll(),this._type=0):(this.$.holder.customScrollArea({scrollInertia:0}),this._type=1)},recalcHasScroll:function(){Modernizr.cssscrollbar&&(this.$.holder.removeClass(this.config.hasScrollClass),this.$.holder.height()<this.$.scrolledArea.outerHeight()&&this.$.holder.addClass(this.config.hasScrollClass))},update:function(){1===this._type?this.$.holder.customScrollArea("update"):this.recalcHasScroll()}}).define("CustomScroll"),function(){"use strict";function t(t,e,i){if(void 0===o.facets[t])o.facets[t]=[e];else{var n=o.facets[t].indexOf(e);n<0?o.facets[t].push(e):i&&(o.facets[t].splice(n,1),o.facets[t].length<1&&delete o.facets[t])}}function e(){void 0!==o.others[c]&&(o.others[c]="0")}function i(t){void 0!==o.facets[t]&&delete o.facets[t]}function n(t){o.sort=t}var o={base:null,facets:{},sort:null,others:{}},s=null,r=600,a=null,c="offset";shop.Class.Class.extend({constructor:function t(e,i){if(t.instance)return void 0!==e&&e.length>0&&t.instance.buildNavigationState(e),t.instance;t.instance=this,void 0!==i&&(r=i),(a=new shop.Class.AsyncDataLoader).config.showOverlay=!1,this.buildNavigationState(e)},toggleFacet:function(i,n){"string"==typeof n&&(t(i,n,!0),e())},setFacetValue:function(i,n,s){"string"==typeof n&&(s?t(i,n):function(t,e){if(void 0!==o.facets[t]){var i=o.facets[t].indexOf(e);i>=0&&(o.facets[t].splice(i,1),o.facets[t].length||delete o.facets[t])}}(i,n),e())},clearFacet:function(t){i(t),e()},changeSort:function(t){n(t),e()},changePrice:function(t,n){i("price"),this.toggleFacet("price",t+"-"+n),e()},getCurrentPrice:function(){return Array.isArray(o.facets.price)?o.facets.price[0].split("-"):null},invoke:function(t){null!==s&&clearTimeout(s);var e=this.buildQueryString();s=setTimeout(function(){s=null,a.load({url:e},t)},r)},invokeImmediatelly:function(t){null!==a.dfd&&void 0!==a.dfd&&a.dfd.abort(),a.load({url:this.buildQueryString()},t)},buildNavigationState:function(e){o={base:null,facets:{},sort:null,others:{}};var i=!1,s={},r=0;return(i=e.split("?")).length>1?(o.base=i[0],i[1].split("&").forEach(function(e){var i=e.split("=");if(i.length>1)if(0===i[0].indexOf("param_"))i[1]=decodeURIComponent(i[1]),r=i[0].slice(6),void 0!==s[r]?(t(i[1],s[r]),delete s[r]):s[r]=i[1];else if(0===i[0].indexOf("value_"))i[1]=decodeURIComponent(i[1]),r=i[0].slice(6),void 0!==s[r]?t(s[r],i[1]):s[r]=i[1];else switch(i[0]){case"params":break;case"sort_order":n(i[1]);break;default:o.others[i[0]]=i[1]}}),!0):(o.base=i[0],!0)},resetState:function(){o.facets={}},_getNavState:function(){return o},buildQueryString:function(){var t=0,e=Object.keys(o.facets).map(function(e){return o.facets[e].map(function(i){return"param_"+ ++t+"="+encodeURIComponent(e)+"&value_"+t+"="+encodeURIComponent(i)}).join("&")});return e=e.concat(Object.keys(o.others).map(function(t){return t+"="+o.others[t]})),null!==o.sort&&e.push("sort_order="+o.sort),o.base+(e.length>0?"?params="+t+"&"+e.join("&"):"")}}).define("DetectumSearchInvoker")}(),function(){var t=shop.Class.Class.extend({constructor:function(t,e){this.config={autoInit:!1,initScripts:!0,method:"append",tpl:"",tplData:{}},$.extend(!0,this.config,e||{}),this.$={},this.$.holder=$(t),this.initialize()},initialize:function(){return this.config.autoInit&&this.insert(),this},show:function(){return this.$.el.show(),this},hide:function(){return this.$.el.hide(),this},isVisible:function(){return this.$.el.is(":visible")},remove:function(){return this.$.el.remove(),this},detach:function(){return this.$.el.detach(),this},render:function(t,e){return e=e||this.config.tpl,t=t||this.config.tplData,$(e(t))},insert:function(t){return this.$.el?this.$.el:(this.$.el=this.render(),t=t||this.config.method,this.$.holder[t](this.$.el),this.config.initScripts&&this._initScripts(this.$.el),this.$.el)},_initScripts:function(t){return t=t||this.$.el,shop.initScripts(t),this}});t.define("DynamicElement",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e,i){this.config={method:e||"append",tag:"span",text:{}},this.$={},this.$.holder=$(t),$.extend(!0,this.config,i||{}),this.initialize()},initialize:function(){this.$.el=function(t,e){return $("<"+t+">",e)}(this.config.tag,this.config.attributes),this.$.holder[this.config.method](this.$.el)},changeText:function(t){return t=this.config.text[t]||t,this.$.el.html(t),this},watchFor:function(t,e){this.$.el.on(t,e)},stopWatchFor:function(t,e){this.$.el.off(t,e)}});t.include(shop.Mixin.dynamicElement),t.define("DynamicTextElement",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={selectors:{items:">li"},states:["collapsed","expanded"],showQty:5,linkConfig:{text:{show:'+ <span class="expandable-list-text">Развернуть</span>',hide:'- <span class="expandable-list-text">Свернуть</span>'},tag:"a",attributes:{href:"#",class:"expandable-list-link pull-right"}},lastItemWithMargin:!0,beforeExpand:null,beforeCollapse:null},this.$={},this.$.holder=$(t),$.extend(!0,this.config,e||{}),this.loadObjects(this.$.holder),this.initialize(),this.bindEvents()},initialize:function(){this.link=new shop.Class.DynamicTextElement(this.$.holder,"after",this.config.linkConfig),this.link.$.el.before("\x3c!--noindex--\x3e").after("\x3c!--/noindex--\x3e"),this.beforeCollapse=this.config.beforeCollapse,this.beforeExpand=this.config.beforeExpand,this.reinit()},reinit:function(){if(this.hasExtraItems()){this.$.holder.removeClass("transition"),$.data(this.$.holder[0],"collapsed-height",this.getCollapsedHeight()),$.data(this.$.holder[0],"expanded-height",this.getExpandedHeight()),this.collapse();var t=this;setTimeout(function(){t.$.holder.addClass("transition")},0)}else this.link.detach();return this},collapse:function(){this.beforeCollapse&&this.beforeCollapse();var t=$.data(this.$.holder[0],"collapsed-height");this.$.holder.height(t),this.setState("collapsed"),this.link.changeText("show")},expand:function(){this.beforeExpand&&this.beforeExpand();var t=$.data(this.$.holder[0],"expanded-height");this.$.holder.height(t),this.setState("expanded"),this.link.changeText("hide")},getCollapsedHeight:function(){var t=this.$.items.eq(this.config.showQty-1);return t.position().top-t.parent().position().top+t.outerHeight(this.config.lastItemWithMargin)},getExpandedHeight:function(){var t,e=this.$.holder.height();return this.$.holder.height("auto"),t=this.$.holder.height(),this.$.holder.height(e),t},hasExtraItems:function(){return this.$.items.length>this.config.showQty},bindEvents:function(){var t=this;this.link.watchFor("click",function(e){e.preventDefault(),t.isState("expanded")?t.collapse():t.expand()})}});t.include(shop.Mixin.state),t.define("ExpandableList",t)}(),function(){"use strict";shop.Class.Class.extend({constructor:function(t,e){this.config=$.extend(!0,{inputFocus:null,blockElement:null,activeClass:"active"},e),this.$={holder:$(t)}},initialize:function(){var t=this.changeState.bind(this,!1);this.checkSelfAndRemove=this.checkSelf.bind(this,t),this.addState=this.changeState.bind(this,!0),this.bindEvents()},dispose:function(){this.unbindEvents()},bindEvents:function(){this.$.holder.on("focus",this.config.inputFocus,this.addState),$(document.body).on("click",this.checkSelfAndRemove)},checkSelf:function(t,e){$(e.target).parents(this.config.blockElement).length<1&&t()},changeState:function(t){this.$.holder[t?"addClass":"removeClass"](this.config.activeClass)},unbindEvents:function(){this.$.holder.off("focus",this.addState),$(document.body).off("click",this.checkSelfAndRemove)}}).define("FocusBlurState")}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={selectors:{items:":input"}},this.$={},this.$.holder=$(t),$.extend(!0,this.config,e||{}),this.loadObjects(this.$.holder),this.initialize()},initialize:function(){this.elements=this.getElementsCollection()},getElementsCollection:function(t){t=t||this.$.items;var e=new shop.Class.ModulesCollection,i=new shop.Class.InputFactory;return t.each(function(){var t=i.create(this);t&&e.add(t)}),e},reset:function(){this.elements.run("reset")},watchFor:function(t,e){this.$.holder.on(t,this.config.selectors.items,e)},stopWatchFor:function(t,e){this.$.holder.off(t,this.config.selectors.items,e)}});t.define("Form",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t,e){this.config={initValue:"init-value",oldValue:"old-value",errorClass:"error",successClass:"success"},this.$={},this.$.el=$(t),this.el=this.$.el[0],$.extend(!0,this.config,e||{}),this.initialize()},initialize:function(){return this.$.inputHolder=this.$.el.closest(".input"),this.storeInitValue(),this.storeValue(),this},clear:function(){console.error(this,"Should be implemented in the child class","clear")},getValue:function(){console.error(this,"Should be implemented in the child class","getValue")},setValue:function(){console.error(this,"Should be implemented in the child class","setValue")},storeValue:function(t,e){return t=t||this.getValue(),e=e||this.config.oldValue,$.data(this.el,e,t),this},storeInitValue:function(t){return this.storeValue(t,this.config.initValue),this},getStoredValue:function(t){return t=t||this.config.oldValue,$.data(this.el,t)},wasChanged:function(){var t=this.getValue()!==this.getStoredValue();return t?(this.handleValueChange(),t):t},handleValueChange:function(){return this.storeValue(),this},focus:function(){return this.el.focus(),this},markAsError:function(){this.$.inputHolder.addClass(this.config.errorClass),this.$.inputHolder.removeClass(this.config.successClass)},markAsSuccess:function(){this.$.inputHolder.addClass(this.config.successClass),this.$.inputHolder.removeClass(this.config.errorClass)},markAsDefault:function(){this.$.inputHolder.removeClass(this.config.successClass),this.$.inputHolder.removeClass(this.config.errorClass)},getAttribute:function(t){return this.$.el.attr(t)},setAttribute:function(t,e){return this.$.el.attr(t,e)},getType:function(){return this.getAttribute("type")},reset:function(t){t=t||this.config.initValue;var e=this.getStoredValue(t);this.setValue(e)},submitForm:function(){return this.$.el.closest("form").submit(),this}});t.define("Input",t)}(),function(){"use strict";var t=shop.Class.Input.extend({constructor:function(t,e){this.config={initValue:"init-value",oldValue:"old-value"},this.$={},this.$.el=$(t),this.el=this.$.el[0],$.extend(!0,this.config,e||{}),this.initialize()},isChecked:function(){return this.el.checked},check:function(){return this.$.el.attr("checked","checked")},unCheck:function(){return this.$.el.removeAttr("checked")},changeState:function(){return this.isChecked()?this.unCheck():this.check()},setValue:function(t){return t?this.check():this.unCheck()},getValue:function(){return this.isChecked()},clear:function(){this.unCheck()}});t.define("InputCheckbox",t)}(),function(){"use strict";var t=shop.Class.Class.extend({constructor:function(t){this.config={oldValue:"old-value"},$.extend(!0,this.config,t||{})},create:function(t,e){var i,n=$(t),o=n.attr("type");switch(o){case"checkbox":i=new shop.Class.InputCheckbox(n,e);break;case"radio":i=new shop.Class.InputRadio(n,e);break;case"text":i=new shop.Class.InputText(n,e);break;default:console.warn("Unknown input type "+o)}return i}});t.define("InputFactory",t)}(),function(){"use strict";var t=shop.Class.InputCheckbox.extend({constructor:function(t,e){this.config={initValue:"init-value",oldValue:"old-value"},this.$={},this.$.el=$(t),this.el=this.$.el[0],$.extend(!0,this.config,e||{}),this.initialize()}});t.define("InputRadio",t)}(),function(){"use strict";var t=shop.Class.Input.extend({constructor:function(t,e){shop.Class.Input.apply(this,arguments)},isEmpty:function(){return 0===this.getValue().length},getValue:function(){return this.$.el.val()},setValue:function(t){return this.$.el.val(t)},clear:function(){return this.$.el.val("")}});t.define("InputText",t)}(),$("body").on("mousedown mouseup click",".ajax-overlay",function(t){return t.stopImmediatePropagation(),!1}),new shop.Class.CustomSelect("select"),$(document).on("focus",".input input:not(.disabled)",function(){$(this).closest(".input").addClass("focus")}).on("blur",".input input:not(.disabled), .c-text-field input",function(){$(this).closest(".input").removeClass("focus")}).on("focus","textarea:not(.disabled):not(.c-textarea__textarea)",function(){$(this).addClass("focus")}).on("blur","textarea:not(.disabled):not(.c-textarea__textarea)",function(){$(this).removeClass("focus")}),$.datepicker._checkOffset=function(t,e,i){var n=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?n-s:0,e.left-=i&&e.left===t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+r?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+n>a&&a>n?Math.abs(e.left+n-a):0),e.top-=Math.min(e.top,e.top+o>c&&c>o?Math.abs(o+r)+10:-10),e},$.datepicker._updateDatepicker_original=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(t){$.datepicker._updateDatepicker_original(t);var e=this._get(t,"afterShow");e&&e.apply(t.input?t.input[0]:null)},$(".no-functionality, .no-functionality *").click(function(t){return t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),!1}),$(function(){var t=$(".disabled-area").children().addBack();t.off(),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,i){t.on(i,function(t){return t.stopPropagation(),t.preventDefault(),!1})})}),shop.Module.define("focus-block",function(t,e){var i="true"===t||void 0===t?this:t,n=new shop.Class.SmartFocus;setTimeout(function(){n.focusBlock(i,e)},0)}),shop.Module.define("focus-next",function(t){t=$.extend(!0,{insideForm:!1},t),$(this).on("keypress","input,select",function(e){if(13==e.which){e.preventDefault();var i=t.insideForm?$(this).closest("form"):$("body"),n=$(":tabbable",i).not("[disabled], [hidden], [readonly], a, :button, :submit"),o=$(this);if(o.data("next-click"))return $(o.data("next-click"),i).trigger("click");var s=n.index(this)+1;if(s>=n.length)return void $(this).blur();n.eq(s).focus()}})}),shop.Module.define("forbid-input-symbols",function(t){var e=(t=$.extend({input:"",symbols:"[\\s]"},t)).input?$(t.input):$(this),i=new RegExp(t.symbols,"g"),n=shop.device.manager.isItMobile("Android");e.on("input",function(){var t=e.val(),o=t.replace(i,""),s=t.length-o.length,r=e.caret()&&e.caret().end-s;0!=s&&(e.val(o),e.caret()&&e.caret().end>r&&(n?setTimeout(function(){e.caret(r)},0):e.caret(r)))})}),shop.Module.define("masked-input",function(t,e,i,n){var o,s=e||"999-9999999",r=t?$(t):$(this),a=r.val(),c=(a=!e&&a?a:s).indexOf(" ");o="+"===a[0]&&-1!=c?a.substr(0,c)+a.substr(c).replace(/(\d)|(\_)/g,"9"):a.replace(/(\d)|(\_)/g,"9"),r.mask(o,{placeholder:null!=n?n:"_",autoclear:!1,withoutSelectForFilling:!!i}),r.trigger("mask-applied")}),shop.Module.define("page",function(t){function e(t){s.isAvailable()&&(t?(o.updateHeight(o.getHeight()),o.show(r)):n.show(r),i.goToBlock(r.$.holder))}var i=new shop.Class.Page(".page-content"),n=i.sidebar,o=i.topbar,s=i.message,r=s.bar;return{page:i,desktopBehavior:function(){s.switchTo("desktop"),n.jump(),e(!0)},tabletBehavior:function(){s.switchTo("tablet"),o.jump(),e()},mobileBehavior:function(){s.switchTo("tablet"),o.jump(),e()}}}),shop.Module.define("checkout-controller",function(t){new shop.Class.CheckoutController(Object.assign({holder:this},t||{}))}),shop.Module.define("delivery-date",function(t){function e(t){var e=null,r=o.val();i()?(e=n())&&s.changeAddress(e,r):t&&s.changeAddress(e,r)}function i(){var e,i,n=!1;return"all"===t.fullAddressRegions?n=!0:(i=(e=o.data("info"))&&e.regionId,Array.isArray(t.fullAddressRegions)&&t.fullAddressRegions.length&&i&&(n=-1!=t.fullAddressRegions.indexOf(i)),n)}function n(){for(var e,i="",n=0;n<l.length;n++){var s=l.eq(n);if(!d.check(s))return!1;switch(s.data(t.addressPartAttr)){case"full":i+=o.data("info").city;break;case"city":i+=((e=s.data("info"))&&e.text||s.prev("input").val())+", ";break;case"street":i+=s.val()+", ";break;case"house":i+=s.val()}}return i}t=$.extend(!0,{element:"#frm-city",currentCity:"#frm-city-id",elementDate:"#delivery-date",elementTime:"#delivery-time",elementAddressBook:".o-delivery-address-book",showPrice:!0,restApi:{getTimes:""},addressPartAttr:"address-part",fullAddressRegions:["1"],isWholeAddress:!0},t);var o=$(t.currentCity),s=new shop.Class.CheckoutLeadTime({restApi:t.restApi}),r=new shop.Class.CheckoutDeliveryDate({elementDate:t.elementDate}),a=new shop.Class.CheckoutDeliveryTimeSlot({elementTime:t.elementTime,showPrice:t.showPrice}),c=$(t.elementAddressBook),l=$("[data-"+t.addressPartAttr+"]"),h=o.val(),d=l.validate();shop.Event.subscribe("update.Checkout.LeadTime",function(t,e){r.setDate(e.timeSlot)}),shop.Event.subscribe("update.Checkout.TimeSlot",function(t,e){a.setTimeSlot(e)}),shop.Event.subscribe("loading.Checkout.LeadTime",function(t,e){r.loading(),a.loading()}),r.setDate(t.timeSlot);var u=c.find("input:checked");u.length&&(u.is("[data-new-address]")?s.currentIdCity=o.val():(s.currentIdCity=u.data("city-id"),s.currentAddress=u.data("address"))),c.on("change","input:checked",function(t){var i,n=$(this),r=o.val();n.is("[data-new-address]")?e(!0):(i=n.data("address"),r=n.data("city-id"),s.changeAddress(i,r))}),t.isWholeAddress&&o.change(function(t){t.currentTarget.value!==h&&(e(!0),h=t.currentTarget.value)}),l.change(function(i){e("city"===$(i.currentTarget).data(t.addressPartAttr))})}),window.shop.Module.define("relative-affix",function(t){var e=$(this),i=t&&t.eventTarget?$(t.eventTarget):$(window),n=t&&t.relative?$(t.relative):e.parent(),o={ABSOLUTE_TOP:"affix-absolute-top",ABSOLUTE_BOTTOM:"affix-absolute-bottom",FIXED_TOP:"affix-fixed-top",FIXED_BOTTOM:"affix-fixed-bottom",CENTER:"affix-center"},s=[o.ABSOLUTE_TOP,o.ABSOLUTE_BOTTOM,o.FIXED_TOP,o.FIXED_BOTTOM,o.CENTER].join(" "),r=i.scrollTop(),a=o.ABSOLUTE_TOP,c=["scroll","resize","orientationchange",""].join(".relative-affix-"+e.uniqueId().attr("id")+" "),l=function(t){e.addClass("relative-affix");var c,l=$(".sticky-header:visible").outerHeight(),h=i.scrollTop(),d=i.height(),u=n.offset().top,f=n.outerHeight(),p=u+f,g=e.offset().top,m=e.outerHeight(),v=g+m;if(f<=m)return e.css({position:"static"}),void e.removeClass("relative-affix");r<h||!t||"scroll"!=t.type?p<(c=h+d-12)&&p<h+m+12+l?a=o.ABSOLUTE_BOTTOM:h>=0&&h<u?a=o.ABSOLUTE_TOP:m>d-l?v<c?a=o.FIXED_BOTTOM:v!=c&&p!=c&&(a=o.CENTER):g<h+l+12&&(a=o.FIXED_TOP):r>h&&(u-l>(c=h+12)?a=o.ABSOLUTE_TOP:g-l>c?a=o.FIXED_TOP:g-l!=c&&u-l!=c&&(a=o.CENTER)),r=h,a==o.CENTER?e.css({position:"absolute",top:g-e.parent().offset().top,bottom:""}):a==o.ABSOLUTE_TOP?e.css({position:"absolute",top:u-e.parent().offset().top,bottom:""}):a==o.ABSOLUTE_BOTTOM?e.css({position:"absolute",top:"",bottom:e.parent().offset().top+e.parent().height()-p}):a==o.FIXED_TOP?h>u&&e.css({position:"fixed",top:12+l,bottom:""}):a==o.FIXED_BOTTOM&&e.css({position:"fixed",top:"",bottom:12}),a==o.CENTER||e.hasClass(a)||(e.removeClass(s),e.addClass(a))};return e.data("relative-affix-instance",{eventsHandler:l}),{desktopBehavior:function(){l(),i.off(c).on(c,l)},tabletBehavior:function(){i.off(c),e.css({position:"",top:"",bottom:""})},mobileBehavior:function(){i.off(c),e.css({position:"",top:"",bottom:""})}}}),shop.Module.define("sg-tooltip",function(t){var e=$(this),i={contentAsHTML:!0,sel:{}};$.extend(!0,i,t||{}),i.closeOnScroll&&(i.trigger&&"hover"!=i.trigger?(i.triggerOpen={click:!0,tap:!0},i.triggerClose={click:!0,tap:!0,scroll:!0}):(i.triggerOpen={mouseenter:!0,touchstart:!0},i.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0,scroll:!0}),i.trigger="custom"),new shop.Class.Tooltip(e,i)}),shop.Module.define("sg-validation-handler",function(t){var e=$.extend({ignoreSelectors:".ignore, .dont-validate, :hidden",errorTextClass:"u-error-text",errorFieldClass:"u-error",validFieldClass:"u-valid",notSubmit:!1,requireValidateAfterSubmit:!1,needShowErrorEvents:!1,dontShowError:!1,isErrorFieldParent:!1},t||{}),i=$(e.holder||this),n=new shop.Class.Overlay,o={ignore:e.ignoreSelectors,errorClass:e.errorTextClass,highlight:function(t){(e.isErrorFieldParent?$(t).parent():$(t)).addClass(e.errorFieldClass).removeClass(e.validFieldClass)},unhighlight:function(t){(e.isErrorFieldParent?$(t).parent():$(t)).addClass(e.validFieldClass).removeClass(e.errorFieldClass)},submitHandler:function(){return i.data("loader-select")&&n.show($(i.data("loader-select"))),shop.Event.publish("formValid",i.attr("id")),i.trigger("formValid"),e.notSubmit?(e.needClosePopup&&$(".c-popup__block").find("[data-close]").trigger("click"),!1):(i[0].submit(),!1)},invalidHandler:function(t,e){shop.Event.publish("formInvalid",i.attr("id"))}},s=function(t,i){if("select"!==t.nodeName.toLowerCase()){var n,o=$(t);if("masked-input"===o.data("init")&&o.val()===o.attr("placeholder")&&o.val(""),(n=o.val())==o.data("prevVal")||!n&&!o.data("prevVal"))return!1;if(o.data("prevVal",n),!o.val().length)return o.removeClass(e.errorFieldClass).removeClass(e.validFieldClass).removeData("previousValue").parent().find("."+e.errorTextClass).empty().hide(),!1;this.element(t)}};e.dontShowError&&(o=$.extend(o,{errorPlacement:$.noop})),e.requireValidateAfterSubmit&&(o=$.extend(o,{onchange:function(t,i){if("select"===t.nodeName.toLowerCase()){var n=$(t),o=n.hasClass(e.errorFieldClass);if(0===n.val().length&&!o)return!1;this.element(t)}},onfocusout:s})),e.needShowErrorEvents&&(o=$.extend(o,{showErrors:function(t,i){if(i.length>1)this.defaultShowErrors(),i.forEach(function(t){var i=$(t.element),n=i.attr("id"),o=n?'[for="'+n+'"]':"";i.siblings("."+e.errorTextClass+o).trigger("show.error")});else if(1===i.length){var n=$(i[0].element),o=n.attr("id"),s=o?'[for="'+o+'"]':"",r=n.hasClass(e.errorFieldClass),a=n.siblings("."+e.errorTextClass+s),c=a.text();this.defaultShowErrors(),a=n.siblings("."+e.errorTextClass+s),(!r||r&&c!=a.text())&&a.trigger("show.error")}else this.defaultShowErrors()}})),i.attr("id")||i.uniqueId(),shop.instance.page.page.validationForms[i.attr("id")]=i.validate(o),i.data("apply.validation",!0),i.trigger("apply.validation"),i.find(":input").on("input",function(){$(this).hasClass(e.errorFieldClass)&&s.call(shop.instance.page.page.validationForms[i.attr("id")],this)})}),function(){var t={};shop.Module.define("popup",function(e){var i=$(this);if(e.once){if(t[e.namespace])return!1;t[e.namespace]=!0}return e.classes=[],e.large&&e.classes.push("large"),e.withButton&&e.classes.push("with-button"),e.withTitle&&e.classes.push("with-title"),e.fullScreen&&e.classes.push("full-screen"),e.additionalClasses&&(Array.isArray(e.additionalClasses)?$.map(e.additionalClasses,function(t){e.classes.push(t)}):e.classes.push(e.additionalClasses)),e.withArrow&&(e.template=shop.template.popup({affix:!0,selector:".c-popup.c-popup_with-arrow"}),e.classes.push("with-arrow")),e=$.extend(!0,{contentAsHTML:!0},e||{}),{popup:new shop.Class.Popup(i,e)}})}(),function(){$(".tooltipstered").removeClass("tooltipstered");var t=shop.Module.init("page");shop.Module.deviceController(t),shop.instance.page=t,shop.initScripts(),shop.removeDisabledJSClass(),shop.device.manager.changeState()}();