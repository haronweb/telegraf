(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9199],{22754:function(){},6739:function(){},72993:function(){},51371:function(){},96127:function(){},30578:function(){},199:function(){},17729:function(e,t,a){"use strict";a.d(t,{BX:function(){return f},_U:function(){return c},gD:function(){return p},hr:function(){return u},rf:function(){return v}});var r=a(60582),n=a(93085),i=a(530),o=a(30519),d=a(50619);let{getRequest:s,postRequest:l}=(0,r.F)(n.Z),u=async e=>{let t={"X-Access-Token":(0,d.ej)(o.e.jwtToken),"x-accept-version":3};return await s(i.Z.chatThreads,e,{headers:t})},c=async e=>{let t={"X-Access-Token":(0,d.ej)(o.e.jwtToken),"X-Accept-Version":5};return await s(i.Z.chatMessages,e,{headers:t})},f=async e=>{let t={"X-Access-Token":(0,d.ej)(o.e.jwtToken)};return await l(i.Z.chatThreads,e,{headers:t})},p=async()=>{let e={"X-Access-Token":(0,d.ej)(o.e.jwtToken)};return await s(i.Z.chatSafetyTips,void 0,{headers:e})},v=async e=>{let t={"X-Access-Token":(0,d.ej)(o.e.jwtToken)};return await l(i.Z.chatSafetyTips,e,{headers:t})}},34947:function(e,t,a){"use strict";a.d(t,{rV:function(){return s},yg:function(){return l},zJ:function(){return u}});var r=a(60582),n=a(93085),i=a(56505);let{getRequest:o,postRequest:d}=(0,r.F)(n.Z),s=async(e,t)=>await o(i.Z.item.details(e),t),l=async e=>await o(i.Z.itemsSearch,e),u=async e=>await d(i.Z.postReport,e)},24072:function(e,t,a){"use strict";let r;a.d(t,{a:function(){return h},b:function(){return m}});var n=a(32358),i=a(41231),o=a(76080),d=a(11477),s=a(48777),l=a(2656),u=a(93707),c=a(61156),f=a(30519),p=a(75468),v=a(18311),g=a(50619);let m=e=>{e.on("online",async()=>{try{await (0,l.rS)(),await e.send((0,n.Ls)("iq",{type:"set",id:(0,i.Z)()},(0,n.Ls)("enable",{xmlns:"urn:xmpp:carbons:2"}))),await e.send((0,n.Ls)("iq",{type:"get",id:(0,i.Z)()},(0,n.Ls)("blocklist",{xmlns:"urn:xmpp:blocking"}))),clearInterval(r),r=setInterval(async()=>{let t=(0,n.Ls)("iq",{type:"get",id:(0,i.Z)()},(0,n.Ls)("ping",{xmlns:"urn:xmpp:ping"}));if(e&&"online"===e.status)try{await e.send(t)}catch(e){console.error("Ping failed: ",e)}},c.Xy)}catch(e){console.log("Error sending iq from online listener")}}),e.on("offline",async()=>{try{await (0,u.vb)()}catch(e){console.log("Error try to connect from offline listener")}}),e.on("disconnect",async()=>{try{await (0,u.vb)()}catch(e){console.log("Error try to connect from offline listener")}}),e.on("close",async()=>{try{await (0,u.vb)()}catch(e){console.log("Error try to connect from close listener")}}),e.on("error",async t=>{"not-authorized"===t.message&&(await (0,s.bC)()?await e.start():console.log("Not exist or expired tokens"))}),e.on("stanza",async e=>{var t,a,r;if(e.is("message")&&"chat"===e.attrs.type){let r=(0,s.pj)(e.attrs.from),n=(0,s.pj)(e.attrs.to),i=(0,s.jQ)();if(!r||!n||!i)return;let o=v.h.getState().chat.threads;(0,d.nn)(r,n,o)&&await (0,d.F9)(r,n,o),n===i&&await (0,u.yv)(e,i);let l=e.getChild("item-state","urn:xmpp:type");if(l){let e=null==l?void 0:null===(t=l.attrs)||void 0===t?void 0:t.itemId,r=null==l?void 0:null===(a=l.attrs)||void 0===a?void 0:a.itemStatus;e&&r&&(Object.values(c.Yu).includes(r)?await (0,d.LA)(e,r):await (0,d.LA)(e,c.Yu.INACTIVE))}}else if(e.is("iq")&&"result"===e.attrs.type){let t=(null===(r=e.getChild("query","jabber:iq:jwt"))||void 0===r?void 0:r.getChildText("jwt"))||"";t&&(0,g.d8)(f.e.jwtToken,t);let a=e.getChild("blocklist","urn:xmpp:blocking");if(a){let e=v.h.getState().chat.blockedUsers;a.getChildren("item").forEach(t=>{let a=(0,s.pj)(t.attrs.jid);e.includes(a)||v.h.dispatch((0,p.h7)(a))})}}})},h=async()=>{try{if("pending"===v.h.getState().chat.initialStorageManagerStatus)return;v.h.dispatch((0,p.DX)("pending")),await (0,s.RA)(),o.db.isOpen()||await o.db.open(),await (0,s.CD)(),await (0,d.R_)()}catch(e){console.log("Failed to initializeChat: ",e),v.h.dispatch((0,p.nB)(!0))}}},76080:function(e,t,a){"use strict";a.d(t,{db:function(){return r}});let r=new(a(38477)).ZP("chat");r.version(1).stores({threads:"threadId, adId"})},11477:function(e,t,a){"use strict";a.d(t,{LA:function(){return V},nn:function(){return U},Ww:function(){return x},R_:function(){return Z},xv:function(){return j},GO:function(){return B},nP:function(){return J},Sn:function(){return A},UK:function(){return F},F9:function(){return P},T$:function(){return C},TE:function(){return D}});var r=a(41231),n=a(76080);let i=async e=>{try{await n.db.threads.clear(),await n.db.threads.bulkAdd(e)}catch(e){console.error("An error occurred while updating the database:",e)}};var o=a(48777),d=a(2656),s=a(61156),l=a(75468),u=a(18311),c=a(17729),f=a(34947),p=a(56183),v=a(79617);let g=e=>({data:e.data.filter(e=>{if(e.deleted)return!1;let t=0>=(0,v.sO)(null==e?void 0:e.expires_on);return![s.vk.REMOVED_BY_USER,s.vk.SOLD,s.vk.OUTDATED,s.vk.DISABLED].includes(e.ad_status)||!t})}),m=e=>e.filter(e=>"waiting"!==e.messageSendingStatus),h=e=>{if(e.deleted)return!1;let t=0>=(0,v.sO)(null==e?void 0:e.expires_on);return![s.vk.REMOVED_BY_USER,s.vk.SOLD,s.vk.OUTDATED,s.vk.DISABLED].includes(e.ad_status)||!t},y=async()=>{try{return await (0,c.hr)()}catch(e){throw console.log("Error fetchThreads: ",e),e}},I=async e=>{let t=new Set,a=new Set,r=new Set,n=(0,o.jQ)();e.data.forEach(e=>{let n={ad_id:Number(e.ad_id),peer_id:Number(e.peer_id),locale:"tr"};t.add(n),a.add(e.ad_id),r.add("deleted"===e.peer_status?void 0:e.peer_id)});try{let e=await Promise.all(Array.from(t).map(async e=>{let t={ad_id:e.ad_id.toString(),peer_id:e.peer_id.toString(),locale:e.locale},a=await (0,c._U)(t),r=a.data.filter(e=>e.status===s.Uq.SENT&&e.sender_id!==n);if(Array.isArray(r)&&r.length>0){let e=r.map(e=>(0,d.sv)(e.sender_id,e.ad_id,e.msg_id));u.h.dispatch((0,l.dk)(!0)),await Promise.all(e)}return{ad_id:e.ad_id,peer_id:e.peer_id,messages:a.data}})),i={force:"x",action:"tapOnCall",lang:"tr-TR"},o=await Promise.all(Array.from(a).map(e=>(0,f.rV)(e))),v=Array.from(r).filter(e=>void 0!==e),g=await Promise.all(Array.from(v).map(e=>(0,p.GA)(e,i)));return{messages:e,items:o,peerUsers:g}}catch(e){throw console.log("Error fetchDatasWithThreads: ",e),e}},b=e=>{switch(e.type){case s.C7.IMAGE:case s.C7.SYSTEM:case s.C7.CALL:return s.LL.NUMBER_VIEWED;case s.C7.SMS:case s.C7.INFO:case s.C7.TEXT_AUTO:case s.C7.TEXT:return s.LL.TEXT;case s.C7.LOCATION:return s.LL.LOCATION;case s.C7.ACTIONABLE:{let t=e.type_data;if(!t)return s.LL.TEXT;if(t.offer_id&&""!==t.offer_id.trim()){let e=t.offer_status;if(!e)return s.LL.TEXT;switch(e){case s.zL.PENDING:return s.LL.OFFER;case s.zL.COUNTER_OFFER:return s.LL.COUNTER_OFFER;case s.zL.ACCEPTED:return s.LL.ACCEPTED_OFFER;case s.zL.REJECTED:return s.LL.REJECTED_OFFER}}else if(t.lat&&""!==t.lat.trim()&&t.lon&&""!==t.lon.trim())return s.LL.LOCATION;return s.LL.TEXT}default:return s.LL.TEXT}},S=(e,t)=>{var a,n,i,o,d,l,u,c,f;let p=(0,r.Z)(),v=b(e),g={chatId:e.msg_id,adId:e.ad_id,senderId:e.sender_id,receiverId:e.receiver_id,buyerId:e.buyer_id,sellerId:e.seller_id,autoReply:e.auto_reply,deleted:e.deleted,time:new Date(parseInt(e.timestamp,10)),updatedAt:Number(new Date).toString(),displayStatus:e.status,message:e.text,messageType:v,offer:void 0,location:void 0,categoryId:e.category_id,actionableSuggestions:e.actionable_suggestions,tipTo:e.tip_to,leadInfo:e.lead_info,replied:e.replied,suggestions:e.suggestions,replyTo:e.reply_to,peerId:t};return(v===s.LL.OFFER||v===s.LL.ACCEPTED_OFFER||v===s.LL.COUNTER_OFFER||v===s.LL.REJECTED_OFFER)&&(g.offer={offerId:p,sellerOffer:null===(a=e.type_data)||void 0===a?void 0:a.seller_offer,subType:null===(n=e.type_data)||void 0===n?void 0:n.sub_type,buyerOffer:null===(i=e.type_data)||void 0===i?void 0:i.buyer_offer,offerStatus:null===(o=e.type_data)||void 0===o?void 0:o.offer_status,offerCategory:null===(d=e.type_data)||void 0===d?void 0:d.offer_category}),v===s.LL.LOCATION&&(g.location={lat:null!==(c=null===(l=e.type_data)||void 0===l?void 0:l.lat)&&void 0!==c?c:"",lon:null!==(f=null===(u=e.type_data)||void 0===u?void 0:u.lon)&&void 0!==f?f:""}),g},_=(e,t)=>{var a;return{peerId:t,messages:null==e?void 0:null===(a=e.messages)||void 0===a?void 0:a.slice().sort((e,t)=>parseInt(e.timestamp,10)-parseInt(t.timestamp,10))}},E=(e,t,a)=>{var r;let n=_(Array.isArray(e)?e.find(e=>e.ad_id.toString()===t&&e.peer_id.toString()===a):e,a);return(null==n?void 0:null===(r=n.messages)||void 0===r?void 0:r.reduce((e,t)=>{if(a){let r=S(t,a.toString());r&&e.push(r)}return e},[]))||[]},O=(e,t)=>e.find(e=>{var a,r;return(null===(r=e.data)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.id)===Number(t)}),T=(e,t)=>e.find(e=>{var a;return(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.id)===t}),w=(e,t,a,r)=>{var n,i,o,d;let l=E(t,e.ad_id,e.peer_id),u=T(r,e.peer_id),c=O(a,e.ad_id),f=(null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.meta_data)&&(null===(i=c.data.meta_data[Number(e.peer_id)])||void 0===i?void 0:i.is_phone_visible)&&(null==u?void 0:null===(o=u.data)||void 0===o?void 0:o.is_phone_visible)||!1;return{threadId:"".concat(e.peer_id,"_").concat(e.ad_id),adId:e.ad_id,peerId:e.peer_id,deleted:e.deleted,lastMsgTimestamp:e.last_msg_timestamp,expiresOn:e.expires_on,tag:e.tag,buyerOffer:e.buyer_offer,offerStatus:e.offer_status,offerCategory:e.offer_category,sellerOffer:e.seller_offer,offerId:e.offer_id,phoneViewed:f,peerStatus:e.peer_status,adStatus:e.ad_status,categoryId:e.category_id,messages:l,adDetail:null==c?void 0:null===(d=c.data)||void 0===d?void 0:d.data,peer:u||s.Vr,dealerType:e.dealer_type,updatedAt:e.updated_at}},L=async e=>{let{messages:t,items:a,peerUsers:r}=await I(e);return e.data.reduce((e,n)=>{let i=w(n,t,a,r);return i&&e.push(i),e},[])},C=async e=>{try{await n.db.transaction("rw",n.db.threads,async()=>{await n.db.threads.put(e)})}catch(e){}},A=e=>e.sort((e,t)=>Number(t.lastMsgTimestamp)-Number(e.lastMsgTimestamp)),D=async(e,t)=>{var a;let r=[...u.h.getState().chat.threads],n=u.h.getState().chat.selectedThread;if(null===(a=r.find(e=>e.threadId===t))||void 0===a?void 0:a.messages.some(t=>t.chatId===e.chatId))return;(null==n?void 0:n.isItNewThread)&&r.push(n.thread);let i=r.map(a=>{if(a.threadId===t){var r,i,o,d,s;return{...a,offerCategory:null===(r=e.offer)||void 0===r?void 0:r.offerCategory,offerStatus:null===(i=e.offer)||void 0===i?void 0:i.offerStatus,offerId:null===(o=e.offer)||void 0===o?void 0:o.offerId,buyerOffer:null===(d=e.offer)||void 0===d?void 0:d.buyerOffer,sellerOffer:null===(s=e.offer)||void 0===s?void 0:s.sellerOffer,messages:(null==n?void 0:n.isItNewThread)?[e]:[...a.messages,e],lastMsgTimestamp:Number(new Date).toString(),updatedAt:Number(new Date).toString()}}return a});if(n){if(n.isItNewThread){let e=i.find(e=>e.peerId===n.thread.peerId&&e.adId===n.thread.adId);e&&u.h.dispatch((0,l.JJ)({isSeller:!1,isItNewThread:!1,thread:e}))}else{let e=r.find(e=>e.threadId===n.thread.threadId);e&&u.h.dispatch((0,l.JJ)({...n,thread:e}))}}let o=A(i);u.h.dispatch((0,l.VH)(o));let d=o.find(e=>e.threadId===t);d&&await C(d)},k=async e=>{try{await n.db.transaction("rw",n.db.threads,async()=>{await n.db.threads.delete(e)})}catch(e){}},x=async e=>{let t=[...u.h.getState().chat.threads].filter(t=>t.threadId!==e);u.h.dispatch((0,l.VH)(t)),await k(e);let a=u.h.getState().chat.selectedThread;(null==a?void 0:a.thread.threadId)===e&&u.h.dispatch((0,l.JJ)(void 0))},N=async(e,t)=>{let a={ad_id:e.toString(),peer_id:t.toString(),locale:"tr"},r=await (0,c._U)(a);return{ad_id:Number(e),peer_id:Number(t),messages:r.data}},M=async e=>(await L(e))[0],R=async e=>{let t=await N(e.ad_id,e.peer_id),a=(0,o.jQ)(),r=t.messages.filter(e=>e.status===s.Uq.SENT&&e.sender_id!==a);if(Array.isArray(r)&&r.length>0){let e=r.map(e=>(0,d.sv)(e.sender_id,e.ad_id,e.msg_id));u.h.dispatch((0,l.dk)(!0)),await Promise.all(e)}return E(t,e.ad_id,e.peer_id)},F=async e=>{let t=Array.isArray(e)?e:[e],a=u.h.getState().chat.threads,r=u.h.getState().chat.selectedThread,n=a.map(e=>{if(t.some(t=>t.threadId===e.threadId)){let a=e.messages.map(a=>{let r=t.find(t=>t.messageId===a.chatId&&t.threadId===e.threadId);return r&&a.displayStatus!==r.status?{...a,displayStatus:r.status,updatedAt:Number(new Date).toString()}:a});return{...e,messages:a,updatedAt:Number(new Date).toString()}}return e}),i=A(n);if(u.h.dispatch((0,l.VH)(i)),r){let e=n.find(e=>e.threadId===r.thread.threadId);e&&u.h.dispatch((0,l.JJ)({...r,thread:e}))}try{t.forEach(async e=>{let t=i.find(t=>t.threadId===e.threadId);t&&await C(t)})}catch(e){console.error("Failed to batch update threads in DB:",e)}},U=(e,t,a)=>{let r=(0,o.jQ)();return a.some(a=>a.messages.some(a=>a.receiverId===e&&t===r&&"waiting"===a.messageSendingStatus))},P=async(e,t,a)=>{var r;let n=(0,o.jQ)(),i=a.map(a=>({...a,messages:a.messages.map(a=>a.receiverId===e&&t===n?{...a,messageSendingStatus:"sent",updatedAt:Number(new Date).toString()}:a)})),d=null===(r=a.find(a=>a.messages.map(a=>{if(a.receiverId===e&&t===n)return{...a,messageSendingStatus:"sent",updatedAt:Number(new Date).toString()}})))||void 0===r?void 0:r.threadId,s=A(i);u.h.dispatch((0,l.VH)(s));let c=u.h.getState().chat.selectedThread;if(c){let e=s.find(e=>e.threadId===c.thread.threadId);e&&u.h.dispatch((0,l.JJ)({...c,thread:e}))}try{let e=s.find(e=>e.threadId==="".concat(d));e&&await C(e)}catch(e){console.error("Failed to batch update threads in DB:",e)}},J=async(e,t,a,r)=>{let n=A(e.map(e=>e.adId===a&&e.peerId===t?{...e,tag:r}:e));u.h.dispatch((0,l.VH)(n));let i=n.find(e=>e.threadId==="".concat(t,"_").concat(a));i&&await C(i)},V=async(e,t)=>{let a=A(u.h.getState().chat.threads.map(a=>a.adId===e?{...a,adStatus:t,updatedAt:Number(new Date).toString(),expiresOn:(0,v.v$)().toString()}:a));u.h.dispatch((0,l.VH)(a));let r=a.find(t=>t.adId===e);r&&await C(r)},j=async(e,t,a)=>{var r;let n=await (0,f.rV)(t),i=await (0,p.GA)(e);return{...s.SW,threadId:"".concat(e,"_").concat(t),adId:t,peerId:e,messages:a||[],adDetail:null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.data,peer:i,adStatus:s.Yu.ACTIVE,lastMsgTimestamp:Number(new Date).toString()}},B=async(e,t,a,r)=>{if(e&&Array.isArray(e.messages)){let n=e.messages.filter(e=>e.displayStatus!==s.Uq.DISPLAYED);Array.isArray(n)&&n.length>0&&u.h.dispatch((0,l.dk)(!1));let i=n.filter(e=>e.senderId!==r);if(Array.isArray(i)&&i.length>0){let e=i.map(e=>({messageId:e.chatId,threadId:"".concat(t,"_").concat(a),status:"displayed"}));e.length>0&&(await Promise.all(i.map(e=>(0,d.Ui)(t,a,e.chatId))),await F(e))}}},Z=async()=>{if(await n.db.threads.count()>0){let e=await n.db.threads.toArray(),t=await y(),a=[],r=new Map(e.map(e=>[e.threadId,e]));for(let e of t.data){let t="".concat(e.peer_id,"_").concat(e.ad_id),n=r.get(t),i=!1;if(n){if(i=!0,e.updated_at>n.updatedAt){if(h(e)){let t=await R(e);a.push({...n,updatedAt:e.updated_at,messages:t,expiresOn:e.expires_on,lastMsgTimestamp:e.last_msg_timestamp,adStatus:e.ad_status,tag:e.tag,buyerOffer:e.buyer_offer,offerStatus:e.offer_status,offerCategory:e.offer_category,sellerOffer:e.seller_offer,offerId:e.offer_id,peerStatus:e.peer_status})}}else a.push({...n,updatedAt:e.updated_at,expiresOn:e.expires_on,lastMsgTimestamp:e.last_msg_timestamp,adStatus:e.ad_status,tag:e.tag,buyerOffer:e.buyer_offer,offerStatus:e.offer_status,offerCategory:e.offer_category,sellerOffer:e.seller_offer,offerId:e.offer_id,peerStatus:e.peer_status,messages:m(n.messages)})}if(!i&&h(e)){let t={data:[e]},r=await M(t);a.push(r)}}let o=A(a);u.h.dispatch((0,l.VH)(o)),await i(o),u.h.dispatch((0,l.DX)("resolved"))}else{let e=g(await y()),t=await L(e);await i(t),u.h.dispatch((0,l.DX)("resolved")),u.h.dispatch((0,l.VH)(t))}}},48777:function(e,t,a){"use strict";a.d(t,{CD:function(){return h},RA:function(){return y},bC:function(){return m},d4:function(){return p},jQ:function(){return f},pj:function(){return v}});var r=a(44367),n=a(2656),i=a(93707),o=a(55497),d=a(61156),s=a(30519),l=a(18311),u=a(50619),c=a(65387);let f=()=>{var e;return(null===(e=l.h.getState().session.user)||void 0===e?void 0:e.id)||((0,o.X)()?localStorage.getItem("userId"):null)},p=e=>{if((0,o.X)()){let t=e||localStorage.getItem("userId");return t?"".concat(t,"_").concat(d.J2.DOMAIN,"@").concat(d.J2.DOMAIN):""}return""},v=e=>{let t=e.indexOf("@");if(-1!==t){let a=e.substring(0,t),r=a.indexOf("_");return -1!==r?a.substring(0,r):a}return e},g=e=>{if(e){let t=JSON.parse(atob(e.split(".")[1])).exp,a=t?new Date(t*c.s9):null,r=new Date,n=300*c.s9;return null!==a&&a.getTime()-n<r.getTime()}return!1},m=async()=>!g((0,u.ej)(s.e.chatToken)),h=async()=>new Promise((e,t)=>{let a=0,r=async()=>{let i=(0,u.ej)(s.e.jwtToken);if(a++,!i&&a<d.gt)setTimeout(r,c.s9);else if(i&&g(i)&&a<d.gt)try{await (0,n.rS)(),setTimeout(r,c.s9)}catch(e){setTimeout(r,c.s9)}else(!i||g(i))&&a>=d.gt?t(Error("JWT token could not be found after maximum attempts.")):i&&!g(i)&&e()};r()}),y=async()=>new Promise((e,t)=>{let a=0,n=setInterval(async()=>{if(!r.EA){clearInterval(n),t(Error("XMPP client is not initialized."));return}if(++a>=d.gt){clearInterval(n),t(Error("Maximum connection attempts reached."));return}d.xk.includes(r.EA.status)?(clearInterval(n),e()):d.BD.includes(r.EA.status)&&await (0,i.vb)()},c.s9)})},44367:function(e,t,a){"use strict";a.d(t,{EA:function(){return g},I5:function(){return y},eg:function(){return h}});var r=a(32358),n=a(24072),i=a(76080),o=a(48777),d=a(55497),s=a(61156),l=a(30519),u=a(75468),c=a(18311),f=a(50619);let p=()=>({service:s.Ag,domain:s.J2.DOMAIN,username:(0,o.d4)(),password:(0,f.ej)(l.e.chatToken),resource:"".concat(s.YI,"-").concat(Number(new Date))}),v={domain:s.J2.DOMAIN,timeout:5e4},g=null,m=()=>{if(!g){let e=p();g=(0,r.Lp)(e),(0,n.b)(g)}return g},h=async()=>{if("connecting"!==c.h.getState().chat.connectionStatus||!g){if(c.h.dispatch((0,u.bl)("connecting")),!await (0,o.bC)()){console.log("Chat connection requirements not met.");return}g&&"offline"!==g.status&&"disconnect"!==g.status||(c.h.dispatch((0,u.cv)(g?"updated":"initialized")),g=m());try{switch(g.status){case"disconnect":await g.start();break;case"offline":await g.connect(s.Ag),await g.open(v);break;default:console.log("The connection is already active or waiting for an action.")}c.h.dispatch((0,u.bl)("connected"))}catch(e){console.log(e)}}},y=async()=>{(0,d.X)()&&(localStorage.removeItem("safetyTips"),localStorage.removeItem("userId")),(0,f.ej)(l.e.jwtToken)&&(0,f.kT)(l.e.jwtToken),c.h.dispatch((0,u.T2)()),i.db.isOpen()&&i.db.close(),await i.db.delete(),g&&(s.xk.includes(g.status)||s.w3.includes(g.status))&&(await g.close(),await g.stop(),g=null)}},2656:function(e,t,a){"use strict";a.d(t,{B1:function(){return E},Gj:function(){return I},Qx:function(){return b},Ui:function(){return m},Vv:function(){return y},WJ:function(){return S},bG:function(){return v},l8:function(){return _},rS:function(){return O},sv:function(){return g},y0:function(){return h}});var r=a(32358),n=a(41231),i=a(11477),o=a(44367),d=a(48777),s=a(61156),l=a(75468),u=a(18311),c=a(93707);let f=async e=>{var t,a;let{selectedThread:r,blockedUsers:n}=u.h.getState().chat,i=null==r?void 0:null===(a=r.thread)||void 0===a?void 0:null===(t=a.peer)||void 0===t?void 0:t.data.id;if(i&&n.includes(i)){u.h.dispatch((0,l.Au)(!0));return}try{await e()}catch(e){console.error("XMPP işlemi sırasında hata oluştu:",e)}},p=async e=>{if(!o.EA||"online"!==o.EA.status){try{await (0,c.WR)(e)}catch(e){console.log(e)}return}"online"===o.EA.status&&await o.EA.send(e)},v=async e=>{var t,a,o,l,c,v,g,m;let h=(0,n.Z)(),y=u.h.getState().chat.selectedThread,I=(0,d.jQ)(),b=(0,d.d4)(),S="".concat(null==y?void 0:null===(t=y.thread)||void 0===t?void 0:t.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),_=(0,r.Ls)("message",{xmlns:"jabber:client",from:b,to:S,type:"chat",id:h},(0,r.Ls)("body",void 0,e),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==y?void 0:null===(a=y.thread)||void 0===a?void 0:a.adId,categoryId:null==y?void 0:y.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==y?void 0:y.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==y?void 0:y.isSeller)?I:null==y?void 0:null===(o=y.thread)||void 0===o?void 0:o.peerId,creation_source:"panamera",app_key:"panamera",actionId:"3",interventionId:"203"}),(0,r.Ls)("text",{xmlns:"urn:xmpp:type"})),E={offerId:null==y?void 0:y.thread.offerId,subType:"offer",offerCategory:null==y?void 0:y.thread.offerCategory,offerStatus:null==y?void 0:y.thread.offerStatus,buyerOffer:null==y?void 0:y.thread.buyerOffer,sellerOffer:null==y?void 0:y.thread.sellerOffer},O={...s.bH,chatId:h,senderId:I||"",message:e,time:new Date,messageType:"text",receiverId:null==y?void 0:null===(l=y.thread)||void 0===l?void 0:l.peerId,adId:(null==y?void 0:null===(c=y.thread)||void 0===c?void 0:c.adId)||"",categoryId:Number(null==y?void 0:null===(v=y.thread)||void 0===v?void 0:v.categoryId),sellerId:(null==y?void 0:y.isSeller)?I||"":null==y?void 0:null===(g=y.thread)||void 0===g?void 0:g.peerId,peerId:null==y?void 0:null===(m=y.thread)||void 0===m?void 0:m.peerId,offer:E,displayStatus:"sent",updatedAt:Number(new Date).toString(),messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(O,"".concat(null==y?void 0:null===(e=y.thread)||void 0===e?void 0:e.peerId,"_").concat(null==y?void 0:null===(t=y.thread)||void 0===t?void 0:t.adId)),await p(_)}catch(e){console.log(e)}})},g=async(e,t,a)=>{let i=(0,n.Z)(),o=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(e,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:i},(0,r.Ls)("received",{xmlns:"urn:xmpp:chat-markers:0",id:a}),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:t,countryId:s.J2.DOMAIN,messageType:"text"}));try{await p(o)}catch(e){console.log(e)}},m=async(e,t,a)=>{let i=(0,n.Z)(),o=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(e,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:i},(0,r.Ls)("displayed",{xmlns:"urn:xmpp:chat-markers:0",id:a}),(0,r.Ls)("store",{xmlns:"urn:xmpp:hints"}),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:t,countryId:s.J2.DOMAIN,messageType:"text"}));try{await p(o)}catch(e){console.log(e)}},h=async e=>{var t,a,o,l,c,v,g,m,h,y,I;let b=(0,n.Z)(),S=(0,n.Z)(),_=u.h.getState().chat.selectedThread,E=(null===(t=u.h.getState().session.user)||void 0===t?void 0:t.id)||"",O="Bunu şimdi ".concat(e.price,"TL karşılığında satın almak istiyorum"),T=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(null==_?void 0:null===(a=_.thread)||void 0===a?void 0:a.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:b},(0,r.Ls)("body",void 0,O),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==_?void 0:null===(o=_.thread)||void 0===o?void 0:o.adId,categoryId:null==_?void 0:_.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==_?void 0:_.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==_?void 0:_.isSeller)?E:null==_?void 0:null===(l=_.thread)||void 0===l?void 0:l.peerId,creation_source:"panamera",app_key:"panamera"}),(0,r.Ls)("actionable",{xmlns:"urn:xmpp:type",subType:"offer",offer_id:S,buyer_offer:null===(c=e.price)||void 0===c?void 0:c.toString(),offer_status:s.zL.PENDING,offer_category:e.offerCategory})),w={offerId:S,subType:"offer",offerCategory:e.offerCategory,offerStatus:s.zL.PENDING,buyerOffer:null===(v=e.price)||void 0===v?void 0:v.toString()},L={...s.bH,chatId:b,senderId:E,message:O,time:new Date,messageType:s.LL.OFFER,receiverId:null==_?void 0:null===(g=_.thread)||void 0===g?void 0:g.peerId,adId:(null==_?void 0:null===(m=_.thread)||void 0===m?void 0:m.adId)||"",categoryId:Number(null==_?void 0:null===(h=_.thread)||void 0===h?void 0:h.categoryId),sellerId:(null==_?void 0:_.isSeller)?E:null==_?void 0:null===(y=_.thread)||void 0===y?void 0:y.peerId,peerId:null==_?void 0:null===(I=_.thread)||void 0===I?void 0:I.peerId,offer:w,displayStatus:"sent",messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(L,"".concat(null==_?void 0:null===(e=_.thread)||void 0===e?void 0:e.peerId,"_").concat(null==_?void 0:null===(t=_.thread)||void 0===t?void 0:t.adId)),await p(T)}catch(e){console.log(e)}})},y=async()=>{var e,t,a,o,l,c,v,g,m;let h=(0,n.Z)(),y=(0,n.Z)(),I=u.h.getState().chat.selectedThread,b=(null===(e=u.h.getState().session.user)||void 0===e?void 0:e.id)||"",S="Teklifini kabul ediyorum.",_={xmlns:"urn:xmpp:type",subType:"offer",offer_id:y,offer_status:s.zL.ACCEPTED,buyer_offer:null==I?void 0:I.thread.buyerOffer,seller_offer:null==I?void 0:I.thread.sellerOffer},E=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(null==I?void 0:null===(t=I.thread)||void 0===t?void 0:t.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:h},(0,r.Ls)("body",void 0,S),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==I?void 0:null===(a=I.thread)||void 0===a?void 0:a.adId,categoryId:null==I?void 0:I.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==I?void 0:I.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==I?void 0:I.isSeller)?b:null==I?void 0:null===(o=I.thread)||void 0===o?void 0:o.peerId,creation_source:"panamera",app_key:"panamera"}),(0,r.Ls)("actionable",_)),O={offerId:y,subType:"offer",offerStatus:s.zL.ACCEPTED,buyerOffer:null==I?void 0:I.thread.buyerOffer,sellerOffer:null==I?void 0:I.thread.sellerOffer},T={...s.bH,chatId:h,senderId:b,message:S,time:new Date,messageType:s.LL.ACCEPTED_OFFER,receiverId:null==I?void 0:null===(l=I.thread)||void 0===l?void 0:l.peerId,adId:(null==I?void 0:null===(c=I.thread)||void 0===c?void 0:c.adId)||"",categoryId:Number(null==I?void 0:null===(v=I.thread)||void 0===v?void 0:v.categoryId),sellerId:(null==I?void 0:I.isSeller)?b:null==I?void 0:null===(g=I.thread)||void 0===g?void 0:g.peerId,peerId:null==I?void 0:null===(m=I.thread)||void 0===m?void 0:m.peerId,offer:O,displayStatus:"sent",messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(T,"".concat(null==I?void 0:null===(e=I.thread)||void 0===e?void 0:e.peerId,"_").concat(null==I?void 0:null===(t=I.thread)||void 0===t?void 0:t.adId)),await p(E)}catch(e){console.log(e)}})},I=async e=>{var t,a,o,l,c,v,g,m,h,y,I,b,S;let _=(0,n.Z)(),E=(0,n.Z)(),O=u.h.getState().chat.selectedThread,T=(null===(t=u.h.getState().session.user)||void 0===t?void 0:t.id)||"",w="\xdcr\xfcn\xfc ".concat(e.sellerOffer," karşılığında satabilirim. L\xfctfen \xf6nceki teklifinden daha y\xfcksek bir fiyat ver"),L=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(null==O?void 0:null===(a=O.thread)||void 0===a?void 0:a.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:_},(0,r.Ls)("body",void 0,w),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==O?void 0:null===(o=O.thread)||void 0===o?void 0:o.adId,categoryId:null==O?void 0:O.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==O?void 0:O.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==O?void 0:O.isSeller)?T:null==O?void 0:null===(l=O.thread)||void 0===l?void 0:l.peerId,creation_source:"panamera",app_key:"panamera"}),(0,r.Ls)("actionable",{xmlns:"urn:xmpp:type",subType:"offer",offer_id:E,buyer_offer:null===(c=e.buyerOffer)||void 0===c?void 0:c.toString(),seller_offer:null===(v=e.sellerOffer)||void 0===v?void 0:v.toString(),offer_status:s.zL.COUNTER_OFFER})),C={...s.bH,chatId:_,senderId:T,message:w,time:new Date,messageType:s.LL.COUNTER_OFFER,receiverId:null==O?void 0:null===(g=O.thread)||void 0===g?void 0:g.peerId,adId:(null==O?void 0:null===(m=O.thread)||void 0===m?void 0:m.adId)||"",categoryId:Number(null==O?void 0:null===(h=O.thread)||void 0===h?void 0:h.categoryId),sellerId:(null==O?void 0:O.isSeller)?T:null==O?void 0:null===(y=O.thread)||void 0===y?void 0:y.peerId,peerId:null==O?void 0:null===(I=O.thread)||void 0===I?void 0:I.peerId,offer:{offerId:E,subType:"offer",buyerOffer:null===(b=e.buyerOffer)||void 0===b?void 0:b.toString(),sellerOffer:null===(S=e.sellerOffer)||void 0===S?void 0:S.toString(),offerStatus:s.zL.COUNTER_OFFER},displayStatus:"sent",messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(C,"".concat(null==O?void 0:null===(e=O.thread)||void 0===e?void 0:e.peerId,"_").concat(null==O?void 0:null===(t=O.thread)||void 0===t?void 0:t.adId)),await p(L)}catch(e){console.log(e)}})},b=async()=>{var e,t,a,o,l,c,v,g,m,h,y,I;let b=(0,n.Z)(),S=(0,n.Z)(),_=u.h.getState().chat.selectedThread,E=(null===(e=u.h.getState().session.user)||void 0===e?void 0:e.id)||"",O="\xdczg\xfcn\xfcm, \xfcr\xfcn\xfc bu fiyata satamam. L\xfctfen bana daha iyi bir teklif ver.",T=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(null==_?void 0:null===(t=_.thread)||void 0===t?void 0:t.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:b},(0,r.Ls)("body",void 0,O),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==_?void 0:null===(a=_.thread)||void 0===a?void 0:a.adId,categoryId:null==_?void 0:_.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==_?void 0:_.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==_?void 0:_.isSeller)?E:null==_?void 0:null===(o=_.thread)||void 0===o?void 0:o.peerId,creation_source:"panamera",app_key:"panamera"}),(0,r.Ls)("actionable",{xmlns:"urn:xmpp:type",subType:"offer",offer_id:S,buyer_offer:null==_?void 0:null===(l=_.thread.buyerOffer)||void 0===l?void 0:l.toString(),seller_offer:null==_?void 0:null===(c=_.thread.sellerOffer)||void 0===c?void 0:c.toString(),offer_status:s.zL.REJECTED})),w={...s.bH,chatId:b,senderId:E,message:O,time:new Date,messageType:s.LL.REJECTED_OFFER,receiverId:null==_?void 0:null===(v=_.thread)||void 0===v?void 0:v.peerId,adId:(null==_?void 0:null===(g=_.thread)||void 0===g?void 0:g.adId)||"",categoryId:Number(null==_?void 0:null===(m=_.thread)||void 0===m?void 0:m.categoryId),sellerId:(null==_?void 0:_.isSeller)?E:null==_?void 0:null===(h=_.thread)||void 0===h?void 0:h.peerId,peerId:null==_?void 0:null===(y=_.thread)||void 0===y?void 0:y.peerId,offer:{offerId:S,subType:"offer",buyerOffer:null==_?void 0:null===(I=_.thread.buyerOffer)||void 0===I?void 0:I.toString(),offerStatus:s.zL.REJECTED},displayStatus:"sent",messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(w,"".concat(null==_?void 0:null===(e=_.thread)||void 0===e?void 0:e.peerId,"_").concat(null==_?void 0:null===(t=_.thread)||void 0===t?void 0:t.adId)),await p(T)}catch(e){console.log(e)}})},S=async()=>{var e,t,a,o,l,c,v,g;let m=(0,n.Z)(),h=u.h.getState().chat.selectedThread,y=(0,d.jQ)(),I="Cihat seni aramayı denedi",b=(0,r.Ls)("message",{xmlns:"jabber:client",from:(0,d.d4)(),to:"".concat(null==h?void 0:null===(e=h.thread)||void 0===e?void 0:e.peerId,"_").concat(s.J2.DOMAIN,"@").concat(s.J2.DOMAIN),type:"chat",id:m},(0,r.Ls)("body",void 0,I),(0,r.Ls)("markable",{xmlns:"urn:xmpp:chat-markers:0"}),(0,r.Ls)("extras",{xmlns:"urn:xmpp:extras",itemId:null==h?void 0:null===(t=h.thread)||void 0===t?void 0:t.adId,categoryId:null==h?void 0:h.thread.categoryId,countryId:s.J2.DOMAIN,senderType:(null==h?void 0:h.isSeller)?s.J2.SELLER:s.J2.BUYER,sellerId:(null==h?void 0:h.isSeller)?y:null==h?void 0:null===(a=h.thread)||void 0===a?void 0:a.peerId,creation_source:"panamera",app_key:"panamera"}),(0,r.Ls)("text",{xmlns:"urn:xmpp:type"}),(0,r.Ls)("call",{xmlns:"urn:xmpp:type"})),S={offerId:null==h?void 0:h.thread.offerId,subType:"offer",offerCategory:null==h?void 0:h.thread.offerCategory,offerStatus:null==h?void 0:h.thread.offerStatus,buyerOffer:null==h?void 0:h.thread.buyerOffer,sellerOffer:null==h?void 0:h.thread.sellerOffer},_={...s.bH,chatId:m,senderId:y||"",message:I,time:new Date,messageType:"numberViewed",receiverId:null==h?void 0:null===(o=h.thread)||void 0===o?void 0:o.peerId,adId:(null==h?void 0:null===(l=h.thread)||void 0===l?void 0:l.adId)||"",categoryId:Number(null==h?void 0:null===(c=h.thread)||void 0===c?void 0:c.categoryId),sellerId:(null==h?void 0:h.isSeller)?y||"":null==h?void 0:null===(v=h.thread)||void 0===v?void 0:v.peerId,peerId:null==h?void 0:null===(g=h.thread)||void 0===g?void 0:g.peerId,offer:S,displayStatus:"sent",messageSendingStatus:"waiting"};await f(async()=>{try{var e,t;await (0,i.TE)(_,"".concat(null==h?void 0:null===(e=h.thread)||void 0===e?void 0:e.peerId,"_").concat(null==h?void 0:null===(t=h.thread)||void 0===t?void 0:t.adId)),await p(b)}catch(e){console.log(e)}})},_=async(e,t)=>{let a=(0,n.Z)(),o=(0,r.Ls)("iq",{xmlns:"jabber:client",type:"set",id:a},(0,r.Ls)("query",{xmlns:"jabber:iq:mamremove"},(0,r.Ls)("jid",void 0,"".concat(t,"_olxtr@olxtr")),(0,r.Ls)("adid",void 0,e)));try{await (0,i.Ww)("".concat(t,"_").concat(e)),await p(o)}catch(e){console.log(e)}},E=async(e,t)=>{let a=(0,n.Z)(),i=(0,r.Ls)("iq",{type:"set",id:a},(0,r.Ls)("".concat(e?"block":"unblock"),{xmlns:"urn:xmpp:blocking"},(0,r.Ls)("item",{jid:(0,d.d4)(t)})));try{await p(i)}catch(e){console.log(e)}},O=async()=>{let e=(0,r.Ls)("iq",{id:(0,n.Z)(),type:"get",from:(0,d.d4)()},(0,r.Ls)("query",{xmlns:"jabber:iq:jwt"}));await p(e)}},93707:function(e,t,a){"use strict";a.d(t,{WR:function(){return y},vb:function(){return I},yv:function(){return m}});var r=a(11477),n=a(44367),i=a(48777),o=a(62220),d=a(61156),s=a(75468),l=a(18311),u=a(65387),c=a(2656);let f=e=>e?Object.entries(e.attrs).reduce((e,t)=>{let[a,r]=t;return e[a]=r,e},{}):{},p=e=>{if(e)return{subType:e.getAttr("subType"),buyerOffer:e.getAttr("buyer_offer"),offerStatus:e.getAttr("offer_status"),offerCategory:e.getAttr("offer_category"),sellerOffer:e.getAttr("seller_offer"),offerId:e.getAttr("offer_id")}},v=e=>{if(e)return{lat:e.getAttr("lat"),lon:e.getAttr("lon")}},g=e=>{if(e)return{id:e.getAttr("id")}},m=async(e,t)=>{var a,n,u,m,h,y,I,b;let S=l.h.getState().chat,_=[...S.threads];S.initialStorageManagerStatus;let E=null===(n=e.getChild("sent"))||void 0===n?void 0:null===(a=n.getChild("forwarded"))||void 0===a?void 0:a.getChild("message");if(null===E&&!e.getChildText("body"))return;let O=null==E?void 0:E.children.some(e=>"noPermanentStorage"===e.name||"noStore"===e.name);if(e.children.some(e=>"noPermanentStorage"===e.name)||O)return;let T=null!==(u=null==E?void 0:E.getChild("extras"))&&void 0!==u?u:e.getChild("extras"),w=null!==(m=null==E?void 0:E.getChild("actionable"))&&void 0!==m?m:e.getChild("actionable"),L=null!==(h=null==E?void 0:E.getChild("location"))&&void 0!==h?h:e.getChild("location"),C=null!==(y=null==E?void 0:E.getChild("call"))&&void 0!==y?y:e.getChild("call"),A=null!==(I=null==E?void 0:E.getChild("displayed"))&&void 0!==I?I:e.getChild("displayed"),D=null!==(b=null==E?void 0:E.getChild("received"))&&void 0!==b?b:e.getChild("received"),k=T?f(T):void 0,x=w?f(w):void 0,N=L?v(L):void 0,M=w?p(w):void 0,R=D?g(D):void 0,F=A?g(A):void 0,U=E?E.attrs.id:e.attrs.id,P=E?(0,i.pj)(E.attrs.from):(0,i.pj)(e.attrs.from),J=E?(0,i.pj)(E.attrs.to):(0,i.pj)(e.attrs.to),V=(0,i.jQ)(),j=t===P?J:P,B="".concat(j,"_").concat(null==k?void 0:k.itemId),Z=_.find(e=>e.threadId===B),X=e.getChildText("body")||(null==E?void 0:E.getChildText("body"))||"",G=d.LL.TEXT;if(null==R?void 0:R.id){if(!X||X.includes(o.chat.youHaveAMessageFromLetgo))return;await (0,r.UK)({messageId:R.id,threadId:B,status:"received"});return}if(null==F?void 0:F.id){await (0,r.UK)({messageId:F.id,threadId:B,status:"displayed"});return}if(!(j&&(null==k?void 0:k.itemId)&&U&&(!X||X.includes(o.chat.youHaveAMessageFromLetgo)||(l.h.dispatch((0,s.dk)(!0)),await (0,c.sv)(j,null==k?void 0:k.itemId,U),"uninitialized"===S.initialStorageManagerStatus||!S.onTheChatPage)))){if(M&&M.offerId&&""!==M.offerId.trim()){let e=null==M?void 0:M.offerStatus;if(e)switch(e){case d.zL.ACCEPTED:G=d.LL.ACCEPTED_OFFER;break;case d.zL.COUNTER_OFFER:G=d.LL.COUNTER_OFFER;break;case d.zL.PENDING:G=d.LL.OFFER;break;case d.zL.REJECTED:G=d.LL.REJECTED_OFFER;break;default:G=d.LL.TEXT}else G=d.LL.TEXT}else N&&N.lat&&""!==N.lat.trim()&&N.lon&&""!==N.lon.trim()?G=d.LL.LOCATION:C&&(G=d.LL.NUMBER_VIEWED);if(Z){let e=Z.messages.some(e=>e.chatId===U);if(!X||X.includes(o.chat.youHaveAMessageFromLetgo))return;if(!e){let e={offerId:(null==M?void 0:M.offerId)||Z.offerId,subType:"offer",offerCategory:(null==M?void 0:M.offerCategory)||Z.offerCategory,offerStatus:(null==M?void 0:M.offerStatus)||Z.offerStatus,buyerOffer:(null==M?void 0:M.buyerOffer)||Z.buyerOffer,sellerOffer:(null==M?void 0:M.sellerOffer)||Z.sellerOffer},t={...d.bH,chatId:U||"",senderId:P,message:X,time:new Date,messageType:G,receiverId:J,adId:Z.adId||"",categoryId:Number(Z.categoryId),sellerId:null==k?void 0:k.sellerId,peerId:j,extras:k,actionable:x,location:N,offer:e,displayStatus:"received"};j&&Z.adId&&U&&(l.h.dispatch((0,s.dk)(!0)),await (0,c.sv)(j,Z.adId,U)),await (0,r.TE)(t,"".concat(j,"_").concat(Z.adId));return}}else if(j!==V&&B&&!Z&&(null==k?void 0:k.itemId)&&X&&!X.includes(o.chat.youHaveAMessageFromLetgo)){let e={offerId:null==M?void 0:M.offerId,subType:"offer",offerCategory:null==M?void 0:M.offerCategory,offerStatus:null==M?void 0:M.offerStatus,buyerOffer:null==M?void 0:M.buyerOffer,sellerOffer:null==M?void 0:M.sellerOffer},t={...d.bH,chatId:U,senderId:P,message:X,time:new Date,messageType:G,receiverId:J,adId:k.itemId,categoryId:Number(null==k?void 0:k.categoryId),sellerId:null==k?void 0:k.sellerId,peerId:j,offer:e,displayStatus:"received"};j&&U&&(l.h.dispatch((0,s.dk)(!0)),await (0,c.sv)(j,k.itemId,U));let a=await (0,r.xv)(j,null==k?void 0:k.itemId,[t]);_.push(a);let n=(0,r.Sn)(_);l.h.dispatch((0,s.VH)(n));let i=n.find(e=>e.threadId===B);i&&await (0,r.T$)(i)}}},h=async(e,t)=>{if(t<3)try{await (null===n.EA||void 0===n.EA?void 0:n.EA.send(e))}catch(a){console.error("Failed to send message, retrying...",a),setTimeout(()=>h(e,t+1),u.s9*Math.pow(2,t))}else console.error("Failed to send message, maximum number of attempts reached..")},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n.EA){if("online"===n.EA.status)await h(e,a);else if(t<3)try{await (0,n.eg)(),await h(e,a)}catch(r){console.error("Failed to connect, retrying...",r),setTimeout(()=>y(e,t+1,a),u.s9*Math.pow(2,t))}else console.error("Failed to connect, maximum number of attempts reached.")}},I=async()=>{let e=l.h.getState().chat.connectionStatus;await (0,i.bC)()&&e&&await (0,n.eg)()}},61156:function(e,t,a){"use strict";a.d(t,{$x:function(){return S},Ag:function(){return r},BD:function(){return b},C7:function(){return c},IX:function(){return L},J2:function(){return i},LL:function(){return d},Nk:function(){return s},SW:function(){return m},Uq:function(){return o},Vr:function(){return h},XE:function(){return v},Xy:function(){return E},YI:function(){return n},Yu:function(){return l},bH:function(){return g},gt:function(){return O},l9:function(){return f},to:function(){return w},vk:function(){return p},w3:function(){return y},wO:function(){return T},xk:function(){return I},yr:function(){return _},zL:function(){return u}});let r="wss://msg.olx.com.tr/ws/chat",n="pwaDesktop",i={DOMAIN:"olxtr",SELLER:"seller",BUYER:"buyer",DB_VERSION_ONE:1,DB_VERSION_TWO:2,DB_VERSION_THREE:3,DB_VERSION_FOUR:4,DB_VERSION_FIVE:5},o={DISPLAYED:"displayed",SENT:"sent",RECEIVED:"received"},d={TEXT:"text",OFFER:"offer",ACCEPTED_OFFER:"acceptedOffer",REJECTED_OFFER:"rejectedOffer",LOCATION:"location",NUMBER_VIEWED:"numberViewed",COUNTER_OFFER:"counteroffer",CALL:"call"},s={VERY_GOOD:"veryGood",GOOD:"good",LOW:"low",HIGH:"high",INITIAL:"initial",MORE_THAN:"moreThan"},l={ACTIVE:"active",INACTIVE:"inactive",BLOCKED:"blocked",PENDING:"pending",MODIFY:"modify",OUTDATED:"outdated",MODERATED:"moderated",DELETED:"deleted",REJECTED:"rejected",DISABLED:"disabled",SOLD:"sold"},u={PENDING:"pending",COUNTER_OFFER:"counteroffer",ACCEPTED:"accepted",REJECTED:"rejected",MAKE_OFFER:"makeOffer",MAKE_REJECTED_OFFER:"makeRejectedOffer"},c={IMAGE:"image",SYSTEM:"system",CALL:"call",SMS:"sms",INFO:"info",TEXT_AUTO:"textAuto",TEXT:"text",LOCATION:"location",ACTIONABLE:"actionable"},f={MAX_VALUE:1.2,MIN_VALUE:.8,GOOD_OFFER_UPPER_THRESHOLD:1.1},p={REMOVED_BY_USER:"removed_by_user",SOLD:"sold",OUTDATED:"outdated",DISABLED:"disabled"},v={PEER_ID_INDEX:3,AD_ID_INDEX:4},g={chatId:"",senderId:"",displayStatus:"sent",message:"",time:new Date,messageType:"text",receiverId:"",buyerId:"",sellerId:"",autoReply:!1,deleted:!1,updatedAt:Number(new Date).toString(),adId:"",categoryId:0,actionableSuggestions:{},tipTo:void 0,leadInfo:void 0,replied:!1,suggestions:{},replyTo:{},offer:{},location:void 0,peerId:""},m={threadId:"",adId:"",peerId:"",deleted:!1,lastMsgTimestamp:"",expiresOn:"",tag:"",buyerOffer:"",offerStatus:"",offerCategory:"",sellerOffer:"",offerId:"",phoneViewed:!1,peerStatus:"",adStatus:"",categoryId:"",messages:[],adDetail:void 0,peer:void 0,dealerType:"",updatedAt:Number(new Date).toString()},h={data:{about:"",address:[],anonymous:!1,avatar_id:"",badges:[],business_categories:[],contacts:{email:"",isPhoneVisible:!1,isValidEmail:!1,phones:[]},created_at:"",data_request:[],dealer:void 0,email:"",has_phone:!1,id:"",images:[],is_banned:!1,is_business:!1,is_phone_visible:!1,lang:"",last_login_at:"",locations:[],name:"letgo Kullanıcı",name_provided:!1,phone:null,require_password:!1,status:"",verification_status:"",others:{},showroom_address:{pincode:"",addressLine1:"",addressLine2:null,city:"",landmark:null,latitude:0,locality:"",longitude:0,operatingdetails:[],state:null,currentOpenState:"",isOpen:!1}},metadata:{update:""}},y=["connecting","opening"],I=["connect","online","open"],b=["disconnect","disconnecting","close","closing","offline"],S=500,_=3e3,E=4e4,O=5,T=5,w=14,L=48},21926:function(e,t,a){"use strict";var r,n;a.d(t,{RI:function(){return s},YF:function(){return d},kz:function(){return r},v9:function(){return i},vK:function(){return o}});let i={LOCAL_STORAGE_KEY:"__recent_locations",LOCAL_STORAGE_KEY_POST:"__post_recent_locations"},o={neighbourhood:"NEIGHBOURHOOD",city:"city",state:"state"},d="4000040",s="10";(n=r||(r={}))[n.COUNTRY=0]="COUNTRY",n[n.CITY=1]="CITY",n[n.NEIGHBOURHOOD=2]="NEIGHBOURHOOD"},94090:function(e,t,a){"use strict";var r,n,i,o;a.d(t,{B7:function(){return S},Bi:function(){return h},Eg:function(){return u},F_:function(){return f},J8:function(){return b},KG:function(){return v},Mu:function(){return y},POST_ATTRIBUTE_TYPES:function(){return n},Uf:function(){return l},V$:function(){return p},VV:function(){return _},Vm:function(){return g},X9:function(){return E},dy:function(){return d},ez:function(){return s},gs:function(){return I},hW:function(){return m},hv:function(){return c},oF:function(){return r}}),(i=r||(r={})).uploadPhoto="uploadPhoto",i.categorySelection="categorySelection",i.information="information",i.attributes="attributes",i.preview="preview";let d=0,s=1,l=2,u=3,c=4,f=[{id:"uploadPhoto",title:"Fotoğraf",index:0},{id:"categorySelection",title:"Kategori Se\xe7imi",index:1},{id:"information",title:"İlan Bilgileri",index:2},{id:"attributes",title:"İlan \xd6zellikleri",index:3},{id:"preview",title:"İlan \xd6nizlemesi",index:4}],p=20,v="redirectedItem",g=70,m=3,h=1450,y=10;(o=n||(n={}))[o.Range=0]="Range",o[o.Input=1]="Input",o[o.Dropdown=2]="Dropdown",o[o.Boolean=3]="Boolean";let I={yil:{id:1446,parent:0,name:"Yıl"},marka:{id:1428,parent:1446,name:"Marka"},model:{id:1430,parent:1428,name:"Model"},"kasa-tipi":{id:1432,parent:1430,name:"Kasa Tipi"},"yakit-tipi":{id:1431,parent:1432,name:"Yakıt"},"vites-tipi":{id:1433,parent:1431,name:"Şanzıman"},tip:{id:1434,parent:1433,name:"Tip"}},b=1970,S=2e3,_="vehicle",E=Object.keys(I)},79617:function(e,t,a){"use strict";a.d(t,{DB:function(){return d},DX:function(){return s},Ms:function(){return u},OB:function(){return i},aZ:function(){return o},lR:function(){return c},sO:function(){return l},v$:function(){return f}}),a(64934);var r=a(61156);a(530);var n=a(77089);a(49079);let i=e=>e*r.l9.GOOD_OFFER_UPPER_THRESHOLD,o=e=>e*r.l9.MIN_VALUE,d=e=>{let t=o(e),a=[],r=(e-t)/4;for(let t=0;t<5;t++){let n=e-r*t;a.push(n)}return a},s=(e,t)=>{let a=t*r.l9.MAX_VALUE,n=t*r.l9.MIN_VALUE,i=t*r.l9.GOOD_OFFER_UPPER_THRESHOLD;return 0===e?r.Nk.INITIAL:e>a?r.Nk.HIGH:e<n?r.Nk.LOW:e>i?r.Nk.VERY_GOOD:r.Nk.GOOD},l=e=>{if((null==e?void 0:e.trim())==="")return 0;let t=new Date;return Math.ceil((new Date(parseInt(e,10)||t.getTime()).getTime()-t.getTime())/864e5)},u=e=>{let t=(0,n.cS)(e,"/",[r.XE.PEER_ID_INDEX,r.XE.AD_ID_INDEX]);return{peerId:t[0],adId:t[1],isItNewThread:e.includes("new")}},c=(e,t)=>t?{icon:"clockFilled",color:"blackDisabled"}:e===r.Uq.SENT?{icon:"ok",color:"blackDisabled"}:e===r.Uq.RECEIVED?{icon:"doubleCheckRead",color:"blackDisabled"}:{icon:"doubleCheckRead",color:"redBase"},f=()=>new Date(new Date().getTime()+1296e6).getTime()},50619:function(e,t,a){"use strict";a.d(t,{d8:function(){return r},ej:function(){return i},kT:function(){return n}});let r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undefined"!=typeof document){let r="object"==typeof t?encodeURIComponent(JSON.stringify(t)):t,n=a.days||1,i="",o="",d="",s="",l=new Date;l.setTime(l.getTime()+864e5*n),i=";expires=".concat(l.toUTCString()),a.secure&&"https:"===location.protocol&&(o=";secure"),a.domain&&(d=";domain=".concat(a.domain)),a.sameSite&&(s=";SameSite=".concat(a.sameSite)),document.cookie="".concat(e,"=").concat(r).concat(i,";path=/").concat(o).concat(d).concat(s)}},n=e=>{r(e,"",{days:-1})},i=e=>{let t;if("undefined"!=typeof document){let a="".concat(e,"="),r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);0===n.indexOf(a)&&(t=n.substring(a.length,n.length))}}return t}},40210:function(e,t,a){"use strict";a.d(t,{K:function(){return i},o:function(){return n}});var r=a(21926);let n=()=>{{let e=localStorage.getItem(r.v9.LOCAL_STORAGE_KEY);if(e)return JSON.parse(e)[0]}},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"İstanbul, T\xfcrkiye";if(e&&e.name&&Array.isArray(e.addressComponents)&&e.addressComponents.length>=2){let t=e.type===r.vK.neighbourhood?e.addressComponents[1].name:e.addressComponents[0].name;return"".concat(e.name,", ").concat(t)}return t}},75468:function(e,t,a){"use strict";a.d(t,{Au:function(){return y},DX:function(){return v},EU:function(){return b},JJ:function(){return s},RH:function(){return f},T2:function(){return S},VH:function(){return d},XV:function(){return h},bl:function(){return o},cv:function(){return I},dk:function(){return c},h7:function(){return g},kw:function(){return m},nB:function(){return u},ro:function(){return p},w3:function(){return l}});var r=a(68508);let n={connectionStatus:void 0,threads:[],selectedThread:void 0,selectedThreadIsReady:!1,hasError:!1,hasUnreadMessages:!1,sellerQuickMessages:[],buyerQuickMessages:[],initialStorageManagerStatus:"uninitialized",blockedUsers:[],flashMessage:void 0,blockUrUnBlockModalDisplay:!1,xmppClientObjectStatus:void 0,onTheChatPage:!1},i=(0,r.oM)({name:"chat",initialState:n,reducers:{setConnectionStatus:(e,t)=>{e.connectionStatus=t.payload},setThreads:(e,t)=>{e.threads=t.payload},setSelectedThread:(e,t)=>{e.selectedThread=t.payload},setSelectedThreadIsReady:(e,t)=>{e.selectedThreadIsReady=t.payload},setHasError:(e,t)=>{e.hasError=t.payload},setHasUnreadMessages:(e,t)=>{e.hasUnreadMessages=t.payload},setSellerQuickMessages:(e,t)=>{e.sellerQuickMessages=t.payload},setBuyerQuickMessages:(e,t)=>{e.buyerQuickMessages=t.payload},setInitialStorageManagerStatus:(e,t)=>{e.initialStorageManagerStatus=t.payload},addBlockedUser:(e,t)=>{e.blockedUsers.push(t.payload)},removeBlockedUser:(e,t)=>{e.blockedUsers=e.blockedUsers.filter(e=>e!==t.payload)},setFlashMessage:(e,t)=>{e.flashMessage=t.payload},setBlockUrUnBlockModalDisplay:(e,t)=>{e.blockUrUnBlockModalDisplay=t.payload},setXmppClientObjectStatus:(e,t)=>{e.xmppClientObjectStatus=t.payload},setOnTheChatPage:(e,t)=>{e.onTheChatPage=t.payload},resetChat:()=>n}}),{setConnectionStatus:o,setThreads:d,setSelectedThread:s,setSelectedThreadIsReady:l,setHasError:u,setHasUnreadMessages:c,setSellerQuickMessages:f,setBuyerQuickMessages:p,setInitialStorageManagerStatus:v,addBlockedUser:g,removeBlockedUser:m,setFlashMessage:h,setBlockUrUnBlockModalDisplay:y,setXmppClientObjectStatus:I,setOnTheChatPage:b,resetChat:S}=i.actions;t.ZP=i.reducer},96307:function(e,t,a){"use strict";a.d(t,{$p:function(){return d},My:function(){return s},nG:function(){return l},rr:function(){return i},sI:function(){return o},tG:function(){return n}});let r=(0,a(68508).oM)({name:"filter",initialState:{isFilterModalVisible:!1,categoryInfo:void 0,selectedFilter:void 0,isLoading:!1,filters:[],appliedFilters:[]},reducers:{setFilterModalVisible:(e,t)=>{e.isFilterModalVisible=t.payload},setFilters:(e,t)=>{e.filters=t.payload},setAppliedFilters:(e,t)=>{e.appliedFilters=t.payload},setFilterCategoryInfo:(e,t)=>{e.categoryInfo=t.payload},setSelectedFilter:(e,t)=>{e.selectedFilter=t.payload},setFilterLoading:(e,t)=>{e.isLoading=t.payload}}}),{setFilterModalVisible:n,setFilters:i,setAppliedFilters:o,setFilterCategoryInfo:d,setSelectedFilter:s,setFilterLoading:l}=r.actions;t.ZP=r.reducer},30060:function(e,t,a){"use strict";a.d(t,{m:function(){return n}});let r=(0,a(68508).oM)({name:"gtmManager",initialState:{isGTMInitialized:!1},reducers:{initializeGTM(e){e.isGTMInitialized=!0}}}),{initializeGTM:n}=r.actions;t.Z=r.reducer},83695:function(e,t,a){"use strict";a.d(t,{Yy:function(){return n},Zm:function(){return i}});let r=(0,a(68508).oM)({name:"listing",initialState:{cityOptions:[],districtOptions:[],cityOptionsLoading:!1},reducers:{setCityOptions:(e,t)=>{e.cityOptions=t.payload},setDistrictOptions:(e,t)=>{e.districtOptions=t.payload},setCityOptionsLoading:(e,t)=>{e.cityOptionsLoading=t.payload}}}),{setCityOptions:n,setDistrictOptions:i,setCityOptionsLoading:o}=r.actions;t.ZP=r.reducer},26923:function(e,t,a){"use strict";a.d(t,{K:function(){return n}});let r=(0,a(68508).oM)({name:"loading",initialState:{isLoading:!1},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload}}}),{setLoading:n}=r.actions;t.Z=r.reducer},66153:function(e,t,a){"use strict";a.d(t,{l:function(){return o}});var r=a(68508);let n={location:(0,a(40210).o)()},i=(0,r.oM)({name:"location",initialState:n,reducers:{setLocation:(e,t)=>{e.location=t.payload}}}),{setLocation:o}=i.actions;t.Z=i.reducer},34931:function(e,t,a){"use strict";a.d(t,{CM:function(){return c},Cm:function(){return N},HE:function(){return s},K4:function(){return D},KT:function(){return _},MO:function(){return m},Mz:function(){return I},NZ:function(){return O},Qo:function(){return w},Rz:function(){return v},TZ:function(){return P},T_:function(){return x},VN:function(){return E},Vk:function(){return L},X2:function(){return A},b9:function(){return l},bB:function(){return S},bg:function(){return p},cd:function(){return b},e$:function(){return i},iF:function(){return g},iR:function(){return C},l6:function(){return k},m4:function(){return f},m6:function(){return T},nj:function(){return J},o7:function(){return R},oA:function(){return y},pj:function(){return M},qV:function(){return F},yZ:function(){return h}});var r=a(68508),n=a(94090);let i={breadcrumbs:[],id:0,isLastChild:!1,name:"Ne Satıyorsun?",parent:0,postingTemplate:""},o={aiGotResponse:!1,aiSuggestions:[],attributes:{},dropdownAttributes:{},images:[],information:{title:"",price:0,description:""},isAILoading:!1,isEditPage:!1,isLoading:!1,showConfirmModal:!1,showVerifyGovtModal:!1,isListenBeforeUnload:!0,govtVerification:!1,step:n.dy,validationMessages:{}},d=(0,r.oM)({name:"post",initialState:o,reducers:{setStep:(e,t)=>{let a=Number(t.payload);return a<0?{...e,step:0,showConfirmModal:!0}:a>=n.F_.length?{...e,step:n.F_.length-1,showConfirmModal:o.showConfirmModal}:{...e,step:a,showConfirmModal:o.showConfirmModal}},setShowConfirmModal:(e,t)=>{e.showConfirmModal=t.payload},setShowVerifyGovtModal:(e,t)=>{e.showVerifyGovtModal=t.payload},setListenBeforeUnload:(e,t)=>{e.isListenBeforeUnload=t.payload},setGovtVerification:(e,t)=>{e.govtVerification=t.payload},addImages:(e,t)=>({...e,images:e.images.concat(t.payload).slice(0,n.V$)}),setImages:(e,t)=>{e.images=t.payload},removeImage:(e,t)=>{e.images=e.images.filter(e=>e.url!==t.payload.toString())},setLoading:(e,t)=>{e.isLoading=!!t.payload},setAILoading:(e,t)=>{e.isAILoading=!!t.payload},setImagesByResponse:(e,t)=>{e.images=e.images.map(e=>{if(!e.isUploaded){let a=t.payload.find(t=>t.name===e.url);if(a)return{...e,isUploaded:!0,id:a.id,url:a.url}}return e})},setAISuggestions:(e,t)=>{e.aiSuggestions=t.payload},setSelectedSuggestion:(e,t)=>{if(e.selectedSuggestion=t.payload,t.payload.isLastChild)e.selectedCategory=t.payload;else{let{id:a,isLastChild:r,name:n,parent:i,breadcrumb:o,postingTemplate:d}=t.payload,s=o[o.length-1];e.shownCategory={id:a,isLastChild:r,name:n,parent:i,postingTemplate:d,breadcrumbs:[{id:i,isLastChild:!1,name:s,parent:0}]}}},resetSelectedSuggestion:e=>{e.selectedSuggestion=void 0},setShownCategory:(e,t)=>{e.shownCategory=t.payload},resetShownCategory:e=>{e.shownCategory=void 0},setSelectedCategory:(e,t)=>{e.selectedCategory=t.payload},setAIGotResponse:(e,t)=>{e.aiGotResponse=t.payload},resetOnPhotosScreen:e=>({...e,aiGotResponse:o.aiGotResponse,aiSuggestions:o.aiSuggestions,selectedCategory:o.selectedCategory,selectedSuggestion:o.selectedSuggestion,shownCategory:o.shownCategory,step:0}),setInformation:(e,t)=>{let{payload:a}=t;e.information={...e.information,[a.key]:a.value}},setLocation:(e,t)=>{let{payload:a}=t;e.location=a},resetLocation:e=>{e.location=void 0},resetAttributes:e=>{e.attributes={},e.dropdownAttributes={},e.validationMessages={}},setEditAttributes:(e,t)=>{let{payload:{dropdownAttributes:a,attributes:r}}=t;e.dropdownAttributes=a,e.attributes=r},setAttributes:(e,t)=>{let{payload:a}=t;e.attributes[a.id]={slug:a.slug,value:a.value,displayName:a.name,title:a.title}},setDropdownAttribute:(e,t)=>{let{payload:{id:a,value:r,slug:n,parent:i,name:o}}=t,d=Object.entries(e.dropdownAttributes).reduce((e,t)=>{var n;let[i,o]=t;return i!==a.toString()&&(o.parent!==a||(null===(n=o.parent_attribute_values)||void 0===n?void 0:n.includes(r.id)))&&(e[i]=o),e},{[a]:{...r,attribute:n,parent:i,displayName:o}});e.dropdownAttributes=d},setCategoryAttributes:(e,t)=>{let{payload:a}=t;e.categoryAttributes=a},addValidationMessage:(e,t)=>{let{payload:a}=t;e.validationMessages={...e.validationMessages,[a.slug]:a.message}},removeValidationMessage:(e,t)=>{let{payload:a}=t;if(e.validationMessages&&e.validationMessages[a]){let{[a]:t,...r}=e.validationMessages;e.validationMessages=r}},clearValidationMessages:e=>{e.validationMessages={}},resetState:()=>o,setCustomState:(e,t)=>{let{payload:a}=t;return{...o,...a}}}}),{addImages:s,addValidationMessage:l,clearValidationMessages:u,removeImage:c,removeValidationMessage:f,resetAttributes:p,resetLocation:v,resetOnPhotosScreen:g,resetSelectedSuggestion:m,resetShownCategory:h,resetState:y,setAIGotResponse:I,setAILoading:b,setAISuggestions:S,setAttributes:_,setCategoryAttributes:E,setCustomState:O,setDropdownAttribute:T,setEditAttributes:w,setImages:L,setImagesByResponse:C,setInformation:A,setLoading:D,setLocation:k,setSelectedCategory:x,setSelectedSuggestion:N,setShowConfirmModal:M,setShowVerifyGovtModal:R,setListenBeforeUnload:F,setGovtVerification:U,setShownCategory:P,setStep:J}=d.actions;t.ZP=d.reducer},96920:function(e,t,a){"use strict";a.d(t,{RS:function(){return i}});let r=(0,a(68508).oM)({name:"toast",initialState:{toasts:[],isOpen:!1},reducers:{addToast:(e,t)=>{e.toasts.push(t.payload),e.isOpen=!0},removeToast:(e,t)=>{e.toasts=e.toasts.filter(e=>e.id!==t.payload),0===e.toasts.length&&(e.isOpen=!1)}}}),{addToast:n,removeToast:i}=r.actions;t.ZP=r.reducer},6973:function(e,t,a){"use strict";a.d(t,{R:function(){return n}});let r=(0,a(68508).oM)({name:"vitamin",initialState:{overviewCardItems:[],vitaminPaymentOverview:{amount:1,total:0},consumablePackage:[],vitaminPackages:[],selectedUniquePackageOfferId:0,vitaminCategoryName:""},reducers:{setVitaminCategoryName:(e,t)=>{e.vitaminCategoryName=t.payload},updateSelectedUniquePackageOfferId:(e,t)=>{e.selectedUniquePackageOfferId=t.payload},updateConsumablePackageInfo:(e,t)=>{e.consumablePackage=t.payload},updateVitaminPackageInfo:(e,t)=>{e.vitaminPackages=t.payload},updateOverviemCardItems:(e,t)=>{e.overviewCardItems=t.payload},increase:(e,t)=>{let a=e.overviewCardItems.find(e=>e.packageOfferId===t.payload.packageOfferId);a&&a.amount<5&&(a.amount+=1)},decrease:(e,t)=>{let a=e.overviewCardItems.find(e=>e.packageOfferId===t.payload.packageOfferId);a&&a.amount>1&&(a.amount-=1)},calculateTotals:e=>{let t=0,a=0;e.overviewCardItems.forEach(e=>{t+=e.amount,a+=e.amount*e.price}),e.vitaminPaymentOverview.amount=t,e.vitaminPaymentOverview.total=a}}}),n=r.actions;t.Z=r.reducer},18311:function(e,t,a){"use strict";a.d(t,{h:function(){return D}});var r=a(68508),n=a(75241),i=a(56183),o=a(44367),d=a(19465),s=a(20405),l=a(55497),u=a(75546);let c=(0,r.oM)({name:"categories",initialState:{},reducers:{setCategories:(e,t)=>{e.categories=t.payload},setSelectedSubCategory:(e,t)=>{e.selectedSubCategory=t.payload}}}),{setCategories:f,setSelectedSubCategory:p}=c.actions;var v=c.reducer,g=a(75468),m=a(96307);let h=(0,r.oM)({name:"global",initialState:{isLayoutFooterIntersected:!1},reducers:{toggleLayoutFooter:(e,t)=>{e.isLayoutFooterIntersected=t.payload}}});h.actions;var y=h.reducer,I=a(30060),b=a(83695),S=a(26923),_=a(66153),E=a(34931),O=a(56204),T=a(63263),w=a(6973),L=a(96920);let C=(0,r.e)(),A=(0,n.K3)({channel:"letgo-turkey-redux-sync",whitelist:["session/setSession","session/setImage","session/resetStates","location/setLocation"]}),D=(0,r.xC)({reducer:{session:T.ZP,filter:m.ZP,loading:S.Z,auth:u.ZP,retryRequest:O.ZP,global:y,categories:v,vitamin:w.Z,location:_.Z,gtm:I.Z,chat:g.ZP,listing:b.ZP,post:E.ZP,toast:L.ZP},middleware:e=>e({serializableCheck:!1}).prepend(A).prepend(C.middleware)});C.startListening({actionCreator:T.KY,effect:async(e,t)=>{let a=t.dispatch,r=t.getState();if((0,l.X)()){var n;!localStorage.getItem("userId")&&(null===(n=e.payload)||void 0===n?void 0:n.id)&&localStorage.setItem("userId",e.payload.id);let t=await (0,i.G4)();t.success&&localStorage.setItem(d.DI,JSON.stringify(t.data.map(e=>e)))}r.retryRequest.request&&(a(r.retryRequest.request),a((0,O.cr)()))}}),C.startListening({actionCreator:T.v3,effect:async()=>{window.location.replace(s.Z.home),await (0,o.I5)(),(0,l.X)()&&localStorage.removeItem(d.DI)}})}}]);